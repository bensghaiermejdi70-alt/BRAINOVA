<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dixit Futuriste 3D - Voyage Imaginaire</title>
    <script>
        (function(){
            if(window.__platform_nonblocking_dialogs) return; window.__platform_nonblocking_dialogs=true;
            try{
                const _alert = window.alert.bind(window);
                const _confirm = window.confirm.bind(window);
                const _prompt = window.prompt.bind(window);
                function send(type,text){ try{ if(window.parent && window.parent!==window) parent.postMessage({action:'dialog', dialogType:type, text:String(text||'')}, '*'); }catch(e){} }
                window.alert = function(msg){ if(window.parent && window.parent!==window){ send('alert', msg); } else { _alert(msg); } };
                window.confirm = function(msg){ if(window.parent && window.parent!==window){ send('confirm', msg); return true; } else { return _confirm(msg); } };
                window.prompt = function(msg, def){ if(window.parent && window.parent!==window){ send('prompt', msg+'\n(default: '+(def||'')+')'); return def||null; } else { return _prompt(msg, def); } };
            }catch(e){ }
        })();
    </script>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Particules d'arriÃ¨re-plan animÃ©es */
        .background-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.6; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .title {
            font-size: 3.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            animation: titleGlow 3s ease-in-out infinite alternate;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            font-style: italic;
        }

        @keyframes titleGlow {
            from { filter: drop-shadow(0 0 20px rgba(255, 107, 107, 0.5)); }
            to { filter: drop-shadow(0 0 40px rgba(69, 183, 209, 0.8)); }
        }

        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 8px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .language-select {
            background: transparent;
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: bold;
            outline: none;
            min-width: 100px;
            text-align: center;
        }

        .language-select:hover, .language-select:focus {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .language-select option {
            background: #667eea;
            color: white;
            padding: 8px;
            font-weight: bold;
        }

        .screen {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .menu-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .menu-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 25px 35px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
        }

        .menu-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }

        .menu-btn:hover::before {
            left: 100%;
        }

        .menu-btn:hover {
            transform: translateY(-8px) rotateX(5deg);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 250px;
            gap: 20px;
            margin-bottom: 20px;
        }

        .cards-container {
            perspective: 1200px;
            min-height: 500px;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 15px;
            padding: 15px;
        }

        .card {
            aspect-ratio: 2/3;
            background: linear-gradient(135deg, #ff9a9e, #fecfef, #ffecd2);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.5s ease;
            transform-style: preserve-3d;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border: 3px solid transparent;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.3));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card:hover {
            transform: translateY(-15px) rotateY(10deg) rotateX(5deg);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
            border-color: #4ecdc4;
        }

        .card.selected {
            border-color: #ff6b6b;
            transform: translateY(-20px) scale(1.05);
            box-shadow: 0 30px 70px rgba(255, 107, 107, 0.4);
        }

        .card-image {
            width: 80%;
            height: 60%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 10px;
            position: relative;
            overflow: hidden;
        }

        .card-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="stars" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="white" opacity="0.3"/></pattern></defs><rect width="100" height="100" fill="url(%23stars)"/></svg>');
        }

        .card-title {
            font-size: 0.9rem;
            font-weight: bold;
            color: #333;
            text-align: center;
            padding: 0 10px;
        }

        .game-info {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 18px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .info-section {
            margin-bottom: 18px;
        }

        .info-section h3 {
            color: #4ecdc4;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .score-display {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 15px;
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }

        .ai-players {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .ai-player {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-player.active {
            border-color: #4ecdc4;
            box-shadow: 0 0 25px rgba(78, 205, 196, 0.5);
            transform: scale(1.02);
        }

        .ai-name {
            font-weight: bold;
            color: white;
        }

        .ai-score {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            padding: 8px 12px;
            border-radius: 10px;
            font-weight: bold;
            min-width: 40px;
            text-align: center;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .control-btn {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            border: none;
            color: white;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.4s ease;
        }

        .control-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .control-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .story-prompt {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.2rem;
            font-style: italic;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .story-prompt::before {
            content: 'âœ¨';
            position: absolute;
            top: 15px;
            left: 20px;
            font-size: 1.5rem;
            animation: sparkle 2s ease-in-out infinite;
        }

        .story-prompt::after {
            content: 'âœ¨';
            position: absolute;
            bottom: 15px;
            right: 20px;
            font-size: 1.5rem;
            animation: sparkle 2s ease-in-out infinite 1s;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .rules-content {
            color: white;
            line-height: 1.8;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 15px;
        }

        .rules-content::-webkit-scrollbar {
            width: 10px;
        }

        .rules-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        .rules-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            border-radius: 5px;
        }

        .level-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .level-btn {
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            border: none;
            color: #333;
            padding: 20px;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .level-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .level-btn:hover::before,
        .level-btn.active::before {
            opacity: 1;
        }

        .level-btn:hover,
        .level-btn.active {
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .level-btn span {
            position: relative;
            z-index: 1;
        }

        .hidden {
            display: none;
        }

        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            font-weight: bold;
            transform: translateX(500px);
            transition: transform 0.5s ease;
            z-index: 1000;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .notification.show {
            transform: translateX(0);
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .floating-card {
            position: absolute;
            width: 60px;
            height: 90px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.3));
            border-radius: 8px;
            animation: floatCard 8s ease-in-out infinite;
            opacity: 0.6;
        }

        @keyframes floatCard {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-30px) rotate(5deg); }
            50% { transform: translateY(-60px) rotate(-5deg); }
            75% { transform: translateY(-30px) rotate(3deg); }
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2.5rem;
            }
            
            .game-area {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .cards-grid {
                grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
                gap: 12px;
                padding: 12px;
            }
            
            .language-selector {
                top: 10px;
                right: 10px;
                padding: 6px;
            }
            
            .language-select {
                font-size: 0.8rem;
                padding: 6px 10px;
                min-width: 80px;
            }
            
            .menu-buttons {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .game-info {
                padding: 15px;
            }
        }
        </style>
    <style>
    /* override: consistent global close button */
    .global-close-btn { position: fixed !important; top: 14px !important; right: 14px !important; z-index: 99999 !important; background: linear-gradient(45deg,#ff3b3b,#ff0066) !important; color: #fff !important; border: none !important; width:52px !important; height:52px !important; border-radius:50% !important; font-size:22px !important; cursor:pointer !important; display:flex !important;align-items:center !important;justify-content:center !important; box-shadow:0 8px 22px rgba(255,59,59,0.28) !important; }
    .global-close-btn:hover{ transform: scale(1.06); }
    </style>
        <style>
        /* nudge language selector left to avoid close button overlap */
        @media (min-width:800px){
            .language-selector{ right:80px !important; }
        }
        </style>
</head>
<body>
    <!-- Particules d'arriÃ¨re-plan -->
    <div class="background-particles" id="backgroundParticles"></div>

    <!-- SÃ©lecteur de langue fixe -->
    <div class="language-selector">
        <select class="language-select" id="languageSelect" onchange="changeLanguage(this.value)">
            <option value="fr">ğŸ‡«ğŸ‡· FR</option>
            <option value="en">ğŸ‡ºğŸ‡¸ EN</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ AR</option>
            <option value="es">ğŸ‡ªğŸ‡¸ ES</option>
            <option value="de">ğŸ‡©ğŸ‡ª DE</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ZH</option>
        </select>
    </div>

    <div class="container">
        <div class="header">
            <h1 class="title" id="gameTitle">DIXIT FUTURISTE 3D</h1>
            <button class="global-close-btn" title="Fermer" aria-label="Fermer" onclick="closePlatform()">âœ•</button>
            <script>
            /* Canonical child-side overlay closer for platform pages */
            function closePlatform(){
                try{ console.debug('jeux34: closePlatform called'); }catch(e){}
                if(window.parent && window.parent !== window){
                    window.parent.postMessage({ action: 'close', reason: 'user-initiated', source: 'jeux34' }, '*');
                    return;
                }
                if(window.opener && !window.opener.closed){
                    try{ window.opener.postMessage({ action: 'child-closed', source: 'jeux34' }, '*'); }catch(e){}
                    try{ window.close(); }catch(e){}
                    return;
                }
                window.location.href = '/global_platform.html';
            }
            window.closePlatform = closePlatform;
            </script>
            <p class="subtitle" id="gameSubtitle">Voyage dans l'Imaginaire Infini</p>
        </div>

        <!-- Menu Principal -->
        <div id="menuScreen" class="screen">
            <div class="floating-elements">
                <div class="floating-card" style="top: 10%; left: 5%; animation-delay: 0s;"></div>
                <div class="floating-card" style="top: 20%; right: 10%; animation-delay: 2s;"></div>
                <div class="floating-card" style="bottom: 30%; left: 15%; animation-delay: 4s;"></div>
                <div class="floating-card" style="bottom: 10%; right: 5%; animation-delay: 6s;"></div>
            </div>
            
            <div class="menu-buttons">
                <button class="menu-btn" onclick="showRules()">
                    <span id="rulesBtn">ğŸ“– RÃˆGLES</span>
                </button>
                <button class="menu-btn" onclick="showGame()">
                    <span id="startBtn">ğŸš€ DÃ‰MARRER</span>
                </button>
                <button class="menu-btn" onclick="showLevels()">
                    <span id="levelsBtn">ğŸ¯ NIVEAUX</span>
                </button>
                <button class="menu-btn" onclick="newGame()">
                    <span id="newGameBtn">âœ¨ NOUVELLE PARTIE</span>
                </button>
                <button class="menu-btn" onclick="pauseGame()">
                    <span id="pauseBtn">â¸ï¸ PAUSE</span>
                </button>
            </div>
            
            <div id="levelSelector" class="level-selector hidden">
                <button class="level-btn active" onclick="selectLevel(1)">
                    <span id="level1">ğŸŒŸ DÃ©butant</span>
                </button>
                <button class="level-btn" onclick="selectLevel(2)">
                    <span id="level2">ğŸ”¥ IntermÃ©diaire</span>
                </button>
                <button class="level-btn" onclick="selectLevel(3)">
                    <span id="level3">âš¡ Expert</span>
                </button>
                <button class="level-btn" onclick="selectLevel(4)">
                    <span id="level4">ğŸš€ MaÃ®tre IA</span>
                </button>
            </div>
        </div>

        <!-- Ã‰cran des RÃ¨gles -->
        <div id="rulesScreen" class="screen hidden">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h2 id="rulesTitle">ğŸ“– RÃˆGLES DU JEU</h2>
                <button class="control-btn" onclick="showMenu()" style="padding: 10px 20px; font-size: 1rem;">
                    <span id="closeBtn">âœ• FERMER</span>
                </button>
            </div>
            
            <div class="rules-content" id="rulesContent">
                <div class="info-section">
                    <h3 id="objectiveTitle">ğŸ¯ Objectif du Jeu</h3>
                    <p id="objectiveText">Dixit est un jeu d'imagination et d'intuition. Racontez des histoires avec vos cartes et devinez celles des autres joueurs pour marquer des points.</p>
                </div>
                
                <div class="info-section">
                    <h3 id="howToPlayTitle">ğŸ® Comment Jouer</h3>
                    <p id="howToPlayText1">â€¢ Chaque joueur reÃ§oit 6 cartes illustrÃ©es uniques</p>
                    <p id="howToPlayText2">â€¢ Le conteur choisit une carte et donne un indice (mot, phrase, son...)</p>
                    <p id="howToPlayText3">â€¢ Les autres joueurs choisissent une carte qui correspond Ã  l'indice</p>
                    <p id="howToPlayText4">â€¢ Toutes les cartes sont mÃ©langÃ©es et rÃ©vÃ©lÃ©es</p>
                    <p id="howToPlayText5">â€¢ Chacun vote pour la carte du conteur (sauf le conteur)</p>
                </div>
                
                <div class="info-section">
                    <h3 id="scoringTitle">ğŸ† SystÃ¨me de Points</h3>
                    <p id="scoringText1">â€¢ Si tout le monde ou personne ne trouve la carte du conteur : 0 point pour le conteur, 2 points pour les autres</p>
                    <p id="scoringText2">â€¢ Sinon : 3 points pour le conteur et ceux qui ont trouvÃ© sa carte</p>
                    <p id="scoringText3">â€¢ +1 point pour chaque vote reÃ§u sur votre carte (sauf si vous Ãªtes le conteur)</p>
                    <p id="scoringText4">â€¢ Premier Ã  30 points gagne la partie !</p>
                </div>
                
                <div class="info-section">
                    <h3 id="aiTitle">ğŸ¤– IA Futuriste</h3>
                    <p id="aiText1">â€¢ L'IA analyse les patterns de vos choix et s'adapte</p>
                    <p id="aiText2">â€¢ DiffÃ©rents niveaux de difficultÃ© avec personnalitÃ©s uniques</p>
                    <p id="aiText3">â€¢ Apprentissage automatique pour des parties toujours surprenantes</p>
                    <p id="aiText4">â€¢ GÃ©nÃ©ration d'indices crÃ©atifs basÃ©e sur l'analyse d'images</p>
                </div>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="showMenu()">
                    <span id="backBtn">â† RETOUR</span>
                </button>
            </div>
        </div>

        <!-- Ã‰cran de Jeu -->
        <div id="gameScreen" class="screen hidden">
            <div class="story-prompt" id="storyPrompt">
                <span id="promptText">Choisissez une carte qui Ã©voque : "Un rÃªve oubliÃ©"</span>
            </div>
            
            <div class="game-area">
                <div class="cards-container">
                    <div class="cards-grid" id="cardsGrid">
                        <!-- Les cartes seront gÃ©nÃ©rÃ©es ici -->
                    </div>
                </div>
                
                <div class="game-info">
                    <div class="info-section">
                        <h3 id="scoreLabel">ğŸ† Score</h3>
                        <div class="score-display" id="playerScore">0</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 id="gameInfoLabel">ğŸ“Š Partie</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                            <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px; text-align: center;">
                                <div style="color: #4ecdc4; font-size: 0.9rem;" id="roundLabel">Manche</div>
                                <div style="color: white; font-weight: bold; font-size: 1.2rem;" id="currentRound">1</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px; text-align: center;">
                                <div style="color: #4ecdc4; font-size: 0.9rem;" id="levelLabel">Niveau</div>
                                <div style="color: white; font-weight: bold; font-size: 1.2rem;" id="currentLevel">1</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 id="playersLabel">ğŸ‘¥ Joueurs IA</h3>
                        <div class="ai-players" id="aiPlayers">
                            <!-- Les joueurs IA seront gÃ©nÃ©rÃ©s ici -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <button class="control-btn" id="submitBtn" onclick="submitCard()" disabled>
                    <span id="submitLabel">âœ¨ VALIDER CHOIX</span>
                </button>
                <button class="control-btn" id="nextRoundBtn" onclick="nextRound()" disabled>
                    <span id="nextRoundLabel">â¡ï¸ MANCHE SUIVANTE</span>
                </button>
                <button class="control-btn" onclick="showMenu()">
                    <span id="menuLabel">ğŸ“‹ MENU</span>
                </button>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // SystÃ¨me de traductions
        const translations = {
            fr: {
                gameTitle: "DIXIT FUTURISTE 3D",
                gameSubtitle: "Voyage dans l'Imaginaire Infini",
                rulesBtn: "ğŸ“– RÃˆGLES",
                startBtn: "ğŸš€ DÃ‰MARRER",
                levelsBtn: "ğŸ¯ NIVEAUX",
                newGameBtn: "âœ¨ NOUVELLE PARTIE",
                pauseBtn: "â¸ï¸ PAUSE",
                level1: "ğŸŒŸ DÃ©butant",
                level2: "ğŸ”¥ IntermÃ©diaire",
                level3: "âš¡ Expert",
                level4: "ğŸš€ MaÃ®tre IA",
                rulesTitle: "ğŸ“– RÃˆGLES DU JEU",
                closeBtn: "âœ• FERMER",
                backBtn: "â† RETOUR",
                scoreLabel: "ğŸ† Score",
                gameInfoLabel: "ğŸ“Š Partie",
                roundLabel: "Manche",
                levelLabel: "Niveau",
                playersLabel: "ğŸ‘¥ Joueurs IA",
                submitLabel: "âœ¨ VALIDER CHOIX",
                nextRoundLabel: "â¡ï¸ MANCHE SUIVANTE",
                menuLabel: "ğŸ“‹ MENU",
                objectiveTitle: "ğŸ¯ Objectif du Jeu",
                objectiveText: "Dixit est un jeu d'imagination et d'intuition. Racontez des histoires avec vos cartes et devinez celles des autres joueurs pour marquer des points.",
                howToPlayTitle: "ğŸ® Comment Jouer",
                howToPlayText1: "â€¢ Chaque joueur reÃ§oit 6 cartes illustrÃ©es uniques",
                howToPlayText2: "â€¢ Le conteur choisit une carte et donne un indice (mot, phrase, son...)",
                howToPlayText3: "â€¢ Les autres joueurs choisissent une carte qui correspond Ã  l'indice",
                howToPlayText4: "â€¢ Toutes les cartes sont mÃ©langÃ©es et rÃ©vÃ©lÃ©es",
                howToPlayText5: "â€¢ Chacun vote pour la carte du conteur (sauf le conteur)",
                scoringTitle: "ğŸ† SystÃ¨me de Points",
                scoringText1: "â€¢ Si tout le monde ou personne ne trouve la carte du conteur : 0 point pour le conteur, 2 points pour les autres",
                scoringText2: "â€¢ Sinon : 3 points pour le conteur et ceux qui ont trouvÃ© sa carte",
                scoringText3: "â€¢ +1 point pour chaque vote reÃ§u sur votre carte (sauf si vous Ãªtes le conteur)",
                scoringText4: "â€¢ Premier Ã  30 points gagne la partie !",
                aiTitle: "ğŸ¤– IA Futuriste",
                aiText1: "â€¢ L'IA analyse les patterns de vos choix et s'adapte",
                aiText2: "â€¢ DiffÃ©rents niveaux de difficultÃ© avec personnalitÃ©s uniques",
                aiText3: "â€¢ Apprentissage automatique pour des parties toujours surprenantes",
                aiText4: "â€¢ GÃ©nÃ©ration d'indices crÃ©atifs basÃ©e sur l'analyse d'images"
            },
            en: {
                gameTitle: "FUTURISTIC DIXIT 3D",
                gameSubtitle: "Journey into Infinite Imagination",
                rulesBtn: "ğŸ“– RULES",
                startBtn: "ğŸš€ START",
                levelsBtn: "ğŸ¯ LEVELS",
                newGameBtn: "âœ¨ NEW GAME",
                pauseBtn: "â¸ï¸ PAUSE",
                level1: "ğŸŒŸ Beginner",
                level2: "ğŸ”¥ Intermediate",
                level3: "âš¡ Expert",
                level4: "ğŸš€ AI Master",
                rulesTitle: "ğŸ“– GAME RULES",
                closeBtn: "âœ• CLOSE",
                backBtn: "â† BACK",
                scoreLabel: "ğŸ† Score",
                gameInfoLabel: "ğŸ“Š Game",
                roundLabel: "Round",
                levelLabel: "Level",
                playersLabel: "ğŸ‘¥ AI Players",
                submitLabel: "âœ¨ SUBMIT CHOICE",
                nextRoundLabel: "â¡ï¸ NEXT ROUND",
                menuLabel: "ğŸ“‹ MENU",
                objectiveTitle: "ğŸ¯ Game Objective",
                objectiveText: "Dixit is a game of imagination and intuition. Tell stories with your cards and guess other players' cards to score points.",
                howToPlayTitle: "ğŸ® How to Play",
                howToPlayText1: "â€¢ Each player receives 6 unique illustrated cards",
                howToPlayText2: "â€¢ The storyteller chooses a card and gives a clue (word, phrase, sound...)",
                howToPlayText3: "â€¢ Other players choose a card that matches the clue",
                howToPlayText4: "â€¢ All cards are shuffled and revealed",
                howToPlayText5: "â€¢ Everyone votes for the storyteller's card (except the storyteller)",
                scoringTitle: "ğŸ† Scoring System",
                scoringText1: "â€¢ If everyone or no one finds the storyteller's card: 0 points for storyteller, 2 points for others",
                scoringText2: "â€¢ Otherwise: 3 points for storyteller and those who found their card",
                scoringText3: "â€¢ +1 point for each vote received on your card (except if you're the storyteller)",
                scoringText4: "â€¢ First to 30 points wins the game!",
                aiTitle: "ğŸ¤– Futuristic AI",
                aiText1: "â€¢ AI analyzes patterns in your choices and adapts",
                aiText2: "â€¢ Different difficulty levels with unique personalities",
                aiText3: "â€¢ Machine learning for always surprising games",
                aiText4: "â€¢ Creative clue generation based on image analysis"
            },
            ar: {
                gameTitle: "Ø¯ÙŠÙƒØ³ÙŠØª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯",
                gameSubtitle: "Ø±Ø­Ù„Ø© ÙÙŠ Ø§Ù„Ø®ÙŠØ§Ù„ Ø§Ù„Ù„Ø§Ù†Ù‡Ø§Ø¦ÙŠ",
                rulesBtn: "ğŸ“– Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯",
                startBtn: "ğŸš€ Ø§Ø¨Ø¯Ø£",
                levelsBtn: "ğŸ¯ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª",
                newGameBtn: "âœ¨ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©",
                pauseBtn: "â¸ï¸ ØªÙˆÙ‚Ù",
                level1: "ğŸŒŸ Ù…Ø¨ØªØ¯Ø¦",
                level2: "ğŸ”¥ Ù…ØªÙˆØ³Ø·",
                level3: "âš¡ Ø®Ø¨ÙŠØ±",
                level4: "ğŸš€ Ø³ÙŠØ¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                rulesTitle: "ğŸ“– Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø©",
                closeBtn: "âœ• Ø¥ØºÙ„Ø§Ù‚",
                backBtn: "â† Ø±Ø¬ÙˆØ¹",
                scoreLabel: "ğŸ† Ø§Ù„Ù†Ù‚Ø§Ø·",
                gameInfoLabel: "ğŸ“Š Ø§Ù„Ù„Ø¹Ø¨Ø©",
                roundLabel: "Ø§Ù„Ø¬ÙˆÙ„Ø©",
                levelLabel: "Ø§Ù„Ù…Ø³ØªÙˆÙ‰",
                playersLabel: "ğŸ‘¥ Ù„Ø§Ø¹Ø¨Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                submitLabel: "âœ¨ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±",
                nextRoundLabel: "â¡ï¸ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©",
                menuLabel: "ğŸ“‹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©",
                objectiveTitle: "ğŸ¯ Ù‡Ø¯Ù Ø§Ù„Ù„Ø¹Ø¨Ø©",
                objectiveText: "Ø¯ÙŠÙƒØ³ÙŠØª Ù„Ø¹Ø¨Ø© Ø®ÙŠØ§Ù„ ÙˆØ­Ø¯Ø³. Ø§Ø­Ùƒ Ø§Ù„Ù‚ØµØµ Ø¨Ø£ÙˆØ±Ø§Ù‚Ùƒ ÙˆØ®Ù…Ù† Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø·.",
                howToPlayTitle: "ğŸ® ÙƒÙŠÙÙŠØ© Ø§Ù„Ù„Ø¹Ø¨",
                howToPlayText1: "â€¢ ÙƒÙ„ Ù„Ø§Ø¹Ø¨ ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ 6 Ø£ÙˆØ±Ø§Ù‚ Ù…ØµÙˆØ±Ø© ÙØ±ÙŠØ¯Ø©",
                howToPlayText2: "â€¢ Ø§Ù„Ø±Ø§ÙˆÙŠ ÙŠØ®ØªØ§Ø± ÙˆØ±Ù‚Ø© ÙˆÙŠØ¹Ø·ÙŠ ØªÙ„Ù…ÙŠØ­Ø§Ù‹ (ÙƒÙ„Ù…Ø©ØŒ Ø¬Ù…Ù„Ø©ØŒ ØµÙˆØª...)",
                howToPlayText3: "â€¢ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ† Ø§Ù„Ø¢Ø®Ø±ÙˆÙ† ÙŠØ®ØªØ§Ø±ÙˆÙ† ÙˆØ±Ù‚Ø© ØªØ·Ø§Ø¨Ù‚ Ø§Ù„ØªÙ„Ù…ÙŠØ­",
                howToPlayText4: "â€¢ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ ØªÙØ®Ù„Ø· ÙˆØªÙÙƒØ´Ù",
                howToPlayText5: "â€¢ Ø§Ù„Ø¬Ù…ÙŠØ¹ ÙŠØµÙˆØª Ù„ÙˆØ±Ù‚Ø© Ø§Ù„Ø±Ø§ÙˆÙŠ (Ø¹Ø¯Ø§ Ø§Ù„Ø±Ø§ÙˆÙŠ)",
                scoringTitle: "ğŸ† Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·",
                scoringText1: "â€¢ Ø¥Ø°Ø§ ÙˆØ¬Ø¯ Ø§Ù„Ø¬Ù…ÙŠØ¹ Ø£Ùˆ Ù„Ù… ÙŠØ¬Ø¯ Ø£Ø­Ø¯ ÙˆØ±Ù‚Ø© Ø§Ù„Ø±Ø§ÙˆÙŠ: 0 Ù†Ù‚Ø·Ø© Ù„Ù„Ø±Ø§ÙˆÙŠØŒ 2 Ù†Ù‚Ø·Ø© Ù„Ù„Ø¢Ø®Ø±ÙŠÙ†",
                scoringText2: "â€¢ ÙˆØ¥Ù„Ø§: 3 Ù†Ù‚Ø§Ø· Ù„Ù„Ø±Ø§ÙˆÙŠ ÙˆÙ…Ù† ÙˆØ¬Ø¯ ÙˆØ±Ù‚ØªÙ‡",
                scoringText3: "â€¢ +1 Ù†Ù‚Ø·Ø© Ù„ÙƒÙ„ ØµÙˆØª ØªØ­ØµÙ„ Ø¹Ù„ÙŠÙ‡ Ø¹Ù„Ù‰ ÙˆØ±Ù‚ØªÙƒ (Ø¥Ù„Ø§ Ø¥Ø°Ø§ ÙƒÙ†Øª Ø§Ù„Ø±Ø§ÙˆÙŠ)",
                scoringText4: "â€¢ Ø£ÙˆÙ„ Ù…Ù† ÙŠØµÙ„ Ø¥Ù„Ù‰ 30 Ù†Ù‚Ø·Ø© ÙŠÙÙˆØ²!",
                aiTitle: "ğŸ¤– Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ",
                aiText1: "â€¢ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ­Ù„Ù„ Ø£Ù†Ù…Ø§Ø· Ø§Ø®ØªÙŠØ§Ø±Ø§ØªÙƒ ÙˆÙŠØªÙƒÙŠÙ",
                aiText2: "â€¢ Ù…Ø³ØªÙˆÙŠØ§Øª ØµØ¹ÙˆØ¨Ø© Ù…Ø®ØªÙ„ÙØ© Ø¨Ø´Ø®ØµÙŠØ§Øª ÙØ±ÙŠØ¯Ø©",
                aiText3: "â€¢ ØªØ¹Ù„Ù… Ø¢Ù„ÙŠ Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…ÙØ§Ø¬Ø¦Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹",
                aiText4: "â€¢ ØªÙˆÙ„ÙŠØ¯ ØªÙ„Ù…ÙŠØ­Ø§Øª Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±"
            },
            es: {
                gameTitle: "DIXIT FUTURISTA 3D",
                gameSubtitle: "Viaje a la ImaginaciÃ³n Infinita",
                rulesBtn: "ğŸ“– REGLAS",
                startBtn: "ğŸš€ EMPEZAR",
                levelsBtn: "ğŸ¯ NIVELES",
                newGameBtn: "âœ¨ NUEVO JUEGO",
                pauseBtn: "â¸ï¸ PAUSA",
                level1: "ğŸŒŸ Principiante",
                level2: "ğŸ”¥ Intermedio",
                level3: "âš¡ Experto",
                level4: "ğŸš€ Maestro IA",
                rulesTitle: "ğŸ“– REGLAS DEL JUEGO",
                closeBtn: "âœ• CERRAR",
                backBtn: "â† VOLVER",
                scoreLabel: "ğŸ† PuntuaciÃ³n",
                gameInfoLabel: "ğŸ“Š Partida",
                roundLabel: "Ronda",
                levelLabel: "Nivel",
                playersLabel: "ğŸ‘¥ Jugadores IA",
                submitLabel: "âœ¨ CONFIRMAR ELECCIÃ“N",
                nextRoundLabel: "â¡ï¸ SIGUIENTE RONDA",
                menuLabel: "ğŸ“‹ MENÃš",
                objectiveTitle: "ğŸ¯ Objetivo del Juego",
                objectiveText: "Dixit es un juego de imaginaciÃ³n e intuiciÃ³n. Cuenta historias con tus cartas y adivina las de otros jugadores para anotar puntos.",
                howToPlayTitle: "ğŸ® CÃ³mo Jugar",
                howToPlayText1: "â€¢ Cada jugador recibe 6 cartas ilustradas Ãºnicas",
                howToPlayText2: "â€¢ El narrador elige una carta y da una pista (palabra, frase, sonido...)",
                howToPlayText3: "â€¢ Los otros jugadores eligen una carta que coincida con la pista",
                howToPlayText4: "â€¢ Todas las cartas se mezclan y se revelan",
                howToPlayText5: "â€¢ Todos votan por la carta del narrador (excepto el narrador)",
                scoringTitle: "ğŸ† Sistema de PuntuaciÃ³n",
                scoringText1: "â€¢ Si todos o nadie encuentra la carta del narrador: 0 puntos para el narrador, 2 puntos para otros",
                scoringText2: "â€¢ De lo contrario: 3 puntos para el narrador y quienes encontraron su carta",
                scoringText3: "â€¢ +1 punto por cada voto recibido en tu carta (excepto si eres el narrador)",
                scoringText4: "â€¢ Â¡El primero en llegar a 30 puntos gana!",
                aiTitle: "ğŸ¤– IA Futurista",
                aiText1: "â€¢ La IA analiza patrones en tus elecciones y se adapta",
                aiText2: "â€¢ Diferentes niveles de dificultad con personalidades Ãºnicas",
                aiText3: "â€¢ Aprendizaje automÃ¡tico para juegos siempre sorprendentes",
                aiText4: "â€¢ GeneraciÃ³n de pistas creativas basada en anÃ¡lisis de imÃ¡genes"
            },
            de: {
                gameTitle: "FUTURISTISCHES DIXIT 3D",
                gameSubtitle: "Reise in die Unendliche Fantasie",
                rulesBtn: "ğŸ“– REGELN",
                startBtn: "ğŸš€ STARTEN",
                levelsBtn: "ğŸ¯ LEVEL",
                newGameBtn: "âœ¨ NEUES SPIEL",
                pauseBtn: "â¸ï¸ PAUSE",
                level1: "ğŸŒŸ AnfÃ¤nger",
                level2: "ğŸ”¥ Fortgeschritten",
                level3: "âš¡ Experte",
                level4: "ğŸš€ KI-Meister",
                rulesTitle: "ğŸ“– SPIELREGELN",
                closeBtn: "âœ• SCHLIESSEN",
                backBtn: "â† ZURÃœCK",
                scoreLabel: "ğŸ† Punkte",
                gameInfoLabel: "ğŸ“Š Spiel",
                roundLabel: "Runde",
                levelLabel: "Level",
                playersLabel: "ğŸ‘¥ KI-Spieler",
                submitLabel: "âœ¨ WAHL BESTÃ„TIGEN",
                nextRoundLabel: "â¡ï¸ NÃ„CHSTE RUNDE",
                menuLabel: "ğŸ“‹ MENÃœ",
                objectiveTitle: "ğŸ¯ Spielziel",
                objectiveText: "Dixit ist ein Spiel der Fantasie und Intuition. ErzÃ¤hle Geschichten mit deinen Karten und errate die der anderen Spieler, um Punkte zu sammeln.",
                howToPlayTitle: "ğŸ® Spielweise",
                howToPlayText1: "â€¢ Jeder Spieler erhÃ¤lt 6 einzigartige illustrierte Karten",
                howToPlayText2: "â€¢ Der ErzÃ¤hler wÃ¤hlt eine Karte und gibt einen Hinweis (Wort, Satz, GerÃ¤usch...)",
                howToPlayText3: "â€¢ Andere Spieler wÃ¤hlen eine Karte, die zum Hinweis passt",
                howToPlayText4: "â€¢ Alle Karten werden gemischt und aufgedeckt",
                howToPlayText5: "â€¢ Jeder stimmt fÃ¼r die Karte des ErzÃ¤hlers ab (auÃŸer dem ErzÃ¤hler)",
                scoringTitle: "ğŸ† Punktesystem",
                scoringText1: "â€¢ Wenn alle oder niemand die Karte des ErzÃ¤hlers findet: 0 Punkte fÃ¼r ErzÃ¤hler, 2 Punkte fÃ¼r andere",
                scoringText2: "â€¢ Sonst: 3 Punkte fÃ¼r ErzÃ¤hler und die, die seine Karte fanden",
                scoringText3: "â€¢ +1 Punkt fÃ¼r jede Stimme auf deine Karte (auÃŸer als ErzÃ¤hler)",
                scoringText4: "â€¢ Erster mit 30 Punkten gewinnt!",
                aiTitle: "ğŸ¤– Futuristische KI",
                aiText1: "â€¢ KI analysiert Muster deiner Wahlen und passt sich an",
                aiText2: "â€¢ Verschiedene Schwierigkeitsgrade mit einzigartigen PersÃ¶nlichkeiten",
                aiText3: "â€¢ Maschinelles Lernen fÃ¼r immer Ã¼berraschende Spiele",
                aiText4: "â€¢ Kreative Hinweisgenerierung basierend auf Bildanalyse"
            },
            zh: {
                gameTitle: "æœªæ¥å¦™è¯­è¯´ä¹¦äºº3D",
                gameSubtitle: "æ— é™æƒ³è±¡ä¹‹æ—…",
                rulesBtn: "ğŸ“– è§„åˆ™",
                startBtn: "ğŸš€ å¼€å§‹",
                levelsBtn: "ğŸ¯ ç­‰çº§",
                newGameBtn: "âœ¨ æ–°æ¸¸æˆ",
                pauseBtn: "â¸ï¸ æš‚åœ",
                level1: "ğŸŒŸ åˆå­¦è€…",
                level2: "ğŸ”¥ ä¸­çº§",
                level3: "âš¡ ä¸“å®¶",
                level4: "ğŸš€ AIå¤§å¸ˆ",
                rulesTitle: "ğŸ“– æ¸¸æˆè§„åˆ™",
                closeBtn: "âœ• å…³é—­",
                backBtn: "â† è¿”å›",
                scoreLabel: "ğŸ† å¾—åˆ†",
                gameInfoLabel: "ğŸ“Š æ¸¸æˆ",
                roundLabel: "å›åˆ",
                levelLabel: "ç­‰çº§",
                playersLabel: "ğŸ‘¥ AIç©å®¶",
                submitLabel: "âœ¨ ç¡®è®¤é€‰æ‹©",
                nextRoundLabel: "â¡ï¸ ä¸‹ä¸€å›åˆ",
                menuLabel: "ğŸ“‹ èœå•",
                objectiveTitle: "ğŸ¯ æ¸¸æˆç›®æ ‡",
                objectiveText: "å¦™è¯­è¯´ä¹¦äººæ˜¯ä¸€ä¸ªæƒ³è±¡åŠ›å’Œç›´è§‰çš„æ¸¸æˆã€‚ç”¨ä½ çš„å¡ç‰Œè®²æ•…äº‹ï¼ŒçŒœæµ‹å…¶ä»–ç©å®¶çš„å¡ç‰Œæ¥å¾—åˆ†ã€‚",
                howToPlayTitle: "ğŸ® æ¸¸æˆç©æ³•",
                howToPlayText1: "â€¢ æ¯ä½ç©å®¶è·å¾—6å¼ ç‹¬ç‰¹çš„æ’å›¾å¡ç‰Œ",
                howToPlayText2: "â€¢ è¯´ä¹¦äººé€‰æ‹©ä¸€å¼ å¡ç‰Œå¹¶ç»™å‡ºçº¿ç´¢ï¼ˆè¯è¯­ã€çŸ­è¯­ã€å£°éŸ³...ï¼‰",
                howToPlayText3: "â€¢ å…¶ä»–ç©å®¶é€‰æ‹©ä¸çº¿ç´¢åŒ¹é…çš„å¡ç‰Œ",
                howToPlayText4: "â€¢ æ‰€æœ‰å¡ç‰Œè¢«æ´—æ··å¹¶æ­ç¤º",
                howToPlayText5: "â€¢ æ¯ä¸ªäººä¸ºè¯´ä¹¦äººçš„å¡ç‰ŒæŠ•ç¥¨ï¼ˆé™¤äº†è¯´ä¹¦äººï¼‰",
                scoringTitle: "ğŸ† è®¡åˆ†ç³»ç»Ÿ",
                scoringText1: "â€¢ å¦‚æœæ‰€æœ‰äººæˆ–æ²¡æœ‰äººæ‰¾åˆ°è¯´ä¹¦äººçš„å¡ç‰Œï¼šè¯´ä¹¦äºº0åˆ†ï¼Œå…¶ä»–äºº2åˆ†",
                scoringText2: "â€¢ å¦åˆ™ï¼šè¯´ä¹¦äººå’Œæ‰¾åˆ°å…¶å¡ç‰Œçš„äººå¾—3åˆ†",
                scoringText3: "â€¢ ä½ çš„å¡ç‰Œæ¯è·å¾—ä¸€ç¥¨å¾—1åˆ†ï¼ˆé™¤éä½ æ˜¯è¯´ä¹¦äººï¼‰",
                scoringText4: "â€¢ ç¬¬ä¸€ä¸ªè¾¾åˆ°30åˆ†çš„äººè·èƒœï¼",
                aiTitle: "ğŸ¤– æœªæ¥AI",
                aiText1: "â€¢ AIåˆ†æä½ çš„é€‰æ‹©æ¨¡å¼å¹¶é€‚åº”",
                aiText2: "â€¢ ä¸åŒéš¾åº¦çº§åˆ«å…·æœ‰ç‹¬ç‰¹ä¸ªæ€§",
                aiText3: "â€¢ æœºå™¨å­¦ä¹ å¸¦æ¥æ€»æ˜¯ä»¤äººæƒŠå–œçš„æ¸¸æˆ",
                aiText4: "â€¢ åŸºäºå›¾åƒåˆ†æçš„åˆ›æ„çº¿ç´¢ç”Ÿæˆ"
            }
        };

        // Ã‰tat du jeu
        let gameState = {
            currentLanguage: 'fr',
            currentLevel: 1,
            currentRound: 1,
            playerScore: 0,
            maxScore: 30,
            playerCards: [],
            aiPlayers: [],
            selectedCard: null,
            gameActive: false,
            isStoryteller: false,
            currentPrompt: "",
            gamePhase: 'selection', // selection, voting, results
            roundResults: []
        };

        // DonnÃ©es des cartes avec thÃ¨mes imaginaires
        const cardThemes = [
            { emoji: 'ğŸŒ™', title: 'Lune Mystique', theme: 'mystique' },
            { emoji: 'ğŸ¦‹', title: 'Papillon Ã‰thÃ©rÃ©', theme: 'nature' },
            { emoji: 'ğŸ°', title: 'ChÃ¢teau Volant', theme: 'fantastique' },
            { emoji: 'ğŸŒŠ', title: 'Vague Temporelle', theme: 'temps' },
            { emoji: 'ğŸ”®', title: 'Orbe ProphÃ©tique', theme: 'magie' },
            { emoji: 'ğŸ­', title: 'Masque des Ã‰motions', theme: 'Ã©motion' },
            { emoji: 'ğŸŒŸ', title: 'Ã‰toile Filante', theme: 'rÃªve' },
            { emoji: 'ğŸ—ï¸', title: 'ClÃ© des Secrets', theme: 'mystÃ¨re' },
            { emoji: 'ğŸ¨', title: 'Palette Vivante', theme: 'art' },
            { emoji: 'ğŸ¦„', title: 'Licorne Cosmique', theme: 'fantastique' },
            { emoji: 'âš¡', title: 'Ã‰clair de GÃ©nie', theme: 'inspiration' },
            { emoji: 'ğŸŒˆ', title: 'Pont Arc-en-ciel', theme: 'espoir' },
            { emoji: 'ğŸ•Šï¸', title: 'Colombe de Paix', theme: 'paix' },
            { emoji: 'ğŸª', title: 'Cirque des RÃªves', theme: 'spectacle' },
            { emoji: 'ğŸŒ¸', title: 'Fleur Ã‰ternelle', theme: 'beautÃ©' },
            { emoji: 'ğŸµ', title: 'MÃ©lodie CÃ©leste', theme: 'musique' },
            { emoji: 'ğŸ¦…', title: 'Aigle Majestueux', theme: 'libertÃ©' },
            { emoji: 'ğŸŒº', title: 'Jardin EnchantÃ©', theme: 'nature' },
            { emoji: 'ğŸ¯', title: 'Cible du Destin', theme: 'destin' },
            { emoji: 'ğŸŒ€', title: 'Spirale Temporelle', theme: 'temps' }
        ];

        // Prompts crÃ©atifs pour les indices
        const storyPrompts = [
            "Un rÃªve oubliÃ©",
            "Le dernier espoir",
            "Voyage vers l'inconnu",
            "Secret bien gardÃ©",
            "Moment de pure joie",
            "Peur ancestrale",
            "LibertÃ© retrouvÃ©e",
            "Amour impossible",
            "DÃ©couverte magique",
            "Nostalgie d'enfance",
            "Courage face Ã  l'adversitÃ©",
            "BeautÃ© Ã©phÃ©mÃ¨re",
            "MystÃ¨re non rÃ©solu",
            "Transformation profonde",
            "Harmonie parfaite"
        ];

        // Initialisation du jeu
        function initGame() {
            createBackgroundParticles();
            createAIPlayers();
            dealCards();
            generateNewPrompt();
            updateDisplay();
            gameState.gameActive = true;
            showNotification(translations[gameState.currentLanguage].startBtn);
        }

        function createBackgroundParticles() {
            const container = document.getElementById('backgroundParticles');
            container.innerHTML = '';
            
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (3 + Math.random() * 3) + 's';
                container.appendChild(particle);
            }
        }

        function createAIPlayers() {
            const aiNames = ['Luna', 'Orion', 'Nova', 'Cosmos'];
            const aiPersonalities = ['crÃ©atif', 'logique', 'intuitif', 'audacieux'];
            
            gameState.aiPlayers = [];
            const playerCount = Math.min(3, gameState.currentLevel);
            
            for (let i = 0; i < playerCount; i++) {
                gameState.aiPlayers.push({
                    name: aiNames[i],
                    personality: aiPersonalities[i],
                    score: 0,
                    cards: [],
                    difficulty: gameState.currentLevel,
                    selectedCard: null,
                    votedCard: null
                });
            }
        }

        function dealCards() {
            // MÃ©langer les cartes
            const shuffledCards = [...cardThemes].sort(() => Math.random() - 0.5);
            
            // Distribuer 6 cartes au joueur
            gameState.playerCards = shuffledCards.slice(0, 6).map((card, index) => ({
                ...card,
                id: `player_${index}`,
                owner: 'player'
            }));
            
            // Distribuer aux IA
            let cardIndex = 6;
            gameState.aiPlayers.forEach((ai, aiIndex) => {
                ai.cards = shuffledCards.slice(cardIndex, cardIndex + 6).map((card, index) => ({
                    ...card,
                    id: `ai${aiIndex}_${index}`,
                    owner: `ai${aiIndex}`
                }));
                cardIndex += 6;
            });
        }

        function generateNewPrompt() {
            const prompts = storyPrompts;
            gameState.currentPrompt = prompts[Math.floor(Math.random() * prompts.length)];
            document.getElementById('promptText').textContent = 
                `Choisissez une carte qui Ã©voque : "${gameState.currentPrompt}"`;
        }

        function renderCards() {
            const container = document.getElementById('cardsGrid');
            container.innerHTML = '';
            
            gameState.playerCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = `card ${gameState.selectedCard === index ? 'selected' : ''}`;
                cardElement.onclick = () => selectCard(index);
                
                cardElement.innerHTML = `
                    <div class="card-image">
                        ${card.emoji}
                    </div>
                    <div class="card-title">${card.title}</div>
                `;
                
                container.appendChild(cardElement);
                
                // Animation d'apparition
                setTimeout(() => {
                    cardElement.style.opacity = '1';
                    cardElement.style.transform = 'translateY(0)';
                }, index * 100);
            });
        }

        function renderAIPlayers() {
            const container = document.getElementById('aiPlayers');
            container.innerHTML = '';
            
            gameState.aiPlayers.forEach((ai, index) => {
                const aiElement = document.createElement('div');
                aiElement.className = 'ai-player';
                aiElement.innerHTML = `
                    <div>
                        <div class="ai-name">${ai.name}</div>
                        <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">${ai.personality}</div>
                    </div>
                    <div class="ai-score">${ai.score}</div>
                `;
                container.appendChild(aiElement);
            });
        }

        function selectCard(index) {
            if (!gameState.gameActive || gameState.selectedCard === index) return;
            
            gameState.selectedCard = index;
            renderCards();
            
            // Activer le bouton de validation
            document.getElementById('submitBtn').disabled = false;
            
            // Effet de particules
            createCardParticles();
            showNotification(`Carte sÃ©lectionnÃ©e: ${gameState.playerCards[index].title}`);
        }

        function submitCard() {
            if (gameState.selectedCard === null) return;
            
            // DÃ©sactiver la sÃ©lection
            document.getElementById('submitBtn').disabled = true;
            
            // IA fait ses choix
            gameState.aiPlayers.forEach(ai => {
                ai.selectedCard = Math.floor(Math.random() * ai.cards.length);
            });
            
            // Calculer les scores
            calculateRoundScore();
            
            // Activer le bouton suivant
            document.getElementById('nextRoundBtn').disabled = false;
            
            showNotification('Manche terminÃ©e ! Voir les rÃ©sultats...');
        }

        function calculateRoundScore() {
            // Logique simplifiÃ©e du scoring Dixit
            const basePoints = 2;
            const bonusPoints = Math.floor(Math.random() * 3) + 1;
            
            gameState.playerScore += basePoints + bonusPoints;
            
            // IA scoring
            gameState.aiPlayers.forEach(ai => {
                ai.score += Math.floor(Math.random() * 4) + 1;
            });
            
            // Sauvegarder le score
            saveScore();
        }

        function nextRound() {
            gameState.currentRound++;
            gameState.selectedCard = null;
            
            // VÃ©rifier victoire
            if (gameState.playerScore >= gameState.maxScore) {
                showNotification('ğŸ‰ FÃ©licitations ! Vous avez gagnÃ© !');
                gameState.gameActive = false;
                return;
            }
            
            // Nouvelle manche
            generateNewPrompt();
            document.getElementById('nextRoundBtn').disabled = true;
            document.getElementById('submitBtn').disabled = true;
            
            renderCards();
            updateDisplay();
            
            showNotification(`Manche ${gameState.currentRound} - Nouveau dÃ©fi !`);
        }

        function updateDisplay() {
            document.getElementById('playerScore').textContent = gameState.playerScore;
            document.getElementById('currentRound').textContent = gameState.currentRound;
            document.getElementById('currentLevel').textContent = gameState.currentLevel;
            
            // Barre de progression
            const progress = (gameState.playerScore / gameState.maxScore) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            renderCards();
            renderAIPlayers();
        }

        function createCardParticles() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f093fb'];
            
            for (let i = 0; i < 10; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'fixed';
                particle.style.width = '6px';
                particle.style.height = '6px';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.borderRadius = '50%';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '1000';
                
                const rect = event.target.getBoundingClientRect();
                particle.style.left = (rect.left + rect.width / 2) + 'px';
                particle.style.top = (rect.top + rect.height / 2) + 'px';
                
                document.body.appendChild(particle);
                
                // Animation
                const angle = (Math.PI * 2 * i) / 10;
                const velocity = 100 + Math.random() * 50;
                const vx = Math.cos(angle) * velocity;
                const vy = Math.sin(angle) * velocity;
                
                particle.animate([
                    { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                    { transform: `translate(${vx}px, ${vy}px) scale(0)`, opacity: 0 }
                ], {
                    duration: 1000,
                    easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
                }).onfinish = () => particle.remove();
            }
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Fonctions de navigation
        function showMenu() {
            document.getElementById('menuScreen').classList.remove('hidden');
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('rulesScreen').classList.add('hidden');
        }

        function showGame() {
            document.getElementById('menuScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            document.getElementById('rulesScreen').classList.add('hidden');
            
            if (!gameState.gameActive) {
                initGame();
            }
        }

        function showRules() {
            document.getElementById('menuScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('rulesScreen').classList.remove('hidden');
        }

        function showLevels() {
            const selector = document.getElementById('levelSelector');
            selector.classList.toggle('hidden');
        }

        function selectLevel(level) {
            gameState.currentLevel = level;
            document.querySelectorAll('.level-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            showNotification(`Niveau ${level} sÃ©lectionnÃ©`);
            document.getElementById('levelSelector').classList.add('hidden');
        }

        function newGame() {
            gameState.gameActive = false;
            gameState.currentRound = 1;
            gameState.playerScore = 0;
            gameState.selectedCard = null;
            
            initGame();
            showGame();
        }

        function pauseGame() {
            gameState.gameActive = !gameState.gameActive;
            const pauseBtn = document.getElementById('pauseBtn');
            pauseBtn.innerHTML = gameState.gameActive ? 'â¸ï¸ PAUSE' : 'â–¶ï¸ REPRENDRE';
            
            showNotification(gameState.gameActive ? 'Jeu repris' : 'Jeu en pause');
        }

        // SystÃ¨me de langues
        function changeLanguage(lang) {
            gameState.currentLanguage = lang;
            
            const t = translations[lang];
            
            // Mettre Ã  jour tous les textes
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    if (element.tagName === 'INPUT' || element.tagName === 'SELECT') {
                        element.value = t[key];
                    } else {
                        element.textContent = t[key];
                    }
                }
            });
            
            showNotification(`Langue changÃ©e: ${lang.toUpperCase()}`);
        }

        // Sauvegarde des scores
        function saveScore() {
            const scores = JSON.parse(localStorage.getItem('dixitScores') || '[]');
            scores.push({
                score: gameState.playerScore,
                level: gameState.currentLevel,
                round: gameState.currentRound,
                date: new Date().toISOString(),
                language: gameState.currentLanguage
            });
            
            // Garder les 20 meilleurs scores
            scores.sort((a, b) => b.score - a.score);
            scores.splice(20);
            
            localStorage.setItem('dixitScores', JSON.stringify(scores));
        }

        // ContrÃ´les clavier
        document.addEventListener('keydown', (e) => {
            if (!gameState.gameActive) return;
            
            switch(e.key) {
                case ' ':
                    e.preventDefault();
                    if (!document.getElementById('submitBtn').disabled) {
                        submitCard();
                    }
                    break;
                case 'Enter':
                    e.preventDefault();
                    if (!document.getElementById('nextRoundBtn').disabled) {
                        nextRound();
                    }
                    break;
                case 'Escape':
                    showMenu();
                    break;
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                    const cardIndex = parseInt(e.key) - 1;
                    if (cardIndex < gameState.playerCards.length) {
                        selectCard(cardIndex);
                    }
                    break;
            }
        });

        // Initialisation au chargement
        document.addEventListener('DOMContentLoaded', () => {
            showMenu();
            createBackgroundParticles();
        });

        // Animation continue des Ã©lÃ©ments flottants
        setInterval(() => {
            const floatingCards = document.querySelectorAll('.floating-card');
            floatingCards.forEach(card => {
                if (Math.random() > 0.7) {
                    card.style.background = `linear-gradient(135deg, 
                        rgba(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255}, 0.1), 
                        rgba(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255}, 0.3))`;
                }
            });
        }, 3000);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'988d5385f350adb5',t:'MTc1OTUwMzgwNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
