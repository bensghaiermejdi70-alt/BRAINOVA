<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Brainova Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; margin: 0; background: #f0f0f0; }
    #gamesGrid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; padding: 20px; }
    .game-card { background: white; border-radius: 8px; padding: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .game-status { margin-top: 8px; padding: 4px; border-radius: 4px; font-size: 12px; }
    #checkAllBtn { margin: 20px; padding: 10px 20px; font-size: 16px; }
    #checkStatus { font-weight: bold; margin-left: 20px; }
  </style>
</head>
<body>

  <h1 style="text-align:center;">üß† Brainova Platform</h1>
  <div style="text-align:center;">
    <button id="checkAllBtn">Tester tous les jeux</button>
    <span id="checkStatus"></span>
  </div>

  <div id="gamesGrid"></div>

  <script>
    const total = 36;
    const gameMap = {};
    for(let i=0; i<total; i++){
      gameMap[i] = { file: `jeux${i}.html`, tags: ['logique','memoire','education'] };
    }

    const grid = document.getElementById('gamesGrid');
    for(let i=0; i<total; i++){
      const card = document.createElement('div');
      card.className = 'game-card';
      card.dataset.gameId = i;
      card.innerHTML = `
        <h3>Jeu ${i+1}</h3>
        <button onclick="launchGame(${i})">Lancer</button>
        <div class="game-status">‚è≥</div>
      `;
      grid.appendChild(card);
    }

    function launchGame(id){
      const meta = gameMap[id];
      const url = meta.file;
      window.open(url, '_blank');
    }

    document.getElementById('checkAllBtn').addEventListener('click', async ()=>{
      const checkBtn = document.getElementById('checkAllBtn');
      const checkStatus = document.getElementById('checkStatus');
      checkBtn.disabled = true; checkStatus.textContent = 'Test en cours...';
      let ok = 0, fail = 0;
      for(let i=0;i<total;i++){
        const meta = gameMap[i] || {};
        const candidates = [meta.file, `./jeux${i}.html`, `./jeux${i}.html.html`];
        const card = grid.querySelector(`.game-card[data-game-id="${i}"]`);
        const statusEl = card.querySelector('.game-status');
        let found = false;
        for(const url of candidates){
          if(!url) continue;
          try{
            const safe = new URL(url, window.location.href).href;
            const r = await fetch(safe, {method:'HEAD'});
            if(r.ok){
              statusEl.textContent = '‚úÖ OK';
              statusEl.style.background = 'linear-gradient(45deg,#00ff88,#ffd700)';
              statusEl.style.color = '#000';
              ok++; found = true; break;
            }
          }catch(e){}
        }
        if(!found){
          statusEl.textContent = '‚ùå N/D';
          statusEl.style.background = 'rgba(255,0,0,0.12)';
          fail++;
        }
      }
      checkStatus.textContent = `R√©sultat : ${ok} OK / ${fail} FAIL`;
      checkBtn.disabled = false;
    });
  </script>

</body>
</html>
