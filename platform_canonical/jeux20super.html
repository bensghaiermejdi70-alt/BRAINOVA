<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Quantum AI 2077</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Orbitron', monospace;
            background: var(--bg-gradient, linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e, #0f3460));
            color: var(--primary-color, #00ffff);
            height: 100%;
            overflow-x: hidden;
            animation: backgroundPulse 8s ease-in-out infinite;
            --primary-color: #00ffff;
            --secondary-color: #ff00ff;
            --accent-color: #ffff00;
            --bg-gradient: linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e, #0f3460);
        }

        @keyframes backgroundPulse {
            0%, 100% { background: linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e, #0f3460); }
            50% { background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460, #533483); }
        }

        .game-header {
            text-align: center;
            padding: 20px;
            position: relative;
        }

        .game-title {
            font-size: 42px;
            margin: 0;
            text-shadow: 0 0 30px #00ffff;
            background: linear-gradient(45deg, #00ffff, #ff00ff, #ffff00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { text-shadow: 0 0 30px #00ffff; }
            50% { text-shadow: 0 0 50px #ff00ff, 0 0 70px #00ffff; }
        }

        .subtitle {
            font-size: 16px;
            color: #888;
            margin-top: 10px;
            letter-spacing: 3px;
        }

        .controls-header {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
        }

        .top-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .language-selector select {
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.8);
            color: #00ffff;
            border: 2px solid #00ffff;
            border-radius: 10px;
            font-size: 14px;
            min-width: 120px;
        }

        .close-btn {
            width: 45px;
            height: 45px;
            background: linear-gradient(45deg, #ff0000, #ff4444);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(255, 0, 0, 0.6);
        }

        .rules-btn {
            padding: 10px 20px;
            background: linear-gradient(45deg, #00ffff, #0080ff);
            border: 2px solid #00ffff;
            border-radius: 10px;
            color: #000;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .rules-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 255, 0.4);
        }

        .game-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 30px;
            padding: 20px;
            min-height: calc(100vh - 120px);
        }

        .side-panel {
            width: 250px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .panel {
            background: rgba(0, 255, 255, 0.1);
            border: 2px solid #00ffff;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
        }

        .panel h3 {
            margin: 0 0 15px 0;
            font-size: 16px;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
        }

        .btn {
            width: 100%;
            padding: 12px;
            margin: 5px 0;
            background: linear-gradient(45deg, #00ffff, #0080ff);
            border: none;
            border-radius: 10px;
            color: #000;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 255, 255, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .difficulty-btn {
            background: linear-gradient(45deg, #ff6400, #ff8c00);
            margin: 3px;
            padding: 8px;
            font-size: 12px;
        }

        .difficulty-btn.active {
            background: linear-gradient(45deg, #00ff00, #00cc00);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
        }

        .sudoku-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .sudoku-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 1px;
            background: #000000;
            padding: 12px;
            border-radius: 20px;
            box-shadow: 0 0 40px var(--primary-color-alpha, rgba(0, 255, 255, 0.5)), 
                        0 0 60px var(--secondary-color, #ff00ff);
            transition: all 0.5s ease;
            border: 4px solid transparent;
            background-clip: padding-box;
            position: relative;
        }

        .sudoku-grid::before {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            background: linear-gradient(45deg, var(--primary-color, #00ffff), var(--secondary-color, #ff00ff), var(--accent-color, #ffff00));
            border-radius: 24px;
            z-index: -1;
            animation: borderGlow 3s ease-in-out infinite;
        }

        @keyframes borderGlow {
            0%, 100% { 
                background: linear-gradient(45deg, var(--primary-color, #00ffff), var(--secondary-color, #ff00ff), var(--accent-color, #ffff00));
                filter: brightness(1);
            }
            50% { 
                background: linear-gradient(45deg, var(--accent-color, #ffff00), var(--primary-color, #00ffff), var(--secondary-color, #ff00ff));
                filter: brightness(1.5);
            }
        }

        .sudoku-cell {
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid var(--primary-color, #00ffff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color, #00ffff);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.4);
        }

        .sudoku-cell:empty {
            background: rgba(20, 20, 40, 0.6);
            border: 2px solid rgba(0, 255, 255, 0.6);
            box-shadow: inset 0 0 15px rgba(0, 255, 255, 0.2);
        }

        .sudoku-cell:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .sudoku-cell.selected {
            background: rgba(255, 255, 0, 0.3);
            box-shadow: 0 0 15px rgba(255, 255, 0, 0.6);
        }

        .sudoku-cell.given {
            background: rgba(0, 255, 255, 0.3);
            color: #ffffff;
            font-weight: bold;
            cursor: default;
            border: 3px solid var(--primary-color, #00ffff);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.8), inset 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .sudoku-cell.error {
            background: rgba(255, 0, 0, 0.3);
            color: #ff0000;
            animation: errorPulse 0.5s ease-in-out;
        }

        .sudoku-cell.hint {
            background: rgba(255, 0, 255, 0.3);
            color: #ff00ff;
            animation: hintGlow 1s ease-in-out;
        }

        .sudoku-cell.solved {
            background: rgba(0, 255, 0, 0.4);
            color: #00ff00;
            animation: solvedPulse 0.8s ease-in-out;
        }

        @keyframes errorPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes hintGlow {
            0%, 100% { box-shadow: 0 0 15px rgba(255, 0, 255, 0.6); }
            50% { box-shadow: 0 0 25px rgba(255, 0, 255, 1); }
        }

        @keyframes solvedPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        /* Bordures Ã©paisses noires pour les rÃ©gions 3x3 */
        .sudoku-cell:nth-child(3n):not(:nth-child(9n)) {
            border-right: 4px solid #000000;
        }

        .sudoku-cell:nth-child(n+19):nth-child(-n+27),
        .sudoku-cell:nth-child(n+46):nth-child(-n+54) {
            border-bottom: 4px solid #000000;
        }

        /* Bordures spÃ©ciales pour les coins des blocs 3x3 */
        .sudoku-cell:nth-child(3n):nth-child(n+19):nth-child(-n+27):not(:nth-child(9n)),
        .sudoku-cell:nth-child(3n):nth-child(n+46):nth-child(-n+54):not(:nth-child(9n)) {
            border-right: 4px solid #000000;
            border-bottom: 4px solid #000000;
        }

        .number-pad-panel {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .number-btn {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #ff00ff, #ff4499);
            border: 2px solid #ff00ff;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .number-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.6);
        }

        .stats-display {
            background: rgba(255, 0, 255, 0.1);
            border: 2px solid #ff00ff;
            border-radius: 15px;
            padding: 15px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 14px;
        }

        .stat-value {
            font-weight: bold;
            color: #ff00ff;
            text-shadow: 0 0 10px #ff00ff;
        }

        .ai-panel {
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            border-radius: 15px;
            padding: 15px;
        }

        .ai-suggestion {
            font-size: 12px;
            margin-top: 10px;
            color: #00ff00;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.4;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0000, #ffff00, #00ff00);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .game-status {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            min-height: 30px;
            text-shadow: 0 0 15px currentColor;
        }

        .game-status.win {
            color: #00ff00;
            animation: statusPulse 2s ease-in-out infinite;
        }

        .game-status.error {
            color: #ff0000;
            animation: statusPulse 1s ease-in-out 3;
        }

        @keyframes statusPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes themeTransition {
            0% { filter: brightness(1) saturate(1); }
            50% { filter: brightness(1.3) saturate(1.5); }
            100% { filter: brightness(1) saturate(1); }
        }

        .neural-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.1;
            z-index: -1;
        }

        .neural-line {
            position: absolute;
            background: linear-gradient(90deg, transparent, #00ffff, transparent);
            height: 1px;
            animation: neuralFlow 6s linear infinite;
        }

        @keyframes neuralFlow {
            0% { transform: translateX(-100%); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100vw); opacity: 0; }
        }

        @media (max-width: 1200px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .side-panel {
                width: 100%;
                max-width: 500px;
            }
            
            .sudoku-cell {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
        }

        @media (max-width: 768px) {
            .sudoku-cell {
                width: 35px;
                height: 35px;
                font-size: 18px;
            }
            
            .number-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
        }

        /* Styles pour la modal des rÃ¨gles */
        .rules-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .rules-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .rules-content {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(26, 26, 46, 0.95));
            border: 3px solid var(--primary-color, #00ffff);
            border-radius: 20px;
            max-width: 800px;
            max-height: 90vh;
            width: 90%;
            overflow: hidden;
            box-shadow: 0 0 50px var(--primary-color, #00ffff);
            animation: modalSlideIn 0.4s ease-out;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px) scale(0.9); }
            to { transform: translateY(0) scale(1); }
        }

        .rules-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: rgba(0, 255, 255, 0.1);
            border-bottom: 2px solid var(--primary-color, #00ffff);
        }

        .rules-header h2 {
            margin: 0;
            font-size: 24px;
            color: var(--primary-color, #00ffff);
            text-shadow: 0 0 15px var(--primary-color, #00ffff);
        }

        .close-rules-btn {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #ff0000, #ff4444);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-rules-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.6);
        }

        .rules-body {
            padding: 30px;
            max-height: 70vh;
            overflow-y: auto;
            color: #ffffff;
            line-height: 1.6;
            font-size: 16px;
        }

        .rules-section {
            margin-bottom: 25px;
        }

        .rules-section h3 {
            color: var(--secondary-color, #ff00ff);
            font-size: 20px;
            margin-bottom: 15px;
            text-shadow: 0 0 10px var(--secondary-color, #ff00ff);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .rules-section ul {
            list-style: none;
            padding-left: 0;
        }

        .rules-section li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .rules-section li:before {
            content: "â–¶";
            position: absolute;
            left: 0;
            color: var(--accent-color, #ffff00);
            font-weight: bold;
        }

        .difficulty-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .difficulty-item {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid var(--primary-color, #00ffff);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .difficulty-name {
            font-weight: bold;
            color: var(--primary-color, #00ffff);
            font-size: 18px;
            margin-bottom: 5px;
        }

        .difficulty-desc {
            color: #cccccc;
            font-size: 14px;
        }

        .technique-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .technique-item {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 10px;
            padding: 15px;
        }

        .technique-name {
            font-weight: bold;
            color: #00ff00;
            margin-bottom: 5px;
        }

        .technique-desc {
            color: #cccccc;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .rules-content {
                width: 95%;
                max-height: 95vh;
            }
            
            .rules-header {
                padding: 15px 20px;
            }
            
            .rules-header h2 {
                font-size: 18px;
            }
            
            .rules-body {
                padding: 20px;
                font-size: 14px;
            }
            
            .difficulty-grid,
            .technique-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="neural-grid" id="neuralGrid"></div>

    <div class="game-header">
        <h1 class="game-title" id="gameTitle">SUDOKU QUANTUM AI 2077</h1>
        <p class="subtitle" id="subtitle">INTERFACE NEURALE DE RÃ‰SOLUTION ACTIVÃ‰E</p>
        
        <div class="controls-header">
            <div class="top-controls">
                <div class="language-selector">
                    <select id="languageSelect">
                        <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                        <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                        <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                        <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                        <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                        <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    </select>
                </div>
                <button class="close-btn" onclick="closePlatform()" id="closeBtn">âœ•</button>
            </div>
            <button class="rules-btn" onclick="showRules()" id="rulesBtn">RÃ¨gles du Jeu</button>
        </div>
    </div>

    <!-- Modal des rÃ¨gles -->
    <div class="rules-modal" id="rulesModal">
        <div class="rules-content">
            <div class="rules-header">
                <h2 id="rulesModalTitle">ğŸ§© RÃˆGLES DU SUDOKU QUANTUM AI 2077 ğŸ§©</h2>
                <button class="close-rules-btn" onclick="closeRules()">âœ•</button>
            </div>
            <div class="rules-body" id="rulesBody">
                <!-- Le contenu sera rempli par JavaScript -->
            </div>
        </div>
    </div>

    <div class="game-container">
        <div class="side-panel">
            <div class="panel">
                <h3 id="controlsTitle">CONTRÃ”LES QUANTIQUES</h3>
                <button class="btn" id="newGameBtn" onclick="newGame()">Nouvelle Partie</button>
                <button class="btn" id="solveBtn" onclick="solveWithAI()">RÃ©solution IA</button>
                <button class="btn" id="hintBtn" onclick="getHint()">Indice IA</button>
                <button class="btn" id="checkBtn" onclick="checkSolution()">VÃ©rifier</button>
                <button class="btn" id="clearBtn" onclick="clearCell()">Effacer</button>
            </div>

            <div class="panel">
                <h3 id="difficultyTitle">NIVEAU DE DIFFICULTÃ‰</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                    <button class="difficulty-btn" onclick="setDifficulty('easy')" id="easyBtn">Facile</button>
                    <button class="difficulty-btn active" onclick="setDifficulty('medium')" id="mediumBtn">Moyen</button>
                    <button class="difficulty-btn" onclick="setDifficulty('hard')" id="hardBtn">Difficile</button>
                    <button class="difficulty-btn" onclick="setDifficulty('expert')" id="expertBtn">Expert</button>
                </div>
            </div>

            <div class="stats-display">
                <h3 id="statsTitle">STATISTIQUES</h3>
                <div class="stat-item">
                    <span id="timeLabel">Temps:</span>
                    <span class="stat-value" id="timeValue">00:00</span>
                </div>
                <div class="stat-item">
                    <span id="movesLabel">Coups:</span>
                    <span class="stat-value" id="movesValue">0</span>
                </div>
                <div class="stat-item">
                    <span id="hintsLabel">Indices:</span>
                    <span class="stat-value" id="hintsValue">0</span>
                </div>
                <div class="stat-item">
                    <span id="errorsLabel">Erreurs:</span>
                    <span class="stat-value" id="errorsValue">0</span>
                </div>
                <div class="stat-item">
                    <span id="completionLabel">Progression:</span>
                    <span class="stat-value" id="completionValue">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="sudoku-container">
            <div class="game-status" id="gameStatus">SÃ©lectionnez une cellule pour commencer</div>
            
            <div class="sudoku-grid" id="sudokuGrid"></div>
            

        </div>

        <div class="side-panel">
            <div class="ai-panel">
                <h3 id="aiTitle">ASSISTANT IA QUANTIQUE</h3>
                <button class="btn" id="aiAnalyzeBtn" onclick="analyzeBoard()" style="background: linear-gradient(45deg, #00ff00, #00cc00);">Analyser</button>
                <div class="ai-suggestion" id="aiSuggestion">IA prÃªte Ã  analyser le plateau</div>
            </div>

            <div class="panel">
                <h3 id="numbersTitle">SAISIE NUMÃ‰RIQUE</h3>
                <div class="number-pad-panel">
                    <button class="number-btn" onclick="inputNumber(1)">1</button>
                    <button class="number-btn" onclick="inputNumber(2)">2</button>
                    <button class="number-btn" onclick="inputNumber(3)">3</button>
                    <button class="number-btn" onclick="inputNumber(4)">4</button>
                    <button class="number-btn" onclick="inputNumber(5)">5</button>
                    <button class="number-btn" onclick="inputNumber(6)">6</button>
                    <button class="number-btn" onclick="inputNumber(7)">7</button>
                    <button class="number-btn" onclick="inputNumber(8)">8</button>
                    <button class="number-btn" onclick="inputNumber(9)">9</button>
                    <button class="number-btn" onclick="clearCell()" style="background: linear-gradient(45deg, #666, #999);">âœ•</button>
                </div>
            </div>

            <div class="panel">
                <h3 id="strategiesTitle">STRATÃ‰GIES IA</h3>
                <button class="btn" id="nakedSinglesBtn" onclick="findNakedSingles()" style="font-size: 11px;">Singles Nus</button>
                <button class="btn" id="hiddenSinglesBtn" onclick="findHiddenSingles()" style="font-size: 11px;">Singles CachÃ©s</button>
                <button class="btn" id="nakedPairsBtn" onclick="findNakedPairs()" style="font-size: 11px;">Paires Nues</button>
                <button class="btn" id="pointingPairsBtn" onclick="findPointingPairs()" style="font-size: 11px;">Paires PointÃ©es</button>
            </div>

            <div class="stats-display">
                <h3 id="aiStatsTitle">ANALYSE IA</h3>
                <div class="stat-item">
                    <span id="emptyCellsLabel">Cellules vides:</span>
                    <span class="stat-value" id="emptyCellsValue">81</span>
                </div>
                <div class="stat-item">
                    <span id="possibilitiesLabel">PossibilitÃ©s:</span>
                    <span class="stat-value" id="possibilitiesValue">729</span>
                </div>
                <div class="stat-item">
                    <span id="difficultyRatingLabel">DifficultÃ© IA:</span>
                    <span class="stat-value" id="difficultyRatingValue">0</span>
                </div>
                <div class="stat-item">
                    <span id="solutionTimeLabel">Temps IA:</span>
                    <span class="stat-value" id="solutionTimeValue">0ms</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Traductions
        const translations = {
            fr: {
                gameTitle: "SUDOKU QUANTUM AI 2077",
                subtitle: "INTERFACE NEURALE DE RÃ‰SOLUTION ACTIVÃ‰E",
                rulesBtn: "RÃ¨gles du Jeu",
                controlsTitle: "CONTRÃ”LES QUANTIQUES",
                newGameBtn: "Nouvelle Partie",
                solveBtn: "RÃ©solution IA",
                hintBtn: "Indice IA",
                checkBtn: "VÃ©rifier",
                clearBtn: "Effacer",
                difficultyTitle: "NIVEAU DE DIFFICULTÃ‰",
                easyBtn: "Facile",
                mediumBtn: "Moyen",
                hardBtn: "Difficile",
                expertBtn: "Expert",
                statsTitle: "STATISTIQUES",
                timeLabel: "Temps:",
                movesLabel: "Coups:",
                hintsLabel: "Indices:",
                errorsLabel: "Erreurs:",
                completionLabel: "Progression:",
                aiTitle: "ASSISTANT IA QUANTIQUE",
                aiAnalyzeBtn: "Analyser",
                numbersTitle: "SAISIE NUMÃ‰RIQUE",
                strategiesTitle: "STRATÃ‰GIES IA",
                aiStatsTitle: "ANALYSE IA",
                emptyCellsLabel: "Cellules vides:",
                possibilitiesLabel: "PossibilitÃ©s:",
                difficultyRatingLabel: "DifficultÃ© IA:",
                solutionTimeLabel: "Temps IA:",
                selectCellText: "SÃ©lectionnez une cellule pour commencer",
                congratulationsText: "ğŸ‰ FÃ‰LICITATIONS! Sudoku rÃ©solu! ğŸ‰",
                errorText: "âŒ Erreur dÃ©tectÃ©e dans la grille",
                aiReadyText: "IA prÃªte Ã  analyser le plateau",
                hintText: "ğŸ’¡ Indice: Essayez le chiffre {number} en position ({row}, {col})",
                noHintText: "ğŸ¤” Aucun indice Ã©vident trouvÃ©",
                solvingText: "ğŸ”„ RÃ©solution en cours...",
                solvedText: "âœ… Grille rÃ©solue par l'IA!",
                impossibleText: "âŒ Grille impossible Ã  rÃ©soudre",
                nakedSinglesBtn: "Singles Nus",
                hiddenSinglesBtn: "Singles CachÃ©s",
                nakedPairsBtn: "Paires Nues",
                pointingPairsBtn: "Paires PointÃ©es",
                closeTitle: "Retour Ã  l'accueil",
                // RÃ¨gles du jeu
                rulesModalTitle: "ğŸ§© RÃˆGLES DU SUDOKU QUANTUM AI 2077 ğŸ§©",
                objectiveTitle: "ğŸ¯ OBJECTIF",
                objectiveText: "Remplir une grille 9Ã—9 avec les chiffres 1 Ã  9",
                objectiveRule: "Chaque ligne, colonne et rÃ©gion 3Ã—3 doit contenir tous les chiffres de 1 Ã  9",
                howToPlayTitle: "ğŸ® COMMENT JOUER",
                howToPlay1: "Cliquez sur une cellule vide pour la sÃ©lectionner",
                howToPlay2: "Utilisez les boutons numÃ©riques ou le clavier pour saisir un chiffre",
                howToPlay3: "Utilisez le bouton \"âœ•\" ou Suppr/Retour pour effacer",
                aiFeaturesTitle: "ğŸ¤– FONCTIONNALITÃ‰S IA",
                aiFeature1: "INDICE IA : Obtenir un conseil intelligent",
                aiFeature2: "RÃ‰SOLUTION IA : Laisser l'IA rÃ©soudre automatiquement",
                aiFeature3: "ANALYSER : Analyser les techniques applicables",
                aiFeature4: "STRATÃ‰GIES : Appliquer des techniques avancÃ©es",
                difficultyLevelsTitle: "ğŸ† NIVEAUX DE DIFFICULTÃ‰",
                easyLevel: "FACILE",
                easyDesc: "40 cellules Ã  remplir",
                mediumLevel: "MOYEN", 
                mediumDesc: "50 cellules Ã  remplir",
                hardLevel: "DIFFICILE",
                hardDesc: "60 cellules Ã  remplir",
                expertLevel: "EXPERT",
                expertDesc: "70 cellules Ã  remplir",
                statisticsTitle: "ğŸ“Š STATISTIQUES",
                stat1: "Temps de rÃ©solution",
                stat2: "Nombre de coups",
                stat3: "Indices utilisÃ©s",
                stat4: "Erreurs commises",
                stat5: "Progression en temps rÃ©el",
                techniquesTitle: "ğŸ”¬ TECHNIQUES IA AVANCÃ‰ES",
                technique1Name: "Singles Nus",
                technique1Desc: "Cellules avec une seule possibilitÃ©",
                technique2Name: "Singles CachÃ©s",
                technique2Desc: "Chiffres avec une seule position possible",
                technique3Name: "Paires Nues",
                technique3Desc: "Ã‰limination par paires",
                technique4Name: "Paires PointÃ©es",
                technique4Desc: "Techniques de rÃ©gion",
                goodLuckText: "Bonne rÃ©solution, maÃ®tre du Sudoku ! ğŸš€"
            },
            en: {
                gameTitle: "QUANTUM AI SUDOKU 2077",
                subtitle: "NEURAL SOLVING INTERFACE ACTIVATED",
                rulesBtn: "Game Rules",
                controlsTitle: "QUANTUM CONTROLS",
                newGameBtn: "New Game",
                solveBtn: "AI Solve",
                hintBtn: "AI Hint",
                checkBtn: "Check",
                clearBtn: "Clear",
                difficultyTitle: "DIFFICULTY LEVEL",
                easyBtn: "Easy",
                mediumBtn: "Medium",
                hardBtn: "Hard",
                expertBtn: "Expert",
                statsTitle: "STATISTICS",
                timeLabel: "Time:",
                movesLabel: "Moves:",
                hintsLabel: "Hints:",
                errorsLabel: "Errors:",
                completionLabel: "Progress:",
                aiTitle: "QUANTUM AI ASSISTANT",
                aiAnalyzeBtn: "Analyze",
                numbersTitle: "NUMBER INPUT",
                strategiesTitle: "AI STRATEGIES",
                aiStatsTitle: "AI ANALYSIS",
                emptyCellsLabel: "Empty cells:",
                possibilitiesLabel: "Possibilities:",
                difficultyRatingLabel: "AI Difficulty:",
                solutionTimeLabel: "AI Time:",
                selectCellText: "Select a cell to start",
                congratulationsText: "ğŸ‰ CONGRATULATIONS! Sudoku solved! ğŸ‰",
                errorText: "âŒ Error detected in grid",
                aiReadyText: "AI ready to analyze board",
                hintText: "ğŸ’¡ Hint: Try number {number} at position ({row}, {col})",
                noHintText: "ğŸ¤” No obvious hint found",
                solvingText: "ğŸ”„ Solving in progress...",
                solvedText: "âœ… Grid solved by AI!",
                impossibleText: "âŒ Impossible to solve grid",
                nakedSinglesBtn: "Naked Singles",
                hiddenSinglesBtn: "Hidden Singles",
                nakedPairsBtn: "Naked Pairs",
                pointingPairsBtn: "Pointing Pairs",
                closeTitle: "Back to Home",
                // Game Rules
                rulesModalTitle: "ğŸ§© QUANTUM AI SUDOKU 2077 RULES ğŸ§©",
                objectiveTitle: "ğŸ¯ OBJECTIVE",
                objectiveText: "Fill a 9Ã—9 grid with digits 1 to 9",
                objectiveRule: "Each row, column and 3Ã—3 region must contain all digits from 1 to 9",
                howToPlayTitle: "ğŸ® HOW TO PLAY",
                howToPlay1: "Click on an empty cell to select it",
                howToPlay2: "Use number buttons or keyboard to enter a digit",
                howToPlay3: "Use \"âœ•\" button or Delete/Backspace to clear",
                aiFeaturesTitle: "ğŸ¤– AI FEATURES",
                aiFeature1: "AI HINT: Get intelligent advice",
                aiFeature2: "AI SOLVE: Let AI solve automatically",
                aiFeature3: "ANALYZE: Analyze applicable techniques",
                aiFeature4: "STRATEGIES: Apply advanced techniques",
                difficultyLevelsTitle: "ğŸ† DIFFICULTY LEVELS",
                easyLevel: "EASY",
                easyDesc: "40 cells to fill",
                mediumLevel: "MEDIUM",
                mediumDesc: "50 cells to fill",
                hardLevel: "HARD",
                hardDesc: "60 cells to fill",
                expertLevel: "EXPERT",
                expertDesc: "70 cells to fill",
                statisticsTitle: "ğŸ“Š STATISTICS",
                stat1: "Solving time",
                stat2: "Number of moves",
                stat3: "Hints used",
                stat4: "Errors made",
                stat5: "Real-time progress",
                techniquesTitle: "ğŸ”¬ ADVANCED AI TECHNIQUES",
                technique1Name: "Naked Singles",
                technique1Desc: "Cells with only one possibility",
                technique2Name: "Hidden Singles",
                technique2Desc: "Numbers with only one possible position",
                technique3Name: "Naked Pairs",
                technique3Desc: "Elimination by pairs",
                technique4Name: "Pointing Pairs",
                technique4Desc: "Region techniques",
                goodLuckText: "Happy solving, Sudoku master! ğŸš€"
            },
            es: {
                gameTitle: "SUDOKU CUÃNTICO IA 2077",
                subtitle: "INTERFAZ NEURAL DE RESOLUCIÃ“N ACTIVADA",
                rulesBtn: "Reglas del Juego",
                controlsTitle: "CONTROLES CUÃNTICOS",
                newGameBtn: "Nueva Partida",
                solveBtn: "Resolver IA",
                hintBtn: "Pista IA",
                checkBtn: "Verificar",
                clearBtn: "Borrar",
                difficultyTitle: "NIVEL DE DIFICULTAD",
                easyBtn: "FÃ¡cil",
                mediumBtn: "Medio",
                hardBtn: "DifÃ­cil",
                expertBtn: "Experto",
                statsTitle: "ESTADÃSTICAS",
                timeLabel: "Tiempo:",
                movesLabel: "Movimientos:",
                hintsLabel: "Pistas:",
                errorsLabel: "Errores:",
                completionLabel: "Progreso:",
                aiTitle: "ASISTENTE IA CUÃNTICO",
                aiAnalyzeBtn: "Analizar",
                numbersTitle: "ENTRADA NUMÃ‰RICA",
                strategiesTitle: "ESTRATEGIAS IA",
                aiStatsTitle: "ANÃLISIS IA",
                emptyCellsLabel: "Celdas vacÃ­as:",
                possibilitiesLabel: "Posibilidades:",
                difficultyRatingLabel: "Dificultad IA:",
                solutionTimeLabel: "Tiempo IA:",
                selectCellText: "Selecciona una celda para empezar",
                congratulationsText: "ğŸ‰ Â¡FELICIDADES! Â¡Sudoku resuelto! ğŸ‰",
                errorText: "âŒ Error detectado en la cuadrÃ­cula",
                aiReadyText: "IA lista para analizar el tablero",
                hintText: "ğŸ’¡ Pista: Prueba el nÃºmero {number} en posiciÃ³n ({row}, {col})",
                noHintText: "ğŸ¤” No se encontrÃ³ pista obvia",
                solvingText: "ğŸ”„ Resolviendo en progreso...",
                solvedText: "âœ… Â¡CuadrÃ­cula resuelta por IA!",
                impossibleText: "âŒ Imposible resolver la cuadrÃ­cula",
                nakedSinglesBtn: "Singles Desnudos",
                hiddenSinglesBtn: "Singles Ocultos",
                nakedPairsBtn: "Pares Desnudos",
                pointingPairsBtn: "Pares Apuntando",
                closeTitle: "Volver al Inicio",
                // Reglas del juego
                rulesModalTitle: "ğŸ§© REGLAS DEL SUDOKU CUÃNTICO IA 2077 ğŸ§©",
                objectiveTitle: "ğŸ¯ OBJETIVO",
                objectiveText: "Llenar una cuadrÃ­cula 9Ã—9 con los dÃ­gitos del 1 al 9",
                objectiveRule: "Cada fila, columna y regiÃ³n 3Ã—3 debe contener todos los dÃ­gitos del 1 al 9",
                howToPlayTitle: "ğŸ® CÃ“MO JUGAR",
                howToPlay1: "Haz clic en una celda vacÃ­a para seleccionarla",
                howToPlay2: "Usa los botones numÃ©ricos o el teclado para ingresar un dÃ­gito",
                howToPlay3: "Usa el botÃ³n \"âœ•\" o Supr/Retroceso para borrar",
                aiFeaturesTitle: "ğŸ¤– CARACTERÃSTICAS IA",
                aiFeature1: "PISTA IA: Obtener consejo inteligente",
                aiFeature2: "RESOLVER IA: Dejar que la IA resuelva automÃ¡ticamente",
                aiFeature3: "ANALIZAR: Analizar tÃ©cnicas aplicables",
                aiFeature4: "ESTRATEGIAS: Aplicar tÃ©cnicas avanzadas",
                difficultyLevelsTitle: "ğŸ† NIVELES DE DIFICULTAD",
                easyLevel: "FÃCIL",
                easyDesc: "40 celdas para llenar",
                mediumLevel: "MEDIO",
                mediumDesc: "50 celdas para llenar",
                hardLevel: "DIFÃCIL",
                hardDesc: "60 celdas para llenar",
                expertLevel: "EXPERTO",
                expertDesc: "70 celdas para llenar",
                statisticsTitle: "ğŸ“Š ESTADÃSTICAS",
                stat1: "Tiempo de resoluciÃ³n",
                stat2: "NÃºmero de movimientos",
                stat3: "Pistas utilizadas",
                stat4: "Errores cometidos",
                stat5: "Progreso en tiempo real",
                techniquesTitle: "ğŸ”¬ TÃ‰CNICAS IA AVANZADAS",
                technique1Name: "Singles Desnudos",
                technique1Desc: "Celdas con una sola posibilidad",
                technique2Name: "Singles Ocultos",
                technique2Desc: "NÃºmeros con una sola posiciÃ³n posible",
                technique3Name: "Pares Desnudos",
                technique3Desc: "EliminaciÃ³n por pares",
                technique4Name: "Pares Apuntando",
                technique4Desc: "TÃ©cnicas de regiÃ³n",
                goodLuckText: "Â¡Buena resoluciÃ³n, maestro del Sudoku! ğŸš€"
            },
            de: {
                gameTitle: "QUANTUM KI SUDOKU 2077",
                subtitle: "NEURALE LÃ–SUNGSSCHNITTSTELLE AKTIVIERT",
                rulesBtn: "Spielregeln",
                controlsTitle: "QUANTUM STEUERUNG",
                newGameBtn: "Neues Spiel",
                solveBtn: "KI LÃ¶sen",
                hintBtn: "KI Hinweis",
                checkBtn: "PrÃ¼fen",
                clearBtn: "LÃ¶schen",
                difficultyTitle: "SCHWIERIGKEITSGRAD",
                easyBtn: "Einfach",
                mediumBtn: "Mittel",
                hardBtn: "Schwer",
                expertBtn: "Experte",
                statsTitle: "STATISTIKEN",
                timeLabel: "Zeit:",
                movesLabel: "ZÃ¼ge:",
                hintsLabel: "Hinweise:",
                errorsLabel: "Fehler:",
                completionLabel: "Fortschritt:",
                aiTitle: "QUANTUM KI ASSISTENT",
                aiAnalyzeBtn: "Analysieren",
                numbersTitle: "ZAHLENEINGABE",
                strategiesTitle: "KI STRATEGIEN",
                aiStatsTitle: "KI ANALYSE",
                emptyCellsLabel: "Leere Zellen:",
                possibilitiesLabel: "MÃ¶glichkeiten:",
                difficultyRatingLabel: "KI Schwierigkeit:",
                solutionTimeLabel: "KI Zeit:",
                selectCellText: "WÃ¤hle eine Zelle zum Starten",
                congratulationsText: "ğŸ‰ GLÃœCKWUNSCH! Sudoku gelÃ¶st! ğŸ‰",
                errorText: "âŒ Fehler im Gitter erkannt",
                aiReadyText: "KI bereit zur Brett-Analyse",
                hintText: "ğŸ’¡ Hinweis: Versuche Nummer {number} an Position ({row}, {col})",
                noHintText: "ğŸ¤” Kein offensichtlicher Hinweis gefunden",
                solvingText: "ğŸ”„ LÃ¶sung in Bearbeitung...",
                solvedText: "âœ… Gitter von KI gelÃ¶st!",
                impossibleText: "âŒ UnmÃ¶glich das Gitter zu lÃ¶sen",
                nakedSinglesBtn: "Nackte Einzel",
                hiddenSinglesBtn: "Versteckte Einzel",
                nakedPairsBtn: "Nackte Paare",
                pointingPairsBtn: "Zeigende Paare",
                closeTitle: "ZurÃ¼ck zur Startseite",
                // Spielregeln
                rulesModalTitle: "ğŸ§© QUANTUM KI SUDOKU 2077 REGELN ğŸ§©",
                objectiveTitle: "ğŸ¯ ZIEL",
                objectiveText: "Ein 9Ã—9 Gitter mit den Ziffern 1 bis 9 fÃ¼llen",
                objectiveRule: "Jede Zeile, Spalte und 3Ã—3 Region muss alle Ziffern von 1 bis 9 enthalten",
                howToPlayTitle: "ğŸ® WIE SPIELEN",
                howToPlay1: "Klicke auf eine leere Zelle, um sie auszuwÃ¤hlen",
                howToPlay2: "Verwende Zahlen-Buttons oder Tastatur, um eine Ziffer einzugeben",
                howToPlay3: "Verwende \"âœ•\" Button oder Entf/RÃ¼cktaste zum LÃ¶schen",
                aiFeaturesTitle: "ğŸ¤– KI FUNKTIONEN",
                aiFeature1: "KI HINWEIS: Intelligente Beratung erhalten",
                aiFeature2: "KI LÃ–SEN: KI automatisch lÃ¶sen lassen",
                aiFeature3: "ANALYSIEREN: Anwendbare Techniken analysieren",
                aiFeature4: "STRATEGIEN: Erweiterte Techniken anwenden",
                difficultyLevelsTitle: "ğŸ† SCHWIERIGKEITSGRADE",
                easyLevel: "EINFACH",
                easyDesc: "40 Zellen zu fÃ¼llen",
                mediumLevel: "MITTEL",
                mediumDesc: "50 Zellen zu fÃ¼llen",
                hardLevel: "SCHWER",
                hardDesc: "60 Zellen zu fÃ¼llen",
                expertLevel: "EXPERTE",
                expertDesc: "70 Zellen zu fÃ¼llen",
                statisticsTitle: "ğŸ“Š STATISTIKEN",
                stat1: "LÃ¶sungszeit",
                stat2: "Anzahl der ZÃ¼ge",
                stat3: "Verwendete Hinweise",
                stat4: "Gemachte Fehler",
                stat5: "Echtzeit-Fortschritt",
                techniquesTitle: "ğŸ”¬ ERWEITERTE KI TECHNIKEN",
                technique1Name: "Nackte Einzel",
                technique1Desc: "Zellen mit nur einer MÃ¶glichkeit",
                technique2Name: "Versteckte Einzel",
                technique2Desc: "Zahlen mit nur einer mÃ¶glichen Position",
                technique3Name: "Nackte Paare",
                technique3Desc: "Eliminierung durch Paare",
                technique4Name: "Zeigende Paare",
                technique4Desc: "Regions-Techniken",
                goodLuckText: "Viel Erfolg beim LÃ¶sen, Sudoku-Meister! ğŸš€"
            },
            ar: {
                gameTitle: "Ø³ÙˆØ¯ÙˆÙƒÙˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ÙƒÙ…ÙŠ 2077",
                subtitle: "ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø­Ù„ Ø§Ù„Ø¹ØµØ¨ÙŠØ© Ù…ÙÙØ¹Ù„Ø©",
                rulesBtn: "Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø©",
                controlsTitle: "Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙƒÙ…ÙŠ",
                newGameBtn: "Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©",
                solveBtn: "Ø­Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                hintBtn: "ØªÙ„Ù…ÙŠØ­ Ø°ÙƒÙŠ",
                checkBtn: "ÙØ­Øµ",
                clearBtn: "Ù…Ø³Ø­",
                difficultyTitle: "Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©",
                easyBtn: "Ø³Ù‡Ù„",
                mediumBtn: "Ù…ØªÙˆØ³Ø·",
                hardBtn: "ØµØ¹Ø¨",
                expertBtn: "Ø®Ø¨ÙŠØ±",
                statsTitle: "Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",
                timeLabel: "Ø§Ù„ÙˆÙ‚Øª:",
                movesLabel: "Ø§Ù„Ø­Ø±ÙƒØ§Øª:",
                hintsLabel: "Ø§Ù„ØªÙ„Ù…ÙŠØ­Ø§Øª:",
                errorsLabel: "Ø§Ù„Ø£Ø®Ø·Ø§Ø¡:",
                completionLabel: "Ø§Ù„ØªÙ‚Ø¯Ù…:",
                aiTitle: "Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ÙƒÙ…ÙŠ",
                aiAnalyzeBtn: "ØªØ­Ù„ÙŠÙ„",
                numbersTitle: "Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…",
                strategiesTitle: "Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                aiStatsTitle: "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                emptyCellsLabel: "Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„ÙØ§Ø±ØºØ©:",
                possibilitiesLabel: "Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª:",
                difficultyRatingLabel: "ØµØ¹ÙˆØ¨Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:",
                solutionTimeLabel: "ÙˆÙ‚Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:",
                selectCellText: "Ø§Ø®ØªØ± Ø®Ù„ÙŠØ© Ù„Ù„Ø¨Ø¯Ø¡",
                congratulationsText: "ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! ØªÙ… Ø­Ù„ Ø§Ù„Ø³ÙˆØ¯ÙˆÙƒÙˆ! ğŸ‰",
                errorText: "âŒ ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©",
                aiReadyText: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¬Ø§Ù‡Ø² Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù„ÙˆØ­Ø©",
                hintText: "ğŸ’¡ ØªÙ„Ù…ÙŠØ­: Ø¬Ø±Ø¨ Ø§Ù„Ø±Ù‚Ù… {number} ÙÙŠ Ø§Ù„Ù…ÙˆØ¶Ø¹ ({row}, {col})",
                noHintText: "ğŸ¤” Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØªÙ„Ù…ÙŠØ­ ÙˆØ§Ø¶Ø­",
                solvingText: "ğŸ”„ Ø§Ù„Ø­Ù„ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ‚Ø¯Ù…...",
                solvedText: "âœ… ØªÙ… Ø­Ù„ Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ!",
                impossibleText: "âŒ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ­ÙŠÙ„ Ø­Ù„ Ø§Ù„Ø´Ø¨ÙƒØ©",
                nakedSinglesBtn: "Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ø±ÙŠØ©",
                hiddenSinglesBtn: "Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª Ø§Ù„Ù…Ø®ÙÙŠØ©",
                nakedPairsBtn: "Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¹Ø§Ø±ÙŠØ©",
                pointingPairsBtn: "Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ù…Ø´ÙŠØ±Ø©",
                closeTitle: "Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
                // Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø©
                rulesModalTitle: "ğŸ§© Ù‚ÙˆØ§Ø¹Ø¯ Ø³ÙˆØ¯ÙˆÙƒÙˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ÙƒÙ…ÙŠ 2077 ğŸ§©",
                objectiveTitle: "ğŸ¯ Ø§Ù„Ù‡Ø¯Ù",
                objectiveText: "Ù…Ù„Ø¡ Ø´Ø¨ÙƒØ© 9Ã—9 Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù…Ù† 1 Ø¥Ù„Ù‰ 9",
                objectiveRule: "ÙƒÙ„ ØµÙ ÙˆØ¹Ù…ÙˆØ¯ ÙˆÙ…Ù†Ø·Ù‚Ø© 3Ã—3 ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù…Ù† 1 Ø¥Ù„Ù‰ 9",
                howToPlayTitle: "ğŸ® ÙƒÙŠÙÙŠØ© Ø§Ù„Ù„Ø¹Ø¨",
                howToPlay1: "Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø®Ù„ÙŠØ© ÙØ§Ø±ØºØ© Ù„ØªØ­Ø¯ÙŠØ¯Ù‡Ø§",
                howToPlay2: "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø£Ùˆ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù…",
                howToPlay3: "Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± \"âœ•\" Ø£Ùˆ Delete/Backspace Ù„Ù„Ù…Ø³Ø­",
                aiFeaturesTitle: "ğŸ¤– Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                aiFeature1: "ØªÙ„Ù…ÙŠØ­ Ø°ÙƒÙŠ: Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†ØµÙŠØ­Ø© Ø°ÙƒÙŠØ©",
                aiFeature2: "Ø­Ù„ Ø°ÙƒÙŠ: Ø¯Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ­Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹",
                aiFeature3: "ØªØ­Ù„ÙŠÙ„: ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚",
                aiFeature4: "Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª: ØªØ·Ø¨ÙŠÙ‚ ØªÙ‚Ù†ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©",
                difficultyLevelsTitle: "ğŸ† Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„ØµØ¹ÙˆØ¨Ø©",
                easyLevel: "Ø³Ù‡Ù„",
                easyDesc: "40 Ø®Ù„ÙŠØ© Ù„Ù„Ù…Ù„Ø¡",
                mediumLevel: "Ù…ØªÙˆØ³Ø·",
                mediumDesc: "50 Ø®Ù„ÙŠØ© Ù„Ù„Ù…Ù„Ø¡",
                hardLevel: "ØµØ¹Ø¨",
                hardDesc: "60 Ø®Ù„ÙŠØ© Ù„Ù„Ù…Ù„Ø¡",
                expertLevel: "Ø®Ø¨ÙŠØ±",
                expertDesc: "70 Ø®Ù„ÙŠØ© Ù„Ù„Ù…Ù„Ø¡",
                statisticsTitle: "ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",
                stat1: "ÙˆÙ‚Øª Ø§Ù„Ø­Ù„",
                stat2: "Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙƒØ§Øª",
                stat3: "Ø§Ù„ØªÙ„Ù…ÙŠØ­Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©",
                stat4: "Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø±ØªÙƒØ¨Ø©",
                stat5: "Ø§Ù„ØªÙ‚Ø¯Ù… ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ",
                techniquesTitle: "ğŸ”¬ ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©",
                technique1Name: "Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ø±ÙŠØ©",
                technique1Desc: "Ø®Ù„Ø§ÙŠØ§ Ø¨Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·",
                technique2Name: "Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª Ø§Ù„Ù…Ø®ÙÙŠØ©",
                technique2Desc: "Ø£Ø±Ù‚Ø§Ù… Ø¨Ù…ÙˆØ¶Ø¹ ÙˆØ§Ø­Ø¯ Ù…Ù…ÙƒÙ† ÙÙ‚Ø·",
                technique3Name: "Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¹Ø§Ø±ÙŠØ©",
                technique3Desc: "Ø§Ù„Ø¥Ù‚ØµØ§Ø¡ Ø¨Ø§Ù„Ø£Ø²ÙˆØ§Ø¬",
                technique4Name: "Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ù…Ø´ÙŠØ±Ø©",
                technique4Desc: "ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø·Ù‚Ø©",
                goodLuckText: "Ø­Ø¸Ø§Ù‹ Ø³Ø¹ÙŠØ¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ø­Ù„ØŒ Ø³ÙŠØ¯ Ø§Ù„Ø³ÙˆØ¯ÙˆÙƒÙˆ! ğŸš€"
            },
            zh: {
                gameTitle: "é‡å­AIæ•°ç‹¬ 2077",
                subtitle: "ç¥ç»è§£å†³ç•Œé¢å·²æ¿€æ´»",
                rulesBtn: "æ¸¸æˆè§„åˆ™",
                controlsTitle: "é‡å­æ§åˆ¶",
                newGameBtn: "æ–°æ¸¸æˆ",
                solveBtn: "AIè§£å†³",
                hintBtn: "AIæç¤º",
                checkBtn: "æ£€æŸ¥",
                clearBtn: "æ¸…é™¤",
                difficultyTitle: "éš¾åº¦çº§åˆ«",
                easyBtn: "ç®€å•",
                mediumBtn: "ä¸­ç­‰",
                hardBtn: "å›°éš¾",
                expertBtn: "ä¸“å®¶",
                statsTitle: "ç»Ÿè®¡",
                timeLabel: "æ—¶é—´:",
                movesLabel: "ç§»åŠ¨:",
                hintsLabel: "æç¤º:",
                errorsLabel: "é”™è¯¯:",
                completionLabel: "è¿›åº¦:",
                aiTitle: "é‡å­AIåŠ©æ‰‹",
                aiAnalyzeBtn: "åˆ†æ",
                numbersTitle: "æ•°å­—è¾“å…¥",
                strategiesTitle: "AIç­–ç•¥",
                aiStatsTitle: "AIåˆ†æ",
                emptyCellsLabel: "ç©ºå•å…ƒæ ¼:",
                possibilitiesLabel: "å¯èƒ½æ€§:",
                difficultyRatingLabel: "AIéš¾åº¦:",
                solutionTimeLabel: "AIæ—¶é—´:",
                selectCellText: "é€‰æ‹©ä¸€ä¸ªå•å…ƒæ ¼å¼€å§‹",
                congratulationsText: "ğŸ‰ æ­å–œï¼æ•°ç‹¬å·²è§£å†³ï¼ ğŸ‰",
                errorText: "âŒ ç½‘æ ¼ä¸­æ£€æµ‹åˆ°é”™è¯¯",
                aiReadyText: "AIå‡†å¤‡åˆ†ææ£‹ç›˜",
                hintText: "ğŸ’¡ æç¤º: åœ¨ä½ç½®({row}, {col})å°è¯•æ•°å­—{number}",
                noHintText: "ğŸ¤” æœªæ‰¾åˆ°æ˜æ˜¾æç¤º",
                solvingText: "ğŸ”„ æ­£åœ¨è§£å†³ä¸­...",
                solvedText: "âœ… ç½‘æ ¼å·²è¢«AIè§£å†³ï¼",
                impossibleText: "âŒ æ— æ³•è§£å†³ç½‘æ ¼",
                nakedSinglesBtn: "è£¸å•æ•°",
                hiddenSinglesBtn: "éšå•æ•°",
                nakedPairsBtn: "è£¸å¯¹æ•°",
                pointingPairsBtn: "æŒ‡å‘å¯¹",
                closeTitle: "è¿”å›ä¸»é¡µ",
                // æ¸¸æˆè§„åˆ™
                rulesModalTitle: "ğŸ§© é‡å­AIæ•°ç‹¬ 2077 è§„åˆ™ ğŸ§©",
                objectiveTitle: "ğŸ¯ ç›®æ ‡",
                objectiveText: "ç”¨æ•°å­—1åˆ°9å¡«æ»¡9Ã—9ç½‘æ ¼",
                objectiveRule: "æ¯è¡Œã€æ¯åˆ—å’Œæ¯ä¸ª3Ã—3åŒºåŸŸå¿…é¡»åŒ…å«1åˆ°9çš„æ‰€æœ‰æ•°å­—",
                howToPlayTitle: "ğŸ® å¦‚ä½•æ¸¸æˆ",
                howToPlay1: "ç‚¹å‡»ç©ºå•å…ƒæ ¼é€‰æ‹©å®ƒ",
                howToPlay2: "ä½¿ç”¨æ•°å­—æŒ‰é’®æˆ–é”®ç›˜è¾“å…¥æ•°å­—",
                howToPlay3: "ä½¿ç”¨\"âœ•\"æŒ‰é’®æˆ–Delete/Backspaceé”®æ¸…é™¤",
                aiFeaturesTitle: "ğŸ¤– AIåŠŸèƒ½",
                aiFeature1: "AIæç¤ºï¼šè·å¾—æ™ºèƒ½å»ºè®®",
                aiFeature2: "AIè§£å†³ï¼šè®©AIè‡ªåŠ¨è§£å†³",
                aiFeature3: "åˆ†æï¼šåˆ†æé€‚ç”¨çš„æŠ€å·§",
                aiFeature4: "ç­–ç•¥ï¼šåº”ç”¨é«˜çº§æŠ€å·§",
                difficultyLevelsTitle: "ğŸ† éš¾åº¦çº§åˆ«",
                easyLevel: "ç®€å•",
                easyDesc: "40ä¸ªå•å…ƒæ ¼éœ€è¦å¡«å†™",
                mediumLevel: "ä¸­ç­‰",
                mediumDesc: "50ä¸ªå•å…ƒæ ¼éœ€è¦å¡«å†™",
                hardLevel: "å›°éš¾",
                hardDesc: "60ä¸ªå•å…ƒæ ¼éœ€è¦å¡«å†™",
                expertLevel: "ä¸“å®¶",
                expertDesc: "70ä¸ªå•å…ƒæ ¼éœ€è¦å¡«å†™",
                statisticsTitle: "ğŸ“Š ç»Ÿè®¡ä¿¡æ¯",
                stat1: "è§£å†³æ—¶é—´",
                stat2: "ç§»åŠ¨æ¬¡æ•°",
                stat3: "ä½¿ç”¨çš„æç¤º",
                stat4: "çŠ¯çš„é”™è¯¯",
                stat5: "å®æ—¶è¿›åº¦",
                techniquesTitle: "ğŸ”¬ é«˜çº§AIæŠ€å·§",
                technique1Name: "è£¸å•æ•°",
                technique1Desc: "åªæœ‰ä¸€ç§å¯èƒ½æ€§çš„å•å…ƒæ ¼",
                technique2Name: "éšå•æ•°",
                technique2Desc: "åªæœ‰ä¸€ä¸ªå¯èƒ½ä½ç½®çš„æ•°å­—",
                technique3Name: "è£¸å¯¹æ•°",
                technique3Desc: "é€šè¿‡å¯¹æ•°æ¶ˆé™¤",
                technique4Name: "æŒ‡å‘å¯¹",
                technique4Desc: "åŒºåŸŸæŠ€å·§",
                goodLuckText: "ç¥ä½ è§£é¢˜æ„‰å¿«ï¼Œæ•°ç‹¬å¤§å¸ˆï¼ğŸš€"
            }
        };

        // Variables du jeu
        let currentLanguage = 'fr';
        let sudokuGrid = Array(9).fill().map(() => Array(9).fill(0));
        let originalGrid = Array(9).fill().map(() => Array(9).fill(0));
        let completeSolution = Array(9).fill().map(() => Array(9).fill(0));
        let selectedCell = null;
        let gameStartTime = null;
        let gameTimer = null;
        let currentDifficulty = 'medium';
        
        // Statistiques
        let moves = 0;
        let hints = 0;
        let errors = 0;
        let gameCompleted = false;

        // Niveaux de difficultÃ© (nombre de cellules Ã  enlever)
        const difficultyLevels = {
            easy: 40,
            medium: 50,
            hard: 60,
            expert: 70
        };

        // Grilles prÃ©dÃ©finies avec solutions garanties et uniques - chaque rÃ©gion 3x3 a au moins un chiffre
        const predefinedPuzzles = {
            easy: {
                puzzle: [
                    [5,3,0,0,7,0,0,0,0],
                    [6,0,0,1,9,5,0,0,0],
                    [0,9,8,0,0,0,0,6,0],
                    [8,0,0,0,6,0,0,0,3],
                    [4,0,0,8,0,3,0,0,1],
                    [7,0,0,0,2,0,0,0,6],
                    [0,6,0,0,0,0,2,8,0],
                    [0,0,0,4,1,9,0,0,5],
                    [0,0,0,0,8,0,0,7,9]
                ],
                solution: [
                    [5,3,4,6,7,8,9,1,2],
                    [6,7,2,1,9,5,3,4,8],
                    [1,9,8,3,4,2,5,6,7],
                    [8,5,9,7,6,1,4,2,3],
                    [4,2,6,8,5,3,7,9,1],
                    [7,1,3,9,2,4,8,5,6],
                    [9,6,1,5,3,7,2,8,4],
                    [2,8,7,4,1,9,6,3,5],
                    [3,4,5,2,8,6,1,7,9]
                ]
            },
            medium: {
                puzzle: [
                    [0,2,0,6,0,8,0,0,3],
                    [5,8,0,0,0,9,7,0,0],
                    [0,0,6,0,4,0,0,8,0],
                    [3,7,0,0,0,0,5,0,0],
                    [6,0,0,0,8,0,0,0,4],
                    [0,0,8,0,0,5,0,1,3],
                    [0,0,0,0,2,0,6,0,0],
                    [0,0,9,8,0,0,0,3,6],
                    [2,0,0,3,0,6,0,9,0]
                ],
                solution: [
                    [1,2,4,6,7,8,9,5,3],
                    [5,8,3,2,1,9,7,6,4],
                    [9,6,7,5,4,3,1,8,2],
                    [3,7,2,4,6,1,5,2,9],
                    [6,1,5,9,8,2,3,7,4],
                    [4,9,8,7,3,5,2,1,6],
                    [8,3,1,1,2,4,6,4,5],
                    [7,4,9,8,5,7,4,3,6],
                    [2,5,6,3,9,6,8,9,1]
                ]
            },
            hard: {
                puzzle: [
                    [8,0,0,0,0,0,0,0,2],
                    [0,0,3,6,0,0,0,7,0],
                    [0,7,0,0,9,0,2,0,0],
                    [0,5,0,0,0,7,0,0,0],
                    [0,0,0,0,4,5,7,0,0],
                    [0,0,6,1,0,0,0,3,0],
                    [0,0,1,0,0,0,0,6,8],
                    [0,3,8,5,0,0,0,1,0],
                    [9,0,0,0,0,8,4,0,0]
                ],
                solution: [
                    [8,1,2,7,5,3,6,4,9],
                    [9,4,3,6,8,2,1,7,5],
                    [6,7,5,4,9,1,2,8,3],
                    [1,5,4,2,3,7,8,9,6],
                    [3,6,9,8,4,5,7,2,1],
                    [2,8,7,1,6,9,5,3,4],
                    [5,2,1,9,7,4,3,6,8],
                    [4,3,8,5,2,6,9,1,7],
                    [7,9,6,3,1,8,4,5,2]
                ]
            },
            expert: {
                puzzle: [
                    [0,0,7,0,0,6,0,0,5],
                    [0,5,9,0,0,0,0,6,8],
                    [2,0,0,0,8,0,0,0,0],
                    [0,4,5,0,0,0,8,0,0],
                    [0,0,3,0,5,0,0,0,2],
                    [0,0,6,0,0,3,0,5,4],
                    [0,0,0,3,2,5,0,0,6],
                    [6,2,0,0,0,0,5,7,1],
                    [5,7,0,0,6,1,4,0,0]
                ],
                solution: [
                    [1,3,7,2,4,6,9,8,5],
                    [4,5,9,1,3,7,2,6,8],
                    [2,6,8,5,9,8,1,4,3],
                    [3,4,5,6,7,2,8,1,9],
                    [7,1,3,8,5,4,6,9,2],
                    [8,9,6,7,1,3,2,5,4],
                    [9,8,4,3,2,5,7,3,6],
                    [6,2,1,4,8,9,5,7,1],
                    [5,7,2,9,6,1,4,2,8]
                ]
            }
        };

        // Initialisation
        function init() {
            createNeuralGrid();
            setupEventListeners();
            updateLanguage();
            createSudokuGrid();
            newGame();
        }

        function createNeuralGrid() {
            const neuralGrid = document.getElementById('neuralGrid');
            for (let i = 0; i < 40; i++) {
                const line = document.createElement('div');
                line.className = 'neural-line';
                line.style.top = Math.random() * 100 + '%';
                line.style.width = '400px';
                line.style.animationDelay = Math.random() * 6 + 's';
                neuralGrid.appendChild(line);
            }
        }

        function setupEventListeners() {
            document.getElementById('languageSelect').addEventListener('change', (e) => {
                currentLanguage = e.target.value;
                updateLanguage();
            });

            // Gestion du clavier
            document.addEventListener('keydown', (e) => {
                if (selectedCell) {
                    const num = parseInt(e.key);
                    if (num >= 1 && num <= 9) {
                        inputNumber(num);
                    } else if (e.key === 'Delete' || e.key === 'Backspace') {
                        clearCell();
                    }
                }
            });
        }

        function updateLanguage() {
            const t = translations[currentLanguage];
            
            document.getElementById('gameTitle').textContent = t.gameTitle;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('rulesBtn').textContent = t.rulesBtn;
            document.getElementById('controlsTitle').textContent = t.controlsTitle;
            document.getElementById('newGameBtn').textContent = t.newGameBtn;
            document.getElementById('solveBtn').textContent = t.solveBtn;
            document.getElementById('hintBtn').textContent = t.hintBtn;
            document.getElementById('checkBtn').textContent = t.checkBtn;
            document.getElementById('clearBtn').textContent = t.clearBtn;
            document.getElementById('difficultyTitle').textContent = t.difficultyTitle;
            document.getElementById('easyBtn').textContent = t.easyBtn;
            document.getElementById('mediumBtn').textContent = t.mediumBtn;
            document.getElementById('hardBtn').textContent = t.hardBtn;
            document.getElementById('expertBtn').textContent = t.expertBtn;
            document.getElementById('statsTitle').textContent = t.statsTitle;
            document.getElementById('timeLabel').textContent = t.timeLabel;
            document.getElementById('movesLabel').textContent = t.movesLabel;
            document.getElementById('hintsLabel').textContent = t.hintsLabel;
            document.getElementById('errorsLabel').textContent = t.errorsLabel;
            document.getElementById('completionLabel').textContent = t.completionLabel;
            document.getElementById('aiTitle').textContent = t.aiTitle;
            document.getElementById('aiAnalyzeBtn').textContent = t.aiAnalyzeBtn;
            document.getElementById('numbersTitle').textContent = t.numbersTitle;
            document.getElementById('strategiesTitle').textContent = t.strategiesTitle;
            document.getElementById('aiStatsTitle').textContent = t.aiStatsTitle;
            document.getElementById('emptyCellsLabel').textContent = t.emptyCellsLabel;
            document.getElementById('possibilitiesLabel').textContent = t.possibilitiesLabel;
            document.getElementById('difficultyRatingLabel').textContent = t.difficultyRatingLabel;
            document.getElementById('solutionTimeLabel').textContent = t.solutionTimeLabel;
            
            // Mise Ã  jour des boutons de stratÃ©gies
            document.getElementById('nakedSinglesBtn').textContent = t.nakedSinglesBtn;
            document.getElementById('hiddenSinglesBtn').textContent = t.hiddenSinglesBtn;
            document.getElementById('nakedPairsBtn').textContent = t.nakedPairsBtn;
            document.getElementById('pointingPairsBtn').textContent = t.pointingPairsBtn;
            
            // Mise Ã  jour du titre du bouton fermer
            document.getElementById('closeBtn').title = t.closeTitle;
            
            if (!gameCompleted) {
                document.getElementById('gameStatus').textContent = t.selectCellText;
                document.getElementById('aiSuggestion').textContent = t.aiReadyText;
            }
        }

        function createSudokuGrid() {
            const gridContainer = document.getElementById('sudokuGrid');
            gridContainer.innerHTML = '';
            
            for (let i = 0; i < 81; i++) {
                const cell = document.createElement('div');
                cell.className = 'sudoku-cell';
                cell.dataset.index = i;
                cell.addEventListener('click', () => selectCell(i));
                gridContainer.appendChild(cell);
            }
        }

        function selectCell(index) {
            if (gameCompleted) return;
            
            const row = Math.floor(index / 9);
            const col = index % 9;
            
            // Ne pas sÃ©lectionner les cellules donnÃ©es
            if (originalGrid[row][col] !== 0) return;
            
            // DÃ©sÃ©lectionner la cellule prÃ©cÃ©dente
            if (selectedCell !== null) {
                document.querySelector(`[data-index="${selectedCell}"]`).classList.remove('selected');
            }
            
            selectedCell = index;
            document.querySelector(`[data-index="${index}"]`).classList.add('selected');
        }

        function inputNumber(num) {
            if (selectedCell === null || gameCompleted) return;
            
            const row = Math.floor(selectedCell / 9);
            const col = selectedCell % 9;
            
            // Ne pas modifier les cellules donnÃ©es
            if (originalGrid[row][col] !== 0) return;
            
            const oldValue = sudokuGrid[row][col];
            sudokuGrid[row][col] = num;
            moves++;
            
            // Pas de vÃ©rification d'erreur - le joueur peut placer n'importe quel chiffre
            // C'est Ã  lui de dÃ©couvrir ses erreurs
            
            updateDisplay();
            checkCompletion();
        }

        function clearCell() {
            if (selectedCell === null || gameCompleted) return;
            
            const row = Math.floor(selectedCell / 9);
            const col = selectedCell % 9;
            
            // Ne pas modifier les cellules donnÃ©es
            if (originalGrid[row][col] !== 0) return;
            
            sudokuGrid[row][col] = 0;
            moves++;
            updateDisplay();
        }

        // Fonction de validation supprimÃ©e - le joueur peut placer n'importe quel chiffre
        // La validation se fait uniquement Ã  la fin pour vÃ©rifier si la solution est correcte

        function generateSudoku() {
            let attempts = 0;
            const maxAttempts = 10;
            
            while (attempts < maxAttempts) {
                // RÃ©initialiser la grille
                sudokuGrid = Array(9).fill().map(() => Array(9).fill(0));
                
                // Remplir la grille avec un algorithme de backtracking
                if (fillGrid()) {
                    // Copier la solution complÃ¨te
                    completeSolution = sudokuGrid.map(row => [...row]);
                    
                    // Enlever des cellules selon la difficultÃ©
                    const cellsToRemove = difficultyLevels[currentDifficulty];
                    if (removeCells(cellsToRemove)) {
                        // VÃ©rifier que la grille a une solution unique ET que chaque rÃ©gion a au moins un chiffre
                        if (hasUniqueSolution() && validateRegionDistribution()) {
                            // Sauvegarder la grille originale
                            originalGrid = sudokuGrid.map(row => [...row]);
                            return completeSolution;
                        }
                    }
                }
                attempts++;
            }
            
            // Si Ã©chec, utiliser une grille prÃ©dÃ©finie
            return generatePredefinedSudoku();
        }

        function validateRegionDistribution() {
            // VÃ©rifier que chaque rÃ©gion 3x3 a au moins un chiffre donnÃ©
            for (let regionIndex = 0; regionIndex < 9; regionIndex++) {
                const startRow = Math.floor(regionIndex / 3) * 3;
                const startCol = (regionIndex % 3) * 3;
                let hasNumber = false;
                
                for (let r = startRow; r < startRow + 3; r++) {
                    for (let c = startCol; c < startCol + 3; c++) {
                        if (sudokuGrid[r][c] !== 0) {
                            hasNumber = true;
                            break;
                        }
                    }
                    if (hasNumber) break;
                }
                
                if (!hasNumber) {
                    return false; // Cette rÃ©gion est complÃ¨tement vide
                }
            }
            return true;
        }

        function generatePredefinedSudoku() {
            const puzzle = predefinedPuzzles[currentDifficulty];
            sudokuGrid = puzzle.puzzle.map(row => [...row]);
            originalGrid = puzzle.puzzle.map(row => [...row]);
            completeSolution = puzzle.solution.map(row => [...row]);
            return completeSolution;
        }

        function fillGrid() {
            const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9];
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (sudokuGrid[row][col] === 0) {
                        // MÃ©langer les nombres
                        shuffleArray(numbers);
                        
                        for (let num of numbers) {
                            if (isValidPlacement(row, col, num)) {
                                sudokuGrid[row][col] = num;
                                
                                if (fillGrid()) {
                                    return true;
                                }
                                
                                sudokuGrid[row][col] = 0;
                            }
                        }
                        return false;
                    }
                }
            }
            return true;
        }

        function isValidPlacement(row, col, num) {
            // VÃ©rifier la ligne
            for (let c = 0; c < 9; c++) {
                if (sudokuGrid[row][c] === num) return false;
            }
            
            // VÃ©rifier la colonne
            for (let r = 0; r < 9; r++) {
                if (sudokuGrid[r][col] === num) return false;
            }
            
            // VÃ©rifier la rÃ©gion 3x3
            const startRow = Math.floor(row / 3) * 3;
            const startCol = Math.floor(col / 3) * 3;
            
            for (let r = startRow; r < startRow + 3; r++) {
                for (let c = startCol; c < startCol + 3; c++) {
                    if (sudokuGrid[r][c] === num) return false;
                }
            }
            
            return true;
        }

        function removeCells(count) {
            let removed = 0;
            let attempts = 0;
            const maxAttempts = count * 4;
            
            // Garantir au moins 1 chiffre par rÃ©gion 3x3
            const regionCounts = Array(9).fill(0);
            const minPerRegion = 1;
            
            // Compter les cellules par rÃ©gion
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    const regionIndex = Math.floor(row / 3) * 3 + Math.floor(col / 3);
                    if (sudokuGrid[row][col] !== 0) {
                        regionCounts[regionIndex]++;
                    }
                }
            }
            
            // CrÃ©er une liste de positions avec prioritÃ© Ã©quilibrÃ©e
            const positions = [];
            for (let i = 0; i < 81; i++) {
                const row = Math.floor(i / 9);
                const col = i % 9;
                const regionIndex = Math.floor(row / 3) * 3 + Math.floor(col / 3);
                
                positions.push({
                    index: i,
                    row: row,
                    col: col,
                    region: regionIndex,
                    priority: regionCounts[regionIndex] > minPerRegion ? 1 : 0
                });
            }
            
            // Trier par prioritÃ© (rÃ©gions avec plus de chiffres en premier)
            positions.sort((a, b) => b.priority - a.priority);
            shuffleArray(positions);
            
            for (let posData of positions) {
                if (removed >= count || attempts >= maxAttempts) break;
                
                const row = posData.row;
                const col = posData.col;
                const regionIndex = posData.region;
                
                // Ne pas enlever si c'est le dernier chiffre de la rÃ©gion
                if (regionCounts[regionIndex] <= minPerRegion) {
                    continue;
                }
                
                const backup = sudokuGrid[row][col];
                sudokuGrid[row][col] = 0;
                attempts++;
                
                // VÃ©rifier que la grille a toujours une solution unique
                if (hasUniqueSolution()) {
                    removed++;
                    regionCounts[regionIndex]--;
                } else {
                    sudokuGrid[row][col] = backup;
                }
                
                // VÃ©rification de sÃ©curitÃ© pour Ã©viter les boucles infinies
                if (attempts > maxAttempts) break;
            }
            
            // VÃ©rifier que chaque rÃ©gion a au moins un chiffre
            let allRegionsValid = true;
            for (let i = 0; i < 9; i++) {
                if (regionCounts[i] < minPerRegion) {
                    allRegionsValid = false;
                    break;
                }
            }
            
            return removed >= Math.floor(count * 0.7) && allRegionsValid;
        }

        function hasUniqueSolution() {
            const gridCopy = sudokuGrid.map(row => [...row]);
            const solutions = [];
            
            // Chercher jusqu'Ã  2 solutions pour vÃ©rifier l'unicitÃ©
            findAllSolutions(gridCopy, solutions, 2);
            return solutions.length === 1;
        }

        function findAllSolutions(grid, solutions, maxSolutions) {
            if (solutions.length >= maxSolutions) return;
            
            // Trouver la premiÃ¨re cellule vide
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (grid[row][col] === 0) {
                        for (let num = 1; num <= 9; num++) {
                            if (isValidPlacementInGrid(grid, row, col, num)) {
                                grid[row][col] = num;
                                findAllSolutions(grid, solutions, maxSolutions);
                                grid[row][col] = 0;
                                
                                if (solutions.length >= maxSolutions) return;
                            }
                        }
                        return;
                    }
                }
            }
            
            // Grille complÃ¨te trouvÃ©e
            solutions.push(grid.map(row => [...row]));
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // ThÃ¨mes de couleurs
        const colorThemes = [
            {
                name: 'Cyber Blue',
                primary: '#00ffff',
                secondary: '#ff00ff',
                accent: '#ffff00',
                bg: 'linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e, #0f3460)',
                primaryAlpha: 'rgba(0, 255, 255, 0.5)'
            },
            {
                name: 'Neon Pink',
                primary: '#ff0080',
                secondary: '#00ff80',
                accent: '#8000ff',
                bg: 'linear-gradient(135deg, #2a0a2a, #4a1a4a, #3a2a5a, #5a0a5a)',
                primaryAlpha: 'rgba(255, 0, 128, 0.5)'
            },
            {
                name: 'Electric Green',
                primary: '#00ff00',
                secondary: '#ff8000',
                accent: '#0080ff',
                bg: 'linear-gradient(135deg, #0a2a0a, #1a4a1a, #2a3a1a, #0a5a0a)',
                primaryAlpha: 'rgba(0, 255, 0, 0.5)'
            },
            {
                name: 'Solar Orange',
                primary: '#ff8000',
                secondary: '#8000ff',
                accent: '#00ff80',
                bg: 'linear-gradient(135deg, #2a1a0a, #4a2a1a, #3a2a2a, #5a2a0a)',
                primaryAlpha: 'rgba(255, 128, 0, 0.5)'
            },
            {
                name: 'Arctic Purple',
                primary: '#8000ff',
                secondary: '#ff0080',
                accent: '#00ffff',
                bg: 'linear-gradient(135deg, #1a0a2a, #2a1a4a, #3a2a3a, #4a0a5a)',
                primaryAlpha: 'rgba(128, 0, 255, 0.5)'
            },
            {
                name: 'Quantum Gold',
                primary: '#ffd700',
                secondary: '#ff4500',
                accent: '#00bfff',
                bg: 'linear-gradient(135deg, #2a2a0a, #4a4a1a, #3a3a2a, #5a5a0a)',
                primaryAlpha: 'rgba(255, 215, 0, 0.5)'
            }
        ];

        let currentThemeIndex = 0;

        function applyColorTheme(theme) {
            const root = document.documentElement;
            root.style.setProperty('--primary-color', theme.primary);
            root.style.setProperty('--secondary-color', theme.secondary);
            root.style.setProperty('--accent-color', theme.accent);
            root.style.setProperty('--bg-gradient', theme.bg);
            root.style.setProperty('--primary-color-alpha', theme.primaryAlpha);
            
            // Animation de transition
            document.body.style.animation = 'themeTransition 1s ease-in-out';
            setTimeout(() => {
                document.body.style.animation = 'backgroundPulse 8s ease-in-out infinite';
            }, 1000);
        }

        function newGame() {
            gameCompleted = false;
            moves = 0;
            hints = 0;
            errors = 0;
            selectedCell = null;
            
            // Changer le thÃ¨me de couleur Ã  chaque nouvelle partie avec animation
            currentThemeIndex = (currentThemeIndex + 1) % colorThemes.length;
            const newTheme = colorThemes[currentThemeIndex];
            
            // Animation de transition de thÃ¨me
            document.body.style.animation = 'themeTransition 1.5s ease-in-out';
            
            setTimeout(() => {
                applyColorTheme(newTheme);
                
                // Message de nouveau thÃ¨me quantique
                const themeMessages = {
                    fr: `ğŸŒˆ CHANGEMENT QUANTIQUE: ${newTheme.name}`,
                    en: `ğŸŒˆ QUANTUM SHIFT: ${newTheme.name}`,
                    es: `ğŸŒˆ CAMBIO CUÃNTICO: ${newTheme.name}`,
                    de: `ğŸŒˆ QUANTUM WECHSEL: ${newTheme.name}`,
                    ar: `ğŸŒˆ ØªØºÙŠÙŠØ± ÙƒÙ…ÙŠ: ${newTheme.name}`,
                    zh: `ğŸŒˆ é‡å­è½¬æ¢: ${newTheme.name}`
                };
                
                showMessage(themeMessages[currentLanguage] || themeMessages.fr, 'win');
            }, 300);
            
            // ArrÃªter le timer prÃ©cÃ©dent
            if (gameTimer) {
                clearInterval(gameTimer);
            }
            
            // GÃ©nÃ©rer une nouvelle grille
            generateSudoku();
            
            // DÃ©marrer le timer
            gameStartTime = Date.now();
            gameTimer = setInterval(updateTimer, 1000);
            
            updateDisplay();
            document.getElementById('gameStatus').textContent = translations[currentLanguage].selectCellText;
            document.getElementById('aiSuggestion').textContent = translations[currentLanguage].aiReadyText;
        }

        function setDifficulty(level) {
            currentDifficulty = level;
            
            // Mettre Ã  jour les boutons
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(level + 'Btn').classList.add('active');
            
            // GÃ©nÃ©rer une nouvelle grille
            newGame();
        }

        function updateDisplay() {
            // Mettre Ã  jour la grille visuelle
            for (let i = 0; i < 81; i++) {
                const row = Math.floor(i / 9);
                const col = i % 9;
                const cell = document.querySelector(`[data-index="${i}"]`);
                
                const value = sudokuGrid[row][col];
                cell.textContent = value === 0 ? '' : value;
                
                // Appliquer les styles
                cell.className = 'sudoku-cell';
                if (originalGrid[row][col] !== 0) {
                    cell.classList.add('given');
                }
                if (i === selectedCell) {
                    cell.classList.add('selected');
                }
                

            }
            
            // Mettre Ã  jour les statistiques
            document.getElementById('movesValue').textContent = moves;
            document.getElementById('hintsValue').textContent = hints;
            document.getElementById('errorsValue').textContent = errors;
            
            // Calculer la progression
            const filledCells = sudokuGrid.flat().filter(cell => cell !== 0).length;
            const completion = Math.round((filledCells / 81) * 100);
            document.getElementById('completionValue').textContent = completion + '%';
            document.getElementById('progressFill').style.width = completion + '%';
            
            // Mettre Ã  jour l'analyse IA
            updateAIAnalysis();
        }

        function updateTimer() {
            if (gameCompleted) return;
            
            const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('timeValue').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateAIAnalysis() {
            const emptyCells = sudokuGrid.flat().filter(cell => cell === 0).length;
            document.getElementById('emptyCellsValue').textContent = emptyCells;
            
            // Calculer les possibilitÃ©s totales
            let totalPossibilities = 0;
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (sudokuGrid[row][col] === 0) {
                        totalPossibilities += getPossibleNumbers(row, col).length;
                    }
                }
            }
            document.getElementById('possibilitiesValue').textContent = totalPossibilities;
            
            // Ã‰valuation de difficultÃ© basique
            const difficultyRating = Math.max(1, Math.min(10, Math.floor(totalPossibilities / emptyCells * 2)));
            document.getElementById('difficultyRatingValue').textContent = difficultyRating;
        }

        function getPossibleNumbers(row, col) {
            if (sudokuGrid[row][col] !== 0) return [];
            
            const possible = [];
            for (let num = 1; num <= 9; num++) {
                if (isValidPlacement(row, col, num)) {
                    possible.push(num);
                }
            }
            return possible;
        }

        function checkCompletion() {
            // VÃ©rifier si toutes les cellules sont remplies
            const isEmpty = sudokuGrid.some(row => row.some(cell => cell === 0));
            if (isEmpty) return;
            
            // VÃ©rifier si la solution est correcte
            if (isValidSolution()) {
                gameCompleted = true;
                clearInterval(gameTimer);
                showMessage(translations[currentLanguage].congratulationsText, 'win');
                
                // Animation de victoire
                for (let i = 0; i < 81; i++) {
                    setTimeout(() => {
                        document.querySelector(`[data-index="${i}"]`).classList.add('solved');
                    }, i * 20);
                }
            }
        }

        function isValidSolution() {
            // VÃ©rifier toutes les lignes, colonnes et rÃ©gions
            for (let i = 0; i < 9; i++) {
                if (!isValidGroup(getRow(i)) || 
                    !isValidGroup(getColumn(i)) || 
                    !isValidGroup(getRegion(i))) {
                    return false;
                }
            }
            return true;
        }

        function isValidGroup(group) {
            const sorted = group.slice().sort();
            for (let i = 0; i < 9; i++) {
                if (sorted[i] !== i + 1) return false;
            }
            return true;
        }

        function getRow(rowIndex) {
            return sudokuGrid[rowIndex];
        }

        function getColumn(colIndex) {
            return sudokuGrid.map(row => row[colIndex]);
        }

        function getRegion(regionIndex) {
            const startRow = Math.floor(regionIndex / 3) * 3;
            const startCol = (regionIndex % 3) * 3;
            const region = [];
            
            for (let r = startRow; r < startRow + 3; r++) {
                for (let c = startCol; c < startCol + 3; c++) {
                    region.push(sudokuGrid[r][c]);
                }
            }
            return region;
        }

        function getHint() {
            if (gameCompleted) return;
            
            const t = translations[currentLanguage];
            
            // Trouver une cellule vide avec le moins de possibilitÃ©s
            let bestCell = null;
            let minPossibilities = 10;
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (sudokuGrid[row][col] === 0) {
                        const possibilities = getPossibleNumbers(row, col);
                        if (possibilities.length > 0 && possibilities.length < minPossibilities) {
                            minPossibilities = possibilities.length;
                            bestCell = { row, col, possibilities };
                        }
                    }
                }
            }
            
            if (bestCell) {
                const hintNumber = bestCell.possibilities[0];
                const message = t.hintText
                    .replace('{number}', hintNumber)
                    .replace('{row}', bestCell.row + 1)
                    .replace('{col}', bestCell.col + 1);
                
                document.getElementById('aiSuggestion').textContent = message;
                
                // Mettre en Ã©vidence la cellule
                const cellIndex = bestCell.row * 9 + bestCell.col;
                document.querySelector(`[data-index="${cellIndex}"]`).classList.add('hint');
                setTimeout(() => {
                    document.querySelector(`[data-index="${cellIndex}"]`).classList.remove('hint');
                }, 2000);
                
                hints++;
                updateDisplay();
            } else {
                document.getElementById('aiSuggestion').textContent = t.noHintText;
            }
        }

        function solveWithAI() {
            if (gameCompleted) return;
            
            const t = translations[currentLanguage];
            document.getElementById('aiSuggestion').textContent = t.solvingText;
            
            const startTime = Date.now();
            
            setTimeout(() => {
                // Utiliser la solution complÃ¨te stockÃ©e
                sudokuGrid = completeSolution.map(row => [...row]);
                const solveTime = Date.now() - startTime;
                document.getElementById('solutionTimeValue').textContent = solveTime + 'ms';
                document.getElementById('aiSuggestion').textContent = t.solvedText;
                
                // Animation de rÃ©solution progressive
                animateSolution();
                
                updateDisplay();
                checkCompletion();
            }, 100);
        }

        function animateSolution() {
            const cells = document.querySelectorAll('.sudoku-cell');
            let delay = 0;
            
            for (let i = 0; i < 81; i++) {
                const row = Math.floor(i / 9);
                const col = i % 9;
                
                // Animer seulement les cellules qui Ã©taient vides
                if (originalGrid[row][col] === 0) {
                    setTimeout(() => {
                        cells[i].classList.add('solved');
                        setTimeout(() => {
                            cells[i].classList.remove('solved');
                        }, 500);
                    }, delay);
                    delay += 50;
                }
            }
        }

        function solveSudoku(grid, solutions, maxSolutions) {
            // Trouver la premiÃ¨re cellule vide
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (grid[row][col] === 0) {
                        for (let num = 1; num <= 9; num++) {
                            if (isValidPlacementInGrid(grid, row, col, num)) {
                                grid[row][col] = num;
                                
                                if (solveSudoku(grid, solutions, maxSolutions)) {
                                    if (solutions.length >= maxSolutions) {
                                        return true;
                                    }
                                }
                                
                                grid[row][col] = 0;
                            }
                        }
                        return false;
                    }
                }
            }
            
            // Grille complÃ¨te trouvÃ©e
            solutions.push(grid.map(row => [...row]));
            return true;
        }

        function isValidPlacementInGrid(grid, row, col, num) {
            // VÃ©rifier la ligne
            for (let c = 0; c < 9; c++) {
                if (grid[row][c] === num) return false;
            }
            
            // VÃ©rifier la colonne
            for (let r = 0; r < 9; r++) {
                if (grid[r][col] === num) return false;
            }
            
            // VÃ©rifier la rÃ©gion 3x3
            const startRow = Math.floor(row / 3) * 3;
            const startCol = Math.floor(col / 3) * 3;
            
            for (let r = startRow; r < startRow + 3; r++) {
                for (let c = startCol; c < startCol + 3; c++) {
                    if (grid[r][c] === num) return false;
                }
            }
            
            return true;
        }

        function checkSolution() {
            if (isValidSolution()) {
                showMessage(translations[currentLanguage].congratulationsText, 'win');
            } else {
                showMessage(translations[currentLanguage].errorText, 'error');
            }
        }

        function analyzeBoard() {
            const t = translations[currentLanguage];
            
            // Analyser les techniques possibles
            const techniques = [];
            
            if (findNakedSingles(true)) techniques.push("Singles Nus");
            if (findHiddenSingles(true)) techniques.push("Singles CachÃ©s");
            if (findNakedPairs(true)) techniques.push("Paires Nues");
            if (findPointingPairs(true)) techniques.push("Paires PointÃ©es");
            
            let analysis = "ğŸ” Analyse du plateau:\n";
            if (techniques.length > 0) {
                analysis += "Techniques applicables: " + techniques.join(", ");
            } else {
                analysis += "Aucune technique Ã©vidente dÃ©tectÃ©e";
            }
            
            document.getElementById('aiSuggestion').textContent = analysis;
        }

        function findNakedSingles(analyzeOnly = false) {
            let found = false;
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (sudokuGrid[row][col] === 0) {
                        const possibilities = getPossibleNumbers(row, col);
                        if (possibilities.length === 1) {
                            found = true;
                            if (!analyzeOnly) {
                                sudokuGrid[row][col] = possibilities[0];
                                const cellIndex = row * 9 + col;
                                document.querySelector(`[data-index="${cellIndex}"]`).classList.add('hint');
                                setTimeout(() => {
                                    document.querySelector(`[data-index="${cellIndex}"]`).classList.remove('hint');
                                }, 1500);
                            }
                        }
                    }
                }
            }
            
            if (found && !analyzeOnly) {
                updateDisplay();
                document.getElementById('aiSuggestion').textContent = "âœ… Singles nus trouvÃ©s et appliquÃ©s";
            }
            
            return found;
        }

        function findHiddenSingles(analyzeOnly = false) {
            let found = false;
            
            // VÃ©rifier dans chaque ligne, colonne et rÃ©gion
            for (let i = 0; i < 9; i++) {
                if (findHiddenSinglesInGroup(getRowCells(i), analyzeOnly)) found = true;
                if (findHiddenSinglesInGroup(getColumnCells(i), analyzeOnly)) found = true;
                if (findHiddenSinglesInGroup(getRegionCells(i), analyzeOnly)) found = true;
            }
            
            if (found && !analyzeOnly) {
                updateDisplay();
                document.getElementById('aiSuggestion').textContent = "âœ… Singles cachÃ©s trouvÃ©s et appliquÃ©s";
            }
            
            return found;
        }

        function findHiddenSinglesInGroup(cells, analyzeOnly) {
            let found = false;
            
            for (let num = 1; num <= 9; num++) {
                const possibleCells = cells.filter(cell => {
                    const row = Math.floor(cell.index / 9);
                    const col = cell.index % 9;
                    return sudokuGrid[row][col] === 0 && getPossibleNumbers(row, col).includes(num);
                });
                
                if (possibleCells.length === 1) {
                    found = true;
                    if (!analyzeOnly) {
                        const row = Math.floor(possibleCells[0].index / 9);
                        const col = possibleCells[0].index % 9;
                        sudokuGrid[row][col] = num;
                        
                        document.querySelector(`[data-index="${possibleCells[0].index}"]`).classList.add('hint');
                        setTimeout(() => {
                            document.querySelector(`[data-index="${possibleCells[0].index}"]`).classList.remove('hint');
                        }, 1500);
                    }
                }
            }
            
            return found;
        }

        function getRowCells(rowIndex) {
            const cells = [];
            for (let col = 0; col < 9; col++) {
                cells.push({ index: rowIndex * 9 + col });
            }
            return cells;
        }

        function getColumnCells(colIndex) {
            const cells = [];
            for (let row = 0; row < 9; row++) {
                cells.push({ index: row * 9 + colIndex });
            }
            return cells;
        }

        function getRegionCells(regionIndex) {
            const startRow = Math.floor(regionIndex / 3) * 3;
            const startCol = (regionIndex % 3) * 3;
            const cells = [];
            
            for (let r = startRow; r < startRow + 3; r++) {
                for (let c = startCol; c < startCol + 3; c++) {
                    cells.push({ index: r * 9 + c });
                }
            }
            return cells;
        }

        function findNakedPairs(analyzeOnly = false) {
            // ImplÃ©mentation simplifiÃ©e des paires nues
            let found = false;
            
            if (!analyzeOnly) {
                document.getElementById('aiSuggestion').textContent = "ğŸ” Recherche de paires nues... (Technique avancÃ©e)";
            }
            
            return found;
        }

        function findPointingPairs(analyzeOnly = false) {
            // ImplÃ©mentation simplifiÃ©e des paires pointÃ©es
            let found = false;
            
            if (!analyzeOnly) {
                document.getElementById('aiSuggestion').textContent = "ğŸ” Recherche de paires pointÃ©es... (Technique avancÃ©e)";
            }
            
            return found;
        }

        function showMessage(message, type) {
            const statusElement = document.getElementById('gameStatus');
            statusElement.textContent = message;
            statusElement.className = `game-status ${type}`;
            
            setTimeout(() => {
                if (!gameCompleted) {
                    statusElement.textContent = translations[currentLanguage].selectCellText;
                    statusElement.className = 'game-status';
                }
            }, 3000);
        }

        function showRules() {
            const modal = document.getElementById('rulesModal');
            const t = translations[currentLanguage];
            
            // Mettre Ã  jour le titre
            document.getElementById('rulesModalTitle').textContent = t.rulesModalTitle;
            
            // GÃ©nÃ©rer le contenu HTML des rÃ¨gles
            const rulesHTML = `
                <div class="rules-section">
                    <h3>${t.objectiveTitle}</h3>
                    <ul>
                        <li>${t.objectiveText}</li>
                        <li>${t.objectiveRule}</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>${t.howToPlayTitle}</h3>
                    <ul>
                        <li>${t.howToPlay1}</li>
                        <li>${t.howToPlay2}</li>
                        <li>${t.howToPlay3}</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>${t.aiFeaturesTitle}</h3>
                    <ul>
                        <li>${t.aiFeature1}</li>
                        <li>${t.aiFeature2}</li>
                        <li>${t.aiFeature3}</li>
                        <li>${t.aiFeature4}</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>${t.difficultyLevelsTitle}</h3>
                    <div class="difficulty-grid">
                        <div class="difficulty-item">
                            <div class="difficulty-name">${t.easyLevel}</div>
                            <div class="difficulty-desc">${t.easyDesc}</div>
                        </div>
                        <div class="difficulty-item">
                            <div class="difficulty-name">${t.mediumLevel}</div>
                            <div class="difficulty-desc">${t.mediumDesc}</div>
                        </div>
                        <div class="difficulty-item">
                            <div class="difficulty-name">${t.hardLevel}</div>
                            <div class="difficulty-desc">${t.hardDesc}</div>
                        </div>
                        <div class="difficulty-item">
                            <div class="difficulty-name">${t.expertLevel}</div>
                            <div class="difficulty-desc">${t.expertDesc}</div>
                        </div>
                    </div>
                </div>

                <div class="rules-section">
                    <h3>${t.statisticsTitle}</h3>
                    <ul>
                        <li>${t.stat1}</li>
                        <li>${t.stat2}</li>
                        <li>${t.stat3}</li>
                        <li>${t.stat4}</li>
                        <li>${t.stat5}</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>${t.techniquesTitle}</h3>
                    <div class="technique-grid">
                        <div class="technique-item">
                            <div class="technique-name">${t.technique1Name}</div>
                            <div class="technique-desc">${t.technique1Desc}</div>
                        </div>
                        <div class="technique-item">
                            <div class="technique-name">${t.technique2Name}</div>
                            <div class="technique-desc">${t.technique2Desc}</div>
                        </div>
                        <div class="technique-item">
                            <div class="technique-name">${t.technique3Name}</div>
                            <div class="technique-desc">${t.technique3Desc}</div>
                        </div>
                        <div class="technique-item">
                            <div class="technique-name">${t.technique4Name}</div>
                            <div class="technique-desc">${t.technique4Desc}</div>
                        </div>
                    </div>
                </div>

                <div class="rules-section" style="text-align: center; margin-top: 30px;">
                    <h3 style="color: var(--accent-color, #ffff00);">${t.goodLuckText}</h3>
                </div>
            `;
            
            document.getElementById('rulesBody').innerHTML = rulesHTML;
            modal.classList.add('show');
        }

        function closeRules() {
            const modal = document.getElementById('rulesModal');
            modal.classList.remove('show');
        }

        // Fermer la modal en cliquant Ã  l'extÃ©rieur
        document.getElementById('rulesModal').addEventListener('click', (e) => {
            if (e.target.id === 'rulesModal') {
                closeRules();
            }
        });

                        function closePlatform() {
                                // Try multiple non-blocking ways to return to the platform/home.
                                try{
                                    // Preferred: tell parent overlay to close
                                    if(window.parent && window.parent !== window){
                                        window.parent.postMessage({ action: 'close', reason: 'user-initiated' }, '*');
                                        return;
                                    }
                                }catch(e){/* ignore */}
                                try{
                                    // If opened from a window opener, ask it to focus and close this
                                    if(window.opener && !window.opener.closed){
                                        try{ window.opener.postMessage({ action: 'child-closed' }, '*'); }catch(e){}
                                        window.close();
                                        return;
                                    }
                                }catch(e){/* ignore */}
                                // Last-resort: navigate to the local platform file if available
                                try{ window.location.href = new URL('./brainova.html', window.location.href).href; }catch(e){ /* ignore */ }
                        }

        // Initialiser le jeu
        init();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98bc0e0ce540e1e1',t:'MTc1OTk5Mzc5MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
