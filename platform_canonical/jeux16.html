<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enigma Hunter</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
            min-height: 100vh;
            color: #00ff88;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated quantum grid background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 136, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 136, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: quantumGrid 20s linear infinite;
            z-index: -1;
        }

        @keyframes quantumGrid {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0.3; }
            50% { opacity: 0.6; }
            100% { transform: translate(40px, 40px) rotate(360deg); opacity: 0.3; }
        }

        .quantum-particles {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00ccff;
            border-radius: 50%;
            animation: quantumFloat 12s linear infinite;
            box-shadow: 0 0 15px rgba(0, 204, 255, 0.8);
        }

        @keyframes quantumFloat {
            0% {
                transform: translateY(100vh) translateX(0) scale(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: scale(1);
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10vh) translateX(300px) scale(0) rotate(720deg);
                opacity: 0;
            }
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .title {
            font-size: 3rem;
            margin: 0;
            text-shadow: 0 0 40px rgba(0, 255, 136, 0.8);
            background: linear-gradient(45deg, #00ff88, #00ccff, #ff0088, #ffaa00, #8800ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titlePulse 5s ease-in-out infinite;
            letter-spacing: 4px;
            text-transform: uppercase;
        }

        @keyframes titlePulse {
            0%, 100% { 
                filter: drop-shadow(0 0 30px rgba(0, 255, 136, 0.5));
                transform: scale(1);
            }
            50% { 
                filter: drop-shadow(0 0 60px rgba(0, 255, 136, 1));
                transform: scale(1.08);
            }
        }

        .subtitle {
            font-size: 1.4rem;
            color: #00ccff;
            margin: 15px 0;
            opacity: 0.9;
            letter-spacing: 3px;
            animation: subtitleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes subtitleGlow {
            0% { text-shadow: 0 0 10px rgba(0, 204, 255, 0.5); }
            100% { text-shadow: 0 0 25px rgba(0, 204, 255, 1); }
        }

        .language-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .language-dropdown {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 12px 18px;
            color: #00ff88;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            cursor: pointer;
            outline: none;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.4);
            transition: all 0.3s ease;
        }

        .language-dropdown:hover {
            background: rgba(0, 255, 136, 0.1);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.6);
            transform: scale(1.05);
        }

        .control-panel {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .quantum-btn {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.2) 0%, rgba(0, 204, 255, 0.2) 100%);
            border: 2px solid #00ff88;
            padding: 12px 20px;
            border-radius: 8px;
            color: #00ff88;
            font-size: 1rem;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
            min-width: 140px;
            font-weight: bold;
        }

        .quantum-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 136, 0.4), transparent);
            transition: left 0.5s;
        }

        .quantum-btn:hover::before {
            left: 100%;
        }

        .quantum-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 255, 136, 0.4);
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.4) 0%, rgba(0, 204, 255, 0.4) 100%);
            border-color: #00ccff;
            color: #ffffff;
        }

        .quantum-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .quantum-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .rules-btn {
            background: linear-gradient(135deg, rgba(255, 170, 0, 0.2) 0%, rgba(255, 136, 0, 0.2) 100%);
            border-color: #ffaa00;
            color: #ffaa00;
        }

        .rules-btn:hover {
            background: linear-gradient(135deg, rgba(255, 170, 0, 0.4) 0%, rgba(255, 136, 0, 0.4) 100%);
            border-color: #ff8800;
        }

        .pause-btn {
            background: linear-gradient(135deg, rgba(255, 0, 136, 0.2) 0%, rgba(136, 0, 255, 0.2) 100%);
            border-color: #ff0088;
            color: #ff0088;
        }

        .pause-btn:hover {
            background: linear-gradient(135deg, rgba(255, 0, 136, 0.4) 0%, rgba(136, 0, 255, 0.4) 100%);
            border-color: #cc0066;
        }

        .game-area {
            display: grid;
            grid-template-columns: 250px 1fr 250px;
            gap: 20px;
            margin: 20px 0;
            min-height: 500px;
        }

        .main-game {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

        .main-game::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ff88, #00ccff, #ff0088, #ffaa00, #8800ff);
            border-radius: 17px;
            z-index: -1;
            animation: borderGlow 8s linear infinite;
        }

        @keyframes borderGlow {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .side-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .ai-assistant {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ccff;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .ai-assistant::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ccff, #0088ff, #0044ff);
            border-radius: 14px;
            z-index: -1;
            animation: aiGlow 4s ease-in-out infinite;
        }

        @keyframes aiGlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        .ai-avatar {
            width: 50px;
            height: 50px;
            margin: 0 auto 10px;
            border-radius: 50%;
            background: radial-gradient(circle, #00ccff 0%, #0088ff 50%, #0044ff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            animation: aiPulse 3s ease-in-out infinite;
            box-shadow: 0 0 25px rgba(0, 204, 255, 0.8);
        }

        @keyframes aiPulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.15) rotate(180deg); }
        }

        .ai-name {
            font-size: 1rem;
            color: #00ccff;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
        }

        .ai-message {
            font-size: 0.85rem;
            line-height: 1.4;
            color: #88ffcc;
            background: rgba(0, 204, 255, 0.1);
            padding: 12px;
            border-radius: 6px;
            border-left: 3px solid #00ccff;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stats-panel {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ffaa00;
            border-radius: 12px;
            padding: 15px;
        }

        .stats-title {
            font-size: 1rem;
            color: #ffaa00;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 6px;
            background: rgba(255, 170, 0, 0.1);
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .stat-label {
            color: #ffcc66;
        }

        .stat-value {
            color: #ffaa00;
            font-weight: bold;
        }

        .enigma-display {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .enigma-text {
            font-size: 1.3rem;
            color: #00ff88;
            margin-bottom: 15px;
            line-height: 1.5;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .enigma-input {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ccff;
            border-radius: 8px;
            padding: 15px;
            color: #00ccff;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            width: 100%;
            text-align: center;
            margin: 10px 0;
            box-shadow: 0 0 15px rgba(0, 204, 255, 0.3);
        }

        .enigma-input:focus {
            outline: none;
            box-shadow: 0 0 25px rgba(0, 204, 255, 0.6);
            border-color: #00ff88;
        }

        .progress-bar {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ff0088;
            border-radius: 10px;
            padding: 10px;
            margin: 15px 0;
        }

        .progress-title {
            color: #ff0088;
            font-size: 0.9rem;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #ff0088, #ff44aa);
            height: 20px;
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 15px rgba(255, 0, 136, 0.6);
        }

        .timer-display {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ffaa00;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            margin: 15px 0;
        }

        .timer-text {
            font-size: 2rem;
            color: #ffaa00;
            font-weight: bold;
            text-shadow: 0 0 20px rgba(255, 170, 0, 0.8);
        }

        .game-message {
            text-align: center;
            font-size: 1.2rem;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #00ccff;
            color: #00ccff;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rules-panel, .pause-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #00ff88;
            border-radius: 20px;
            padding: 40px;
            z-index: 3000;
            display: none;
            min-width: 600px;
            max-width: 85vw;
            max-height: 85vh;
            overflow-y: auto;
        }

        .rules-content {
            color: #00ff88;
            line-height: 1.8;
        }

        .rules-content h3 {
            color: #00ccff;
            margin-top: 30px;
            margin-bottom: 20px;
            border-bottom: 2px solid #00ff88;
            padding-bottom: 10px;
            font-size: 1.4rem;
        }

        .rules-content ul {
            margin: 20px 0;
            padding-left: 30px;
        }

        .rules-content li {
            margin: 10px 0;
        }

        .pause-panel {
            text-align: center;
            border-color: #ff0088;
        }

        .pause-panel h3 {
            color: #ff0088;
            font-size: 2.5rem;
            margin-bottom: 30px;
        }

        .level-indicator {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ffaa00;
            border-radius: 12px;
            padding: 12px 25px;
            color: #ffaa00;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .hint-system {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #8800ff;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .hint-title {
            color: #8800ff;
            font-size: 0.9rem;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .hint-text {
            color: #cc88ff;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .title {
                font-size: 2.5rem;
            }
            
            .control-panel {
                gap: 15px;
            }
            
            .quantum-btn {
                min-width: 130px;
                padding: 15px 25px;
                font-size: 1.1rem;
            }
            
            .language-selector {
                top: 10px;
                right: 10px;
            }
            
            .rules-panel {
                min-width: 95vw;
                padding: 25px;
            }
        }
    </style>
</head>
<body>
    <div class="quantum-particles" id="particles"></div>
    
    <div class="language-selector">
        <select class="language-dropdown" id="languageSelect">
            <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
            <option value="en">ğŸ‡¬ğŸ‡§ English</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
        </select>
    </div>

    <div class="level-indicator" id="levelIndicator">
        Niveau 1
    </div>

    <div class="game-container">
        <div class="header">
            <h1 class="title" id="gameTitle">Enigma Hunter</h1>
            <p class="subtitle" id="gameSubtitle">Chasseur d'Ã‰nigmes Quantiques avec IA</p>
        </div>

        <div class="control-panel">
            <button class="quantum-btn rules-btn" id="rulesBtn" onclick="showRules()">ğŸ“– RÃ¨gles</button>
            <button class="quantum-btn" id="startBtn" onclick="startGame()">ğŸš€ Commencer</button>
            <button class="quantum-btn pause-btn" id="pauseBtn" onclick="togglePause()" disabled>â¸ï¸ Pause</button>
            <button class="quantum-btn" id="newGameBtn" onclick="newGame()">ğŸ”„ Nouveau Jeu</button>
        </div>

        <div class="game-area">
            <div class="side-panel">
                <div class="ai-assistant">
                    <div class="ai-avatar">ğŸ§ </div>
                    <div class="ai-name" id="aiName">CIPHER-AI</div>
                    <div class="ai-message" id="aiMessage">
                        Salut ! Je suis CIPHER-AI, votre assistant quantique. PrÃªt Ã  rÃ©soudre des Ã©nigmes mystÃ©rieuses ?
                    </div>
                </div>

                <div class="stats-panel" style="padding: 12px;">
                    <div class="stats-title" id="statsTitle" style="font-size: 0.9rem; margin-bottom: 10px;">Statistiques</div>
                    <div class="stat-item" style="margin: 6px 0; padding: 4px; font-size: 0.75rem;">
                        <span class="stat-label" id="solvedLabel">RÃ©solues:</span>
                        <span class="stat-value" id="solvedValue">0</span>
                    </div>
                    <div class="stat-item" style="margin: 6px 0; padding: 4px; font-size: 0.75rem;">
                        <span class="stat-label" id="failedLabel">Ã‰chouÃ©es:</span>
                        <span class="stat-value" id="failedValue">0</span>
                    </div>
                    <div class="stat-item" style="margin: 6px 0; padding: 4px; font-size: 0.75rem;">
                        <span class="stat-label" id="streakLabel">SÃ©rie:</span>
                        <span class="stat-value" id="streakValue">0</span>
                    </div>
                    <div class="stat-item" style="margin: 6px 0; padding: 4px; font-size: 0.75rem;">
                        <span class="stat-label" id="levelLabel">Niveau:</span>
                        <span class="stat-value" id="levelValue">1</span>
                    </div>
                    <div class="stat-item" style="margin: 6px 0; padding: 4px; font-size: 0.75rem;">
                        <span class="stat-label" id="scoreLabel">Score:</span>
                        <span class="stat-value" id="scoreValue">0</span>
                    </div>
                </div>


            </div>

            <div class="main-game">
                <div class="timer-display" id="timerDisplay">
                    <div class="timer-text" id="timerText">--:--</div>
                </div>

                <div class="progress-bar">
                    <div class="progress-title" id="progressTitle">Progression du Niveau</div>
                    <div style="background: rgba(255, 0, 136, 0.2); border-radius: 10px;">
                        <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                    </div>
                </div>

                <div class="enigma-display" id="enigmaDisplay">
                    <div class="enigma-text" id="enigmaText">
                        Cliquez sur "Commencer" pour dÃ©buter votre aventure de chasseur d'Ã©nigmes !
                    </div>
                    <input type="text" class="enigma-input" id="enigmaInput" placeholder="Tapez votre rÃ©ponse ici..." style="display: none;">
                    <button class="quantum-btn" id="submitBtn" onclick="submitAnswer()" style="display: none; margin-top: 15px;">Valider</button>
                </div>

                <div class="game-message" id="gameMessage">
                    Bienvenue dans Enigma Hunter ! RÃ©solvez des Ã©nigmes mystÃ©rieuses avec l'aide de votre IA.
                </div>
            </div>

            <div class="side-panel">
                <div class="ai-assistant">
                    <div class="ai-avatar">ğŸ“–</div>
                    <div class="ai-name" id="rulesName">OBJECTIF</div>
                    <div class="ai-message" id="rulesMessage">
                        RÃ©solvez l'Ã©nigme avant la fin du temps imparti !
                    </div>
                </div>

                <div class="hint-system" id="hintSystemRight" style="display: block;">
                    <div class="hint-title" id="hintTitleRight">ğŸ’¡ Indice & Solution</div>
                    <div class="hint-text" id="hintTextRight">Utilisez un indice pour vous aider...</div>
                    <div style="display: flex; gap: 8px; margin-top: 10px;">
                        <button class="quantum-btn" id="hintBtnRight" onclick="useHint()" style="min-width: 80px; padding: 8px 12px; font-size: 0.8rem;">Indice</button>
                        <button class="quantum-btn" id="solutionBtnRight" onclick="showSolution()" style="min-width: 80px; padding: 8px 12px; font-size: 0.8rem; background: linear-gradient(135deg, rgba(255, 0, 136, 0.2) 0%, rgba(136, 0, 255, 0.2) 100%); border-color: #ff0088; color: #ff0088;">Solution</button>
                    </div>
                </div>

                <div class="stats-panel" style="padding: 12px;">
                    <div class="stats-title" id="difficultyTitle" style="font-size: 0.9rem; margin-bottom: 10px;">DifficultÃ©</div>
                    <div class="stat-item" style="margin: 6px 0; padding: 4px; font-size: 0.75rem;">
                        <span class="stat-label" id="currentDiffLabel">Actuelle:</span>
                        <span class="stat-value" id="currentDiffValue">Facile</span>
                    </div>
                    <div class="stat-item" style="margin: 6px 0; padding: 4px; font-size: 0.75rem;">
                        <span class="stat-label" id="timeLeftLabel">Temps:</span>
                        <span class="stat-value" id="timeLeftValue">--</span>
                    </div>
                    <div class="stat-item" style="margin: 6px 0; padding: 4px; font-size: 0.75rem;">
                        <span class="stat-label" id="hintsLeftLabel">Indices:</span>
                        <span class="stat-value" id="hintsLeftValue">3</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Rules Panel -->
    <div class="rules-panel" id="rulesPanel">
        <h3 style="color: #00ff88; text-align: center; margin-bottom: 30px;" id="rulesTitle">ğŸ“– RÃ¨gles d'Enigma Hunter</h3>
        <div class="rules-content" id="rulesContent">
            <div id="rulesObjective">
                <h3 id="objectiveTitle">ğŸ¯ Objectif</h3>
                <p id="objectiveText">RÃ©solvez des Ã©nigmes de plus en plus complexes en utilisant votre logique et l'aide de votre IA assistant CIPHER-AI.</p>
            </div>
            
            <div id="rulesGameplay">
                <h3 id="gameplayTitle">ğŸ® Gameplay</h3>
                <ul>
                    <li><strong id="variedEnigmas">Ã‰nigmes variÃ©es:</strong> <span id="variedEnigmasDesc">MathÃ©matiques, logique, mots, codes secrets</span></li>
                    <li><strong id="timedChallenges">Temps limitÃ©:</strong> <span id="timedChallengesDesc">Chaque Ã©nigme a une limite de temps</span></li>
                    <li><strong id="progressiveLevels">Niveaux progressifs:</strong> <span id="progressiveLevelsDesc">La difficultÃ© augmente avec votre progression</span></li>
                    <li><strong id="hintSystem">SystÃ¨me d'indices:</strong> <span id="hintSystemDesc">Utilisez des indices pour vous aider</span></li>
                    <li><strong id="solutionSystem">Bouton Solution:</strong> <span id="solutionSystemDesc">RÃ©vÃ©lez la rÃ©ponse si vous Ãªtes bloquÃ©</span></li>
                </ul>
            </div>
            
            <div id="rulesScoring">
                <h3 id="scoringTitle">ğŸ† SystÃ¨me de Score</h3>
                <ul>
                    <li><strong id="fastSolving">RÃ©solution rapide:</strong> <span id="fastSolvingDesc">Plus vous Ãªtes rapide, plus vous gagnez de points</span></li>
                    <li><strong id="noHints">Sans indices:</strong> <span id="noHintsDesc">Bonus pour rÃ©soudre sans aide</span></li>
                    <li><strong id="streaks">SÃ©ries:</strong> <span id="streaksDesc">Bonus pour les rÃ©solutions consÃ©cutives</span></li>
                    <li><strong id="levelUnlock">Niveaux:</strong> <span id="levelUnlockDesc">DÃ©bloquez de nouveaux dÃ©fis</span></li>
                </ul>
            </div>
        </div>
        <button class="quantum-btn" onclick="hideRules()" style="margin-top: 30px;" id="closeRulesBtn">Fermer</button>
    </div>

    <!-- Pause Panel -->
    <div class="pause-panel" id="pausePanel">
        <h3 id="pauseTitle">â¸ï¸ Jeu en Pause</h3>
        <p style="color: #ff88cc; margin: 30px 0; font-size: 1.2rem;" id="pauseMessage">Le jeu est actuellement en pause. Prenez votre temps !</p>
        <button class="quantum-btn" onclick="togglePause()" id="resumeBtn">â–¶ï¸ Reprendre</button>
    </div>

    <style>
        .global-close-btn { position: fixed; top: 14px; right: 14px; z-index: 99999; background: #ff3b3b; color: #fff; border: none; width:52px; height:52px; border-radius:50%; font-size:22px; cursor:pointer; box-shadow:0 6px 18px rgba(255,59,59,0.3);} 
        .global-close-btn:hover{ transform: scale(1.05); }
    </style>
    <button class="global-close-btn" title="Fermer" aria-label="Fermer" onclick="closePlatform()">âœ•</button>
    <script>
        function closePlatform(){
            try{ console.debug('jeux16: closePlatform called'); }catch(e){}
            try{
                if(window.parent && window.parent !== window){
                    window.parent.postMessage({ action: 'close', reason: 'user-initiated', source: 'jeux16' }, '*');
                    return;
                }
            }catch(e){}
            try{
                if(window.opener && !window.opener.closed){
                    try{ window.opener.postMessage({ action: 'child-closed', source: 'jeux16' }, '*'); }catch(e){}
                    try{ window.close(); }catch(e){}
                    return;
                }
            }catch(e){}
            try{ window.location.href = new URL('./brainova.html', window.location.href).href; }catch(e){}
        }
    </script>
    <script>
        const translations = {
            fr: {
                title: "Enigma Hunter",
                subtitle: "Chasseur d'Ã‰nigmes Quantiques avec IA",
                start: "ğŸš€ Commencer",
                pause: "â¸ï¸ Pause",
                resume: "â–¶ï¸ Reprendre",
                rules: "RÃ¨gles",
                newGame: "ğŸ”„ Nouveau Jeu",
                aiName: "CIPHER-AI",
                aiWelcome: "Salut ! Je suis CIPHER-AI, votre assistant quantique. PrÃªt Ã  rÃ©soudre des Ã©nigmes mystÃ©rieuses ?",
                statsTitle: "Statistiques",
                solved: "RÃ©solues:",
                failed: "Ã‰chouÃ©es:",
                streak: "SÃ©rie:",
                level: "Niveau:",
                score: "Score:",
                difficultyTitle: "DifficultÃ©",
                currentDiff: "Actuelle:",
                timeLeft: "Temps:",
                hintsLeft: "Indices:",
                objectiveName: "OBJECTIF",
                rulesMessage: "RÃ©solvez l'Ã©nigme avant la fin du temps imparti !",
                startMessage: "Cliquez sur \"Commencer\" pour dÃ©buter votre aventure de chasseur d'Ã©nigmes !",
                welcomeMessage: "Bienvenue dans Enigma Hunter ! RÃ©solvez des Ã©nigmes mystÃ©rieuses avec l'aide de votre IA.",
                rulesTitle: "ğŸ“– RÃ¨gles d'Enigma Hunter",
                pauseTitle: "â¸ï¸ Jeu en Pause",
                pauseMessage: "Le jeu est actuellement en pause. Prenez votre temps !",
                levelIndicator: "Niveau",
                closeBtn: "Fermer",
                submitBtn: "Valider",
                hintBtn: "Indice",
                hintTitle: "ğŸ’¡ Indice & Solution",
                solutionBtn: "Solution",
                progressTitle: "Progression du Niveau",
                inputPlaceholder: "Tapez votre rÃ©ponse ici...",
                difficulties: {
                    easy: "Facile",
                    medium: "Moyen",
                    hard: "Difficile",
                    expert: "Expert"
                },
                messages: {
                    correct: "ğŸ‰ Excellent ! Bonne rÃ©ponse !",
                    wrong: "âŒ Incorrect. Essayez encore !",
                    timeout: "â° Temps Ã©coulÃ© ! Passons Ã  la suivante.",
                    levelUp: "ğŸŠ Niveau supÃ©rieur ! FÃ©licitations !",
                    gameOver: "ğŸ Partie terminÃ©e ! Score final :",
                    hint: "ğŸ’¡ Voici un indice pour vous aider...",
                    noHints: "âŒ Plus d'indices disponibles !",
                    newRecord: "ğŸ† Nouveau record personnel !",
                    solutionRevealed: "Solution rÃ©vÃ©lÃ©e ! Passage au niveau suivant...",
                    encourageAfterSolution: "Ne vous dÃ©couragez pas ! Chaque Ã©nigme est une leÃ§on."
                },
                aiMessages: {
                    encouragement: [
                        "Vous y Ãªtes presque ! Continuez !",
                        "Excellente logique ! Poursuivez !",
                        "Votre raisonnement est bon !",
                        "Fantastique ! Vous progressez bien !"
                    ],
                    hints: [
                        "Pensez diffÃ©remment...",
                        "La rÃ©ponse est plus simple qu'elle n'y paraÃ®t.",
                        "Regardez les dÃ©tails attentivement.",
                        "Utilisez la logique Ã©tape par Ã©tape."
                    ]
                },
                rules: {
                    objectiveTitle: "ğŸ¯ Objectif",
                    objectiveText: "RÃ©solvez des Ã©nigmes de plus en plus complexes en utilisant votre logique et l'aide de votre IA assistant CIPHER-AI.",
                    gameplayTitle: "ğŸ® Gameplay",
                    variedEnigmas: "Ã‰nigmes variÃ©es:",
                    variedEnigmasDesc: "MathÃ©matiques, logique, mots, codes secrets",
                    timedChallenges: "Temps limitÃ©:",
                    timedChallengesDesc: "Chaque Ã©nigme a une limite de temps",
                    progressiveLevels: "Niveaux progressifs:",
                    progressiveLevelsDesc: "La difficultÃ© augmente avec votre progression",
                    hintSystem: "SystÃ¨me d'indices:",
                    hintSystemDesc: "Utilisez des indices pour vous aider",
                    solutionSystem: "Bouton Solution:",
                    solutionSystemDesc: "RÃ©vÃ©lez la rÃ©ponse si vous Ãªtes bloquÃ©",
                    scoringTitle: "ğŸ† SystÃ¨me de Score",
                    fastSolving: "RÃ©solution rapide:",
                    fastSolvingDesc: "Plus vous Ãªtes rapide, plus vous gagnez de points",
                    noHints: "Sans indices:",
                    noHintsDesc: "Bonus pour rÃ©soudre sans aide",
                    streaks: "SÃ©ries:",
                    streaksDesc: "Bonus pour les rÃ©solutions consÃ©cutives",
                    levelUnlock: "Niveaux:",
                    levelUnlockDesc: "DÃ©bloquez de nouveaux dÃ©fis"
                }
            },
            en: {
                title: "Enigma Hunter",
                subtitle: "Quantum Enigma Hunter with AI",
                start: "ğŸš€ Start",
                pause: "â¸ï¸ Pause",
                resume: "â–¶ï¸ Resume",
                rules: "Rules",
                newGame: "ğŸ”„ New Game",
                aiName: "CIPHER-AI",
                aiWelcome: "Hi! I'm CIPHER-AI, your quantum assistant. Ready to solve mysterious enigmas?",
                statsTitle: "Statistics",
                solved: "Solved:",
                failed: "Failed:",
                streak: "Streak:",
                level: "Level:",
                score: "Score:",
                difficultyTitle: "Difficulty",
                currentDiff: "Current:",
                timeLeft: "Time:",
                hintsLeft: "Hints:",
                objectiveName: "OBJECTIVE",
                rulesMessage: "Solve the enigma before time runs out!",
                startMessage: "Click \"Start\" to begin your enigma hunter adventure!",
                welcomeMessage: "Welcome to Enigma Hunter! Solve mysterious enigmas with your AI's help.",
                rulesTitle: "ğŸ“– Enigma Hunter Rules",
                pauseTitle: "â¸ï¸ Game Paused",
                pauseMessage: "The game is currently paused. Take your time!",
                levelIndicator: "Level",
                closeBtn: "Close",
                submitBtn: "Submit",
                hintBtn: "Hint",
                hintTitle: "ğŸ’¡ Hint & Solution",
                solutionBtn: "Solution",
                progressTitle: "Level Progress",
                inputPlaceholder: "Type your answer here...",
                difficulties: {
                    easy: "Easy",
                    medium: "Medium",
                    hard: "Hard",
                    expert: "Expert"
                },
                messages: {
                    correct: "ğŸ‰ Excellent! Correct answer!",
                    wrong: "âŒ Incorrect. Try again!",
                    timeout: "â° Time's up! Moving to the next one.",
                    levelUp: "ğŸŠ Level up! Congratulations!",
                    gameOver: "ğŸ Game over! Final score:",
                    hint: "ğŸ’¡ Here's a hint to help you...",
                    noHints: "âŒ No more hints available!",
                    newRecord: "ğŸ† New personal record!",
                    solutionRevealed: "Solution revealed! Moving to next level...",
                    encourageAfterSolution: "Don't get discouraged! Every enigma is a lesson."
                },
                aiMessages: {
                    encouragement: [
                        "You're almost there! Keep going!",
                        "Excellent logic! Continue!",
                        "Your reasoning is good!",
                        "Fantastic! You're progressing well!"
                    ],
                    hints: [
                        "Think differently...",
                        "The answer is simpler than it appears.",
                        "Look at the details carefully.",
                        "Use logic step by step."
                    ]
                },
                rules: {
                    objectiveTitle: "ğŸ¯ Objective",
                    objectiveText: "Solve increasingly complex enigmas using your logic and the help of your AI assistant CIPHER-AI.",
                    gameplayTitle: "ğŸ® Gameplay",
                    variedEnigmas: "Varied Enigmas:",
                    variedEnigmasDesc: "Mathematics, logic, words, secret codes",
                    timedChallenges: "Time Limited:",
                    timedChallengesDesc: "Each enigma has a time limit",
                    progressiveLevels: "Progressive Levels:",
                    progressiveLevelsDesc: "Difficulty increases with your progression",
                    hintSystem: "Hint System:",
                    hintSystemDesc: "Use hints to help you",
                    solutionSystem: "Solution Button:",
                    solutionSystemDesc: "Reveal the answer if you're stuck",
                    scoringTitle: "ğŸ† Scoring System",
                    fastSolving: "Fast Solving:",
                    fastSolvingDesc: "The faster you are, the more points you earn",
                    noHints: "No Hints:",
                    noHintsDesc: "Bonus for solving without help",
                    streaks: "Streaks:",
                    streaksDesc: "Bonus for consecutive solutions",
                    levelUnlock: "Levels:",
                    levelUnlockDesc: "Unlock new challenges"
                }
            },
            ar: {
                title: "ØµØ§Ø¦Ø¯ Ø§Ù„Ø£Ù„ØºØ§Ø²",
                subtitle: "ØµØ§Ø¦Ø¯ Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„ÙƒÙ…ÙŠ Ù…Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                start: "ğŸš€ Ø§Ø¨Ø¯Ø£",
                pause: "â¸ï¸ ØªÙˆÙ‚Ù",
                resume: "â–¶ï¸ Ø§Ø³ØªØ¦Ù†Ø§Ù",
                rules: "Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯",
                newGame: "ğŸ”„ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©",
                aiName: "Ø³Ø§ÙŠÙØ±-Ø¥ÙŠÙ‡ Ø¢ÙŠ",
                aiWelcome: "Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø³Ø§ÙŠÙØ±-Ø¥ÙŠÙ‡ Ø¢ÙŠØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„ÙƒÙ…ÙŠ. Ù…Ø³ØªØ¹Ø¯ Ù„Ø­Ù„ Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„ØºØ§Ù…Ø¶Ø©ØŸ",
                statsTitle: "Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",
                solved: "Ù…Ø­Ù„ÙˆÙ„Ø©:",
                failed: "ÙØ§Ø´Ù„Ø©:",
                streak: "Ø§Ù„Ø³Ù„Ø³Ù„Ø©:",
                level: "Ø§Ù„Ù…Ø³ØªÙˆÙ‰:",
                score: "Ø§Ù„Ù†Ù‚Ø§Ø·:",
                difficultyTitle: "Ø§Ù„ØµØ¹ÙˆØ¨Ø©",
                currentDiff: "Ø§Ù„Ø­Ø§Ù„ÙŠØ©:",
                timeLeft: "Ø§Ù„ÙˆÙ‚Øª:",
                hintsLeft: "Ø§Ù„ØªÙ„Ù…ÙŠØ­Ø§Øª:",
                objectiveName: "Ø§Ù„Ù‡Ø¯Ù",
                rulesMessage: "Ø­Ù„ Ø§Ù„Ù„ØºØ² Ù‚Ø¨Ù„ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª!",
                startMessage: "Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ \"Ø§Ø¨Ø¯Ø£\" Ù„Ø¨Ø¯Ø¡ Ù…ØºØ§Ù…Ø±Ø© ØµØ§Ø¦Ø¯ Ø§Ù„Ø£Ù„ØºØ§Ø²!",
                welcomeMessage: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØµØ§Ø¦Ø¯ Ø§Ù„Ø£Ù„ØºØ§Ø²! Ø­Ù„ Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„ØºØ§Ù…Ø¶Ø© Ø¨Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.",
                rulesTitle: "ğŸ“– Ù‚ÙˆØ§Ø¹Ø¯ ØµØ§Ø¦Ø¯ Ø§Ù„Ø£Ù„ØºØ§Ø²",
                pauseTitle: "â¸ï¸ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…ØªÙˆÙ‚ÙØ©",
                pauseMessage: "Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…ØªÙˆÙ‚ÙØ© Ø­Ø§Ù„ÙŠØ§Ù‹. Ø®Ø° ÙˆÙ‚ØªÙƒ!",
                levelIndicator: "Ø§Ù„Ù…Ø³ØªÙˆÙ‰",
                closeBtn: "Ø¥ØºÙ„Ø§Ù‚",
                submitBtn: "Ø¥Ø±Ø³Ø§Ù„",
                hintBtn: "ØªÙ„Ù…ÙŠØ­",
                hintTitle: "ğŸ’¡ ØªÙ„Ù…ÙŠØ­ Ùˆ Ø§Ù„Ø­Ù„",
                solutionBtn: "Ø§Ù„Ø­Ù„",
                progressTitle: "ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙˆÙ‰",
                inputPlaceholder: "Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§...",
                difficulties: {
                    easy: "Ø³Ù‡Ù„",
                    medium: "Ù…ØªÙˆØ³Ø·",
                    hard: "ØµØ¹Ø¨",
                    expert: "Ø®Ø¨ÙŠØ±"
                },
                messages: {
                    correct: "ğŸ‰ Ù…Ù…ØªØ§Ø²! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!",
                    wrong: "âŒ Ø®Ø·Ø£. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!",
                    timeout: "â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! Ù†Ù†ØªÙ‚Ù„ Ù„Ù„ØªØ§Ù„ÙŠ.",
                    levelUp: "ğŸŠ Ù…Ø³ØªÙˆÙ‰ Ø£Ø¹Ù„Ù‰! ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!",
                    gameOver: "ğŸ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©! Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:",
                    hint: "ğŸ’¡ Ø¥Ù„ÙŠÙƒ ØªÙ„Ù…ÙŠØ­ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ...",
                    noHints: "âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ„Ù…ÙŠØ­Ø§Øª Ù…ØªØ§Ø­Ø©!",
                    newRecord: "ğŸ† Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø´Ø®ØµÙŠ Ø¬Ø¯ÙŠØ¯!",
                    solutionRevealed: "ØªÙ… Ø§Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„Ø­Ù„! Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ...",
                    encourageAfterSolution: "Ù„Ø§ ØªÙŠØ£Ø³! ÙƒÙ„ Ù„ØºØ² Ø¯Ø±Ø³."
                },
                aiMessages: {
                    encouragement: [
                        "Ø£Ù†Øª Ù‚Ø±ÙŠØ¨ Ø¬Ø¯Ø§Ù‹! Ø§Ø³ØªÙ…Ø±!",
                        "Ù…Ù†Ø·Ù‚ Ù…Ù…ØªØ§Ø²! ØªØ§Ø¨Ø¹!",
                        "ØªÙÙƒÙŠØ±Ùƒ Ø¬ÙŠØ¯!",
                        "Ø±Ø§Ø¦Ø¹! ØªØªÙ‚Ø¯Ù… Ø¨Ø´ÙƒÙ„ Ø¬ÙŠØ¯!"
                    ],
                    hints: [
                        "ÙÙƒØ± Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø®ØªÙ„ÙØ©...",
                        "Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø£Ø¨Ø³Ø· Ù…Ù…Ø§ ØªØ¨Ø¯Ùˆ.",
                        "Ø§Ù†Ø¸Ø± Ù„Ù„ØªÙØ§ØµÙŠÙ„ Ø¨Ø¹Ù†Ø§ÙŠØ©.",
                        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù†Ø·Ù‚ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©."
                    ]
                },
                rules: {
                    objectiveTitle: "ğŸ¯ Ø§Ù„Ù‡Ø¯Ù",
                    objectiveText: "Ø­Ù„ Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© Ø¨Ø´ÙƒÙ„ Ù…ØªØ²Ø§ÙŠØ¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ù†Ø·Ù‚Ùƒ ÙˆÙ…Ø³Ø§Ø¹Ø¯Ø© Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø³Ø§ÙŠÙØ±-Ø¥ÙŠÙ‡ Ø¢ÙŠ.",
                    gameplayTitle: "ğŸ® Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨",
                    variedEnigmas: "Ø£Ù„ØºØ§Ø² Ù…ØªÙ†ÙˆØ¹Ø©:",
                    variedEnigmasDesc: "Ø±ÙŠØ§Ø¶ÙŠØ§ØªØŒ Ù…Ù†Ø·Ù‚ØŒ ÙƒÙ„Ù…Ø§ØªØŒ Ø±Ù…ÙˆØ² Ø³Ø±ÙŠØ©",
                    timedChallenges: "ÙˆÙ‚Øª Ù…Ø­Ø¯ÙˆØ¯:",
                    timedChallengesDesc: "ÙƒÙ„ Ù„ØºØ² Ù„Ù‡ Ø­Ø¯ Ø²Ù…Ù†ÙŠ",
                    progressiveLevels: "Ù…Ø³ØªÙˆÙŠØ§Øª ØªØ¯Ø±ÙŠØ¬ÙŠØ©:",
                    progressiveLevelsDesc: "ØªØ²Ø¯Ø§Ø¯ Ø§Ù„ØµØ¹ÙˆØ¨Ø© Ù…Ø¹ ØªÙ‚Ø¯Ù…Ùƒ",
                    hintSystem: "Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ„Ù…ÙŠØ­Ø§Øª:",
                    hintSystemDesc: "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªÙ„Ù…ÙŠØ­Ø§Øª Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ",
                    solutionSystem: "Ø²Ø± Ø§Ù„Ø­Ù„:",
                    solutionSystemDesc: "Ø§ÙƒØ´Ù Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¥Ø°Ø§ ÙƒÙ†Øª Ø¹Ø§Ù„Ù‚Ø§Ù‹",
                    scoringTitle: "ğŸ† Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·",
                    fastSolving: "Ø§Ù„Ø­Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹:",
                    fastSolvingDesc: "ÙƒÙ„Ù…Ø§ ÙƒÙ†Øª Ø£Ø³Ø±Ø¹ØŒ ÙƒÙ„Ù…Ø§ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø· Ø£ÙƒØ«Ø±",
                    noHints: "Ø¨Ø¯ÙˆÙ† ØªÙ„Ù…ÙŠØ­Ø§Øª:",
                    noHintsDesc: "Ù…ÙƒØ§ÙØ£Ø© Ù„Ù„Ø­Ù„ Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø§Ø¹Ø¯Ø©",
                    streaks: "Ø§Ù„Ø³Ù„Ø§Ø³Ù„:",
                    streaksDesc: "Ù…ÙƒØ§ÙØ£Ø© Ù„Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ©",
                    levelUnlock: "Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª:",
                    levelUnlockDesc: "Ø§ÙØªØ­ ØªØ­Ø¯ÙŠØ§Øª Ø¬Ø¯ÙŠØ¯Ø©"
                }
            },
            es: {
                title: "Enigma Hunter",
                subtitle: "Cazador de Enigmas CuÃ¡ntico con IA",
                start: "ğŸš€ Comenzar",
                pause: "â¸ï¸ Pausa",
                resume: "â–¶ï¸ Reanudar",
                rules: "Reglas",
                newGame: "ğŸ”„ Nuevo Juego",
                aiName: "CIPHER-AI",
                aiWelcome: "Â¡Hola! Soy CIPHER-AI, tu asistente cuÃ¡ntico. Â¿Listo para resolver enigmas misteriosos?",
                statsTitle: "EstadÃ­sticas",
                solved: "Resueltos:",
                failed: "Fallados:",
                streak: "Racha:",
                level: "Nivel:",
                score: "PuntuaciÃ³n:",
                difficultyTitle: "Dificultad",
                currentDiff: "Actual:",
                timeLeft: "Tiempo:",
                hintsLeft: "Pistas:",
                objectiveName: "OBJETIVO",
                rulesMessage: "Â¡Resuelve el enigma antes de que se acabe el tiempo!",
                startMessage: "Â¡Haz clic en \"Comenzar\" para iniciar tu aventura de cazador de enigmas!",
                welcomeMessage: "Â¡Bienvenido a Enigma Hunter! Resuelve enigmas misteriosos con la ayuda de tu IA.",
                rulesTitle: "ğŸ“– Reglas de Enigma Hunter",
                pauseTitle: "â¸ï¸ Juego Pausado",
                pauseMessage: "El juego estÃ¡ actualmente pausado. Â¡TÃ³mate tu tiempo!",
                levelIndicator: "Nivel",
                closeBtn: "Cerrar",
                submitBtn: "Enviar",
                hintBtn: "Pista",
                hintTitle: "ğŸ’¡ Pista y SoluciÃ³n",
                solutionBtn: "SoluciÃ³n",
                progressTitle: "Progreso del Nivel",
                inputPlaceholder: "Escribe tu respuesta aquÃ­...",
                difficulties: {
                    easy: "FÃ¡cil",
                    medium: "Medio",
                    hard: "DifÃ­cil",
                    expert: "Experto"
                },
                messages: {
                    correct: "ğŸ‰ Â¡Excelente! Â¡Respuesta correcta!",
                    wrong: "âŒ Incorrecto. Â¡IntÃ©ntalo de nuevo!",
                    timeout: "â° Â¡Se acabÃ³ el tiempo! Pasando al siguiente.",
                    levelUp: "ğŸŠ Â¡Subiste de nivel! Â¡Felicitaciones!",
                    gameOver: "ğŸ Â¡Juego terminado! PuntuaciÃ³n final:",
                    hint: "ğŸ’¡ AquÃ­ tienes una pista para ayudarte...",
                    noHints: "âŒ Â¡No hay mÃ¡s pistas disponibles!",
                    newRecord: "ğŸ† Â¡Nuevo rÃ©cord personal!",
                    solutionRevealed: "Â¡SoluciÃ³n revelada! Pasando al siguiente nivel...",
                    encourageAfterSolution: "Â¡No te desanimes! Cada enigma es una lecciÃ³n."
                },
                aiMessages: {
                    encouragement: [
                        "Â¡Casi lo tienes! Â¡Sigue asÃ­!",
                        "Â¡Excelente lÃ³gica! Â¡ContinÃºa!",
                        "Â¡Tu razonamiento es bueno!",
                        "Â¡FantÃ¡stico! EstÃ¡s progresando bien!"
                    ],
                    hints: [
                        "Piensa diferente...",
                        "La respuesta es mÃ¡s simple de lo que parece.",
                        "Mira los detalles cuidadosamente.",
                        "Usa la lÃ³gica paso a paso."
                    ]
                },
                rules: {
                    objectiveTitle: "ğŸ¯ Objetivo",
                    objectiveText: "Resuelve enigmas cada vez mÃ¡s complejos usando tu lÃ³gica y la ayuda de tu asistente IA CIPHER-AI.",
                    gameplayTitle: "ğŸ® Jugabilidad",
                    variedEnigmas: "Enigmas Variados:",
                    variedEnigmasDesc: "MatemÃ¡ticas, lÃ³gica, palabras, cÃ³digos secretos",
                    timedChallenges: "Tiempo Limitado:",
                    timedChallengesDesc: "Cada enigma tiene un lÃ­mite de tiempo",
                    progressiveLevels: "Niveles Progresivos:",
                    progressiveLevelsDesc: "La dificultad aumenta con tu progreso",
                    hintSystem: "Sistema de Pistas:",
                    hintSystemDesc: "Usa pistas para ayudarte",
                    solutionSystem: "BotÃ³n SoluciÃ³n:",
                    solutionSystemDesc: "Revela la respuesta si estÃ¡s atascado",
                    scoringTitle: "ğŸ† Sistema de PuntuaciÃ³n",
                    fastSolving: "ResoluciÃ³n RÃ¡pida:",
                    fastSolvingDesc: "Cuanto mÃ¡s rÃ¡pido seas, mÃ¡s puntos ganas",
                    noHints: "Sin Pistas:",
                    noHintsDesc: "BonificaciÃ³n por resolver sin ayuda",
                    streaks: "Rachas:",
                    streaksDesc: "BonificaciÃ³n por soluciones consecutivas",
                    levelUnlock: "Niveles:",
                    levelUnlockDesc: "Desbloquea nuevos desafÃ­os"
                }
            },
            de: {
                title: "Enigma Hunter",
                subtitle: "Quantum RÃ¤tsel-JÃ¤ger mit KI",
                start: "ğŸš€ Starten",
                pause: "â¸ï¸ Pause",
                resume: "â–¶ï¸ Fortsetzen",
                rules: "Regeln",
                newGame: "ğŸ”„ Neues Spiel",
                aiName: "CIPHER-AI",
                aiWelcome: "Hallo! Ich bin CIPHER-AI, dein Quantum-Assistent. Bereit, geheimnisvolle RÃ¤tsel zu lÃ¶sen?",
                statsTitle: "Statistiken",
                solved: "GelÃ¶st:",
                failed: "Gescheitert:",
                streak: "Serie:",
                level: "Level:",
                score: "Punkte:",
                difficultyTitle: "Schwierigkeit",
                currentDiff: "Aktuell:",
                timeLeft: "Zeit:",
                hintsLeft: "Hinweise:",
                objectiveName: "ZIEL",
                rulesMessage: "LÃ¶se das RÃ¤tsel bevor die Zeit ablÃ¤uft!",
                startMessage: "Klicke \"Starten\" um dein RÃ¤tsel-JÃ¤ger Abenteuer zu beginnen!",
                welcomeMessage: "Willkommen bei Enigma Hunter! LÃ¶se geheimnisvolle RÃ¤tsel mit Hilfe deiner KI.",
                rulesTitle: "ğŸ“– Enigma Hunter Regeln",
                pauseTitle: "â¸ï¸ Spiel Pausiert",
                pauseMessage: "Das Spiel ist derzeit pausiert. Lass dir Zeit!",
                levelIndicator: "Level",
                closeBtn: "SchlieÃŸen",
                submitBtn: "Senden",
                hintBtn: "Hinweis",
                hintTitle: "ğŸ’¡ Hinweis & LÃ¶sung",
                solutionBtn: "LÃ¶sung",
                progressTitle: "Level-Fortschritt",
                inputPlaceholder: "Gib deine Antwort hier ein...",
                difficulties: {
                    easy: "Einfach",
                    medium: "Mittel",
                    hard: "Schwer",
                    expert: "Experte"
                },
                messages: {
                    correct: "ğŸ‰ Ausgezeichnet! Richtige Antwort!",
                    wrong: "âŒ Falsch. Versuche es nochmal!",
                    timeout: "â° Zeit ist um! Weiter zum nÃ¤chsten.",
                    levelUp: "ğŸŠ Level aufgestiegen! GlÃ¼ckwunsch!",
                    gameOver: "ğŸ Spiel vorbei! Endpunktzahl:",
                    hint: "ğŸ’¡ Hier ist ein Hinweis um dir zu helfen...",
                    noHints: "âŒ Keine Hinweise mehr verfÃ¼gbar!",
                    newRecord: "ğŸ† Neuer persÃ¶nlicher Rekord!"
                },
                aiMessages: {
                    encouragement: [
                        "Du bist fast da! Mach weiter!",
                        "Ausgezeichnete Logik! Weiter so!",
                        "Deine Ãœberlegung ist gut!",
                        "Fantastisch! Du machst gute Fortschritte!"
                    ],
                    hints: [
                        "Denk anders...",
                        "Die Antwort ist einfacher als sie scheint.",
                        "Schau dir die Details genau an.",
                        "Verwende Logik Schritt fÃ¼r Schritt."
                    ]
                },
                rules: {
                    objectiveTitle: "ğŸ¯ Ziel",
                    objectiveText: "LÃ¶se zunehmend komplexe RÃ¤tsel mit deiner Logik und der Hilfe deines KI-Assistenten CIPHER-AI.",
                    gameplayTitle: "ğŸ® Spielweise",
                    variedEnigmas: "VielfÃ¤ltige RÃ¤tsel:",
                    variedEnigmasDesc: "Mathematik, Logik, WÃ¶rter, Geheimcodes",
                    timedChallenges: "Zeitbegrenzt:",
                    timedChallengesDesc: "Jedes RÃ¤tsel hat ein Zeitlimit",
                    progressiveLevels: "Progressive Level:",
                    progressiveLevelsDesc: "Die Schwierigkeit steigt mit deinem Fortschritt",
                    hintSystem: "Hinweis-System:",
                    hintSystemDesc: "Verwende Hinweise um dir zu helfen",
                    solutionSystem: "LÃ¶sungs-Button:",
                    solutionSystemDesc: "Zeige die Antwort wenn du feststeckst",
                    scoringTitle: "ğŸ† Punktesystem",
                    fastSolving: "Schnelles LÃ¶sen:",
                    fastSolvingDesc: "Je schneller du bist, desto mehr Punkte erhÃ¤ltst du",
                    noHints: "Ohne Hinweise:",
                    noHintsDesc: "Bonus fÃ¼r das LÃ¶sen ohne Hilfe",
                    streaks: "Serien:",
                    streaksDesc: "Bonus fÃ¼r aufeinanderfolgende LÃ¶sungen",
                    levelUnlock: "Level:",
                    levelUnlockDesc: "Schalte neue Herausforderungen frei"
                }
            },
            zh: {
                title: "è°œé¢˜çŒäºº",
                subtitle: "é‡å­è°œé¢˜çŒäººä¸AI",
                start: "ğŸš€ å¼€å§‹",
                pause: "â¸ï¸ æš‚åœ",
                resume: "â–¶ï¸ ç»§ç»­",
                rules: "è§„åˆ™",
                newGame: "ğŸ”„ æ–°æ¸¸æˆ",
                aiName: "å¯†ç -AI",
                aiWelcome: "ä½ å¥½ï¼æˆ‘æ˜¯å¯†ç -AIï¼Œä½ çš„é‡å­åŠ©æ‰‹ã€‚å‡†å¤‡å¥½è§£å†³ç¥ç§˜è°œé¢˜äº†å—ï¼Ÿ",
                statsTitle: "ç»Ÿè®¡",
                solved: "å·²è§£å†³:",
                failed: "å¤±è´¥:",
                streak: "è¿èƒœ:",
                level: "ç­‰çº§:",
                score: "åˆ†æ•°:",
                difficultyTitle: "éš¾åº¦",
                currentDiff: "å½“å‰:",
                timeLeft: "æ—¶é—´:",
                hintsLeft: "æç¤º:",
                objectiveName: "ç›®æ ‡",
                rulesMessage: "åœ¨æ—¶é—´ç”¨å®Œä¹‹å‰è§£å†³è°œé¢˜ï¼",
                startMessage: "ç‚¹å‡»\"å¼€å§‹\"å¼€å§‹ä½ çš„è°œé¢˜çŒäººå†’é™©ï¼",
                welcomeMessage: "æ¬¢è¿æ¥åˆ°è°œé¢˜çŒäººï¼åœ¨AIçš„å¸®åŠ©ä¸‹è§£å†³ç¥ç§˜è°œé¢˜ã€‚",
                rulesTitle: "ğŸ“– è°œé¢˜çŒäººè§„åˆ™",
                pauseTitle: "â¸ï¸ æ¸¸æˆæš‚åœ",
                pauseMessage: "æ¸¸æˆå½“å‰å·²æš‚åœã€‚æ…¢æ…¢æ¥ï¼",
                levelIndicator: "ç­‰çº§",
                closeBtn: "å…³é—­",
                submitBtn: "æäº¤",
                hintBtn: "æç¤º",
                hintTitle: "ğŸ’¡ æç¤ºä¸ç­”æ¡ˆ",
                solutionBtn: "ç­”æ¡ˆ",
                progressTitle: "ç­‰çº§è¿›åº¦",
                inputPlaceholder: "åœ¨è¿™é‡Œè¾“å…¥ä½ çš„ç­”æ¡ˆ...",
                difficulties: {
                    easy: "ç®€å•",
                    medium: "ä¸­ç­‰",
                    hard: "å›°éš¾",
                    expert: "ä¸“å®¶"
                },
                messages: {
                    correct: "ğŸ‰ å¤ªæ£’äº†ï¼ç­”æ¡ˆæ­£ç¡®ï¼",
                    wrong: "âŒ é”™è¯¯ã€‚å†è¯•ä¸€æ¬¡ï¼",
                    timeout: "â° æ—¶é—´åˆ°ï¼è¿›å…¥ä¸‹ä¸€é¢˜ã€‚",
                    levelUp: "ğŸŠ å‡çº§äº†ï¼æ­å–œï¼",
                    gameOver: "ğŸ æ¸¸æˆç»“æŸï¼æœ€ç»ˆå¾—åˆ†ï¼š",
                    hint: "ğŸ’¡ è¿™é‡Œæœ‰ä¸ªæç¤ºå¸®åŠ©ä½ ...",
                    noHints: "âŒ æ²¡æœ‰æ›´å¤šæç¤ºäº†ï¼",
                    newRecord: "ğŸ† æ–°çš„ä¸ªäººè®°å½•ï¼"
                },
                aiMessages: {
                    encouragement: [
                        "ä½ å¿«æˆåŠŸäº†ï¼ç»§ç»­ï¼",
                        "é€»è¾‘å¾ˆæ£’ï¼ç»§ç»­ï¼",
                        "ä½ çš„æ¨ç†å¾ˆå¥½ï¼",
                        "å¤ªæ£’äº†ï¼ä½ è¿›æ­¥å¾ˆå¥½ï¼"
                    ],
                    hints: [
                        "æ¢ä¸ªè§’åº¦æ€è€ƒ...",
                        "ç­”æ¡ˆæ¯”çœ‹èµ·æ¥ç®€å•ã€‚",
                        "ä»”ç»†çœ‹ç»†èŠ‚ã€‚",
                        "ä¸€æ­¥æ­¥ä½¿ç”¨é€»è¾‘ã€‚"
                    ]
                },
                rules: {
                    objectiveTitle: "ğŸ¯ ç›®æ ‡",
                    objectiveText: "ä½¿ç”¨ä½ çš„é€»è¾‘å’ŒAIåŠ©æ‰‹å¯†ç -AIçš„å¸®åŠ©è§£å†³è¶Šæ¥è¶Šå¤æ‚çš„è°œé¢˜ã€‚",
                    gameplayTitle: "ğŸ® æ¸¸æˆç©æ³•",
                    variedEnigmas: "å¤šæ ·è°œé¢˜:",
                    variedEnigmasDesc: "æ•°å­¦ã€é€»è¾‘ã€æ–‡å­—ã€å¯†ç ",
                    timedChallenges: "é™æ—¶æŒ‘æˆ˜:",
                    timedChallengesDesc: "æ¯ä¸ªè°œé¢˜éƒ½æœ‰æ—¶é—´é™åˆ¶",
                    progressiveLevels: "æ¸è¿›ç­‰çº§:",
                    progressiveLevelsDesc: "éš¾åº¦éšç€ä½ çš„è¿›æ­¥è€Œå¢åŠ ",
                    hintSystem: "æç¤ºç³»ç»Ÿ:",
                    hintSystemDesc: "ä½¿ç”¨æç¤ºæ¥å¸®åŠ©ä½ ",
                    solutionSystem: "ç­”æ¡ˆæŒ‰é’®:",
                    solutionSystemDesc: "å¦‚æœå¡ä½äº†å°±æ˜¾ç¤ºç­”æ¡ˆ",
                    scoringTitle: "ğŸ† è®¡åˆ†ç³»ç»Ÿ",
                    fastSolving: "å¿«é€Ÿè§£å†³:",
                    fastSolvingDesc: "ä½ è¶Šå¿«ï¼Œå¾—åˆ°çš„åˆ†æ•°è¶Šå¤š",
                    noHints: "æ— æç¤º:",
                    noHintsDesc: "æ— å¸®åŠ©è§£å†³çš„å¥–åŠ±",
                    streaks: "è¿èƒœ:",
                    streaksDesc: "è¿ç»­è§£å†³çš„å¥–åŠ±",
                    levelUnlock: "ç­‰çº§:",
                    levelUnlockDesc: "è§£é”æ–°æŒ‘æˆ˜"
                }
            }
        };

        let currentLanguage = 'fr';
        let gameState = {
            isPlaying: false,
            isPaused: false,
            currentEnigma: null,
            level: 1,
            score: 0,
            solved: 0,
            failed: 0,
            streak: 0,
            hintsLeft: 3,
            timeLeft: 0,
            timer: null,
            difficulty: 'easy',
            enigmasInLevel: 0,
            enigmasNeededForLevel: 3,
            usedEnigmas: {
                easy: [],
                medium: [],
                hard: []
            }
        };

        const enigmas = {
            fr: {
                easy: [
                    { question: "Quel est le rÃ©sultat de 15 + 27 ?", answer: "42", hint: "Additionnez simplement les deux nombres.", time: 30 },
                    { question: "ComplÃ©tez la sÃ©quence : 2, 4, 6, 8, ?", answer: "10", hint: "C'est une suite de nombres pairs.", time: 25 },
                    { question: "Quel mot peut Ãªtre lu de la mÃªme faÃ§on Ã  l'endroit et Ã  l'envers ?", answer: "radar", hint: "C'est un palindrome de 5 lettres utilisÃ© pour dÃ©tecter.", time: 40 },
                    { question: "Combien font 8 Ã— 7 ?", answer: "56", hint: "Multipliez 8 par 7.", time: 20 },
                    { question: "Quel est le double de 25 ?", answer: "50", hint: "Multipliez 25 par 2.", time: 20 }
                ],
                medium: [
                    { question: "RÃ©solvez : 3x + 7 = 22. Que vaut x ?", answer: "5", hint: "Soustrayez 7 des deux cÃ´tÃ©s, puis divisez par 3.", time: 60 },
                    { question: "Quel est l'anagramme de 'LISTEN' ?", answer: "silent", hint: "RÃ©arrangez les lettres pour former un mot opposÃ©.", time: 50 },
                    { question: "Dans une suite de Fibonacci, aprÃ¨s 1, 1, 2, 3, 5, quel est le nombre suivant ?", answer: "8", hint: "Chaque nombre est la somme des deux prÃ©cÃ©dents.", time: 40 }
                ],
                hard: [
                    { question: "DÃ©codez ce message CÃ©sar (dÃ©calage de 3) : 'FDHVDU'", answer: "caesar", hint: "Reculez chaque lettre de 3 positions dans l'alphabet.", time: 90 },
                    { question: "Quel est le plus petit nombre premier supÃ©rieur Ã  50 ?", answer: "53", hint: "Testez la divisibilitÃ© par les nombres premiers jusqu'Ã  sa racine carrÃ©e.", time: 75 }
                ]
            },
            en: {
                easy: [
                    { question: "What is 15 + 27?", answer: "42", hint: "Simply add the two numbers together.", time: 30 },
                    { question: "Complete the sequence: 2, 4, 6, 8, ?", answer: "10", hint: "It's a sequence of even numbers.", time: 25 },
                    { question: "What word can be read the same forwards and backwards?", answer: "radar", hint: "It's a 5-letter palindrome used for detection.", time: 40 },
                    { question: "What is 8 Ã— 7?", answer: "56", hint: "Multiply 8 by 7.", time: 20 },
                    { question: "What is double 25?", answer: "50", hint: "Multiply 25 by 2.", time: 20 }
                ],
                medium: [
                    { question: "Solve: 3x + 7 = 22. What is x?", answer: "5", hint: "Subtract 7 from both sides, then divide by 3.", time: 60 },
                    { question: "What is the anagram of 'LISTEN'?", answer: "silent", hint: "Rearrange the letters to form an opposite word.", time: 50 },
                    { question: "In Fibonacci sequence, after 1, 1, 2, 3, 5, what's next?", answer: "8", hint: "Each number is the sum of the two preceding ones.", time: 40 }
                ],
                hard: [
                    { question: "Decode this Caesar cipher (shift 3): 'FDHVDU'", answer: "caesar", hint: "Move each letter back 3 positions in the alphabet.", time: 90 },
                    { question: "What is the smallest prime number greater than 50?", answer: "53", hint: "Test divisibility by prime numbers up to its square root.", time: 75 }
                ]
            },
            ar: {
                easy: [
                    { question: "Ù…Ø§ Ù‡Ùˆ Ù†Ø§ØªØ¬ 15 + 27ØŸ", answer: "42", hint: "Ø§Ø¬Ù…Ø¹ Ø§Ù„Ø±Ù‚Ù…ÙŠÙ† Ø¨Ø¨Ø³Ø§Ø·Ø©.", time: 30 },
                    { question: "Ø£ÙƒÙ…Ù„ Ø§Ù„ØªØ³Ù„Ø³Ù„: 2ØŒ 4ØŒ 6ØŒ 8ØŒ ØŸ", answer: "10", hint: "Ø¥Ù†Ù‡ ØªØ³Ù„Ø³Ù„ Ù…Ù† Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø²ÙˆØ¬ÙŠØ©.", time: 25 },
                    { question: "Ù…Ø§ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØªÙŠ ØªÙÙ‚Ø±Ø£ Ø¨Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ù…Ù† Ø§Ù„Ø£Ù…Ø§Ù… ÙˆØ§Ù„Ø®Ù„ÙØŸ", answer: "Ø±Ø§Ø¯Ø§Ø±", hint: "Ø¥Ù†Ù‡Ø§ ÙƒÙ„Ù…Ø© Ù…ØªÙ†Ø§Ø¸Ø±Ø© Ù…Ù† 5 Ø£Ø­Ø±Ù ØªÙØ³ØªØ®Ø¯Ù… Ù„Ù„ÙƒØ´Ù.", time: 40 },
                    { question: "ÙƒÙ… ÙŠØ³Ø§ÙˆÙŠ 8 Ã— 7ØŸ", answer: "56", hint: "Ø§Ø¶Ø±Ø¨ 8 ÙÙŠ 7.", time: 20 },
                    { question: "Ù…Ø§ Ù‡Ùˆ Ø¶Ø¹Ù 25ØŸ", answer: "50", hint: "Ø§Ø¶Ø±Ø¨ 25 ÙÙŠ 2.", time: 20 }
                ],
                medium: [
                    { question: "Ø­Ù„: 3Ø³ + 7 = 22. Ù…Ø§ Ù‚ÙŠÙ…Ø© Ø³ØŸ", answer: "5", hint: "Ø§Ø·Ø±Ø­ 7 Ù…Ù† Ø§Ù„Ø·Ø±ÙÙŠÙ†ØŒ Ø«Ù… Ø§Ù‚Ø³Ù… Ø¹Ù„Ù‰ 3.", time: 60 },
                    { question: "Ù…Ø§ Ù‡Ùˆ ØªØ¨Ø¯ÙŠÙ„ Ø£Ø­Ø±Ù 'LISTEN'ØŸ", answer: "silent", hint: "Ø£Ø¹Ø¯ ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ø­Ø±Ù Ù„ØªÙƒÙˆÙŠÙ† ÙƒÙ„Ù…Ø© Ù…Ø¹Ø§ÙƒØ³Ø©.", time: 50 },
                    { question: "ÙÙŠ Ù…ØªØªØ§Ù„ÙŠØ© ÙÙŠØ¨ÙˆÙ†Ø§ØªØ´ÙŠØŒ Ø¨Ø¹Ø¯ 1ØŒ 1ØŒ 2ØŒ 3ØŒ 5ØŒ Ù…Ø§ Ø§Ù„ØªØ§Ù„ÙŠØŸ", answer: "8", hint: "ÙƒÙ„ Ø±Ù‚Ù… Ù‡Ùˆ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø±Ù‚Ù…ÙŠÙ† Ø§Ù„Ø³Ø§Ø¨Ù‚ÙŠÙ†.", time: 40 }
                ],
                hard: [
                    { question: "ÙÙƒ ØªØ´ÙÙŠØ± Ù‚ÙŠØµØ± (Ø¥Ø²Ø§Ø­Ø© 3): 'FDHVDU'", answer: "caesar", hint: "Ø­Ø±Ùƒ ÙƒÙ„ Ø­Ø±Ù 3 Ù…ÙˆØ§Ø¶Ø¹ Ù„Ù„Ø®Ù„Ù ÙÙŠ Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ©.", time: 90 },
                    { question: "Ù…Ø§ Ø£ØµØºØ± Ø¹Ø¯Ø¯ Ø£ÙˆÙ„ÙŠ Ø£ÙƒØ¨Ø± Ù…Ù† 50ØŸ", answer: "53", hint: "Ø§Ø®ØªØ¨Ø± Ø§Ù„Ù‚Ø³Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ø­ØªÙ‰ Ø¬Ø°Ø±Ù‡ Ø§Ù„ØªØ±Ø¨ÙŠØ¹ÙŠ.", time: 75 }
                ]
            },
            es: {
                easy: [
                    { question: "Â¿CuÃ¡nto es 15 + 27?", answer: "42", hint: "Simplemente suma los dos nÃºmeros.", time: 30 },
                    { question: "Completa la secuencia: 2, 4, 6, 8, ?", answer: "10", hint: "Es una secuencia de nÃºmeros pares.", time: 25 },
                    { question: "Â¿QuÃ© palabra se lee igual hacia adelante y hacia atrÃ¡s?", answer: "radar", hint: "Es un palÃ­ndromo de 5 letras usado para detectar.", time: 40 },
                    { question: "Â¿CuÃ¡nto es 8 Ã— 7?", answer: "56", hint: "Multiplica 8 por 7.", time: 20 },
                    { question: "Â¿CuÃ¡l es el doble de 25?", answer: "50", hint: "Multiplica 25 por 2.", time: 20 }
                ],
                medium: [
                    { question: "Resuelve: 3x + 7 = 22. Â¿CuÃ¡l es x?", answer: "5", hint: "Resta 7 de ambos lados, luego divide por 3.", time: 60 },
                    { question: "Â¿CuÃ¡l es el anagrama de 'LISTEN'?", answer: "silent", hint: "Reorganiza las letras para formar una palabra opuesta.", time: 50 },
                    { question: "En la secuencia de Fibonacci, despuÃ©s de 1, 1, 2, 3, 5, Â¿quÃ© sigue?", answer: "8", hint: "Cada nÃºmero es la suma de los dos anteriores.", time: 40 }
                ],
                hard: [
                    { question: "Decodifica este cifrado CÃ©sar (desplazamiento 3): 'FDHVDU'", answer: "caesar", hint: "Mueve cada letra 3 posiciones hacia atrÃ¡s en el alfabeto.", time: 90 },
                    { question: "Â¿CuÃ¡l es el nÃºmero primo mÃ¡s pequeÃ±o mayor que 50?", answer: "53", hint: "Prueba la divisibilidad por nÃºmeros primos hasta su raÃ­z cuadrada.", time: 75 }
                ]
            },
            de: {
                easy: [
                    { question: "Was ist 15 + 27?", answer: "42", hint: "Addiere einfach die beiden Zahlen.", time: 30 },
                    { question: "VervollstÃ¤ndige die Sequenz: 2, 4, 6, 8, ?", answer: "10", hint: "Es ist eine Folge gerader Zahlen.", time: 25 },
                    { question: "Welches Wort kann vorwÃ¤rts und rÃ¼ckwÃ¤rts gleich gelesen werden?", answer: "radar", hint: "Es ist ein 5-Buchstaben-Palindrom zur Erkennung.", time: 40 },
                    { question: "Was ist 8 Ã— 7?", answer: "56", hint: "Multipliziere 8 mit 7.", time: 20 },
                    { question: "Was ist das Doppelte von 25?", answer: "50", hint: "Multipliziere 25 mit 2.", time: 20 }
                ],
                medium: [
                    { question: "LÃ¶se: 3x + 7 = 22. Was ist x?", answer: "5", hint: "Subtrahiere 7 von beiden Seiten, dann teile durch 3.", time: 60 },
                    { question: "Was ist das Anagramm von 'LISTEN'?", answer: "silent", hint: "Ordne die Buchstaben neu, um ein gegenteiliges Wort zu bilden.", time: 50 },
                    { question: "In der Fibonacci-Folge, nach 1, 1, 2, 3, 5, was kommt als nÃ¤chstes?", answer: "8", hint: "Jede Zahl ist die Summe der beiden vorhergehenden.", time: 40 }
                ],
                hard: [
                    { question: "EntschlÃ¼ssele diese Caesar-Chiffre (Verschiebung 3): 'FDHVDU'", answer: "caesar", hint: "Bewege jeden Buchstaben 3 Positionen im Alphabet zurÃ¼ck.", time: 90 },
                    { question: "Was ist die kleinste Primzahl grÃ¶ÃŸer als 50?", answer: "53", hint: "Teste die Teilbarkeit durch Primzahlen bis zu ihrer Quadratwurzel.", time: 75 }
                ]
            },
            zh: {
                easy: [
                    { question: "15 + 27 ç­‰äºå¤šå°‘ï¼Ÿ", answer: "42", hint: "ç®€å•åœ°å°†ä¸¤ä¸ªæ•°å­—ç›¸åŠ ã€‚", time: 30 },
                    { question: "å®Œæˆåºåˆ—ï¼š2, 4, 6, 8, ?", answer: "10", hint: "è¿™æ˜¯ä¸€ä¸ªå¶æ•°åºåˆ—ã€‚", time: 25 },
                    { question: "ä»€ä¹ˆè¯æ­£è¯»åè¯»éƒ½ä¸€æ ·ï¼Ÿ", answer: "radar", hint: "è¿™æ˜¯ä¸€ä¸ªç”¨äºæ¢æµ‹çš„5å­—æ¯å›æ–‡è¯ã€‚", time: 40 },
                    { question: "8 Ã— 7 ç­‰äºå¤šå°‘ï¼Ÿ", answer: "56", hint: "å°†8ä¹˜ä»¥7ã€‚", time: 20 },
                    { question: "25çš„ä¸¤å€æ˜¯å¤šå°‘ï¼Ÿ", answer: "50", hint: "å°†25ä¹˜ä»¥2ã€‚", time: 20 }
                ],
                medium: [
                    { question: "è§£ï¼š3x + 7 = 22ã€‚xç­‰äºå¤šå°‘ï¼Ÿ", answer: "5", hint: "ä¸¤è¾¹éƒ½å‡å»7ï¼Œç„¶åé™¤ä»¥3ã€‚", time: 60 },
                    { question: "'LISTEN'çš„å­—æ¯é‡ç»„è¯æ˜¯ä»€ä¹ˆï¼Ÿ", answer: "silent", hint: "é‡æ–°æ’åˆ—å­—æ¯å½¢æˆä¸€ä¸ªç›¸åçš„è¯ã€‚", time: 50 },
                    { question: "åœ¨æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­ï¼Œ1, 1, 2, 3, 5ä¹‹åæ˜¯ä»€ä¹ˆï¼Ÿ", answer: "8", hint: "æ¯ä¸ªæ•°å­—éƒ½æ˜¯å‰ä¸¤ä¸ªæ•°å­—çš„å’Œã€‚", time: 40 }
                ],
                hard: [
                    { question: "è§£ç è¿™ä¸ªå‡¯æ’’å¯†ç ï¼ˆç§»ä½3ï¼‰ï¼š'FDHVDU'", answer: "caesar", hint: "å°†æ¯ä¸ªå­—æ¯åœ¨å­—æ¯è¡¨ä¸­å‘åç§»åŠ¨3ä¸ªä½ç½®ã€‚", time: 90 },
                    { question: "å¤§äº50çš„æœ€å°è´¨æ•°æ˜¯ä»€ä¹ˆï¼Ÿ", answer: "53", hint: "æµ‹è¯•è¢«è´¨æ•°æ•´é™¤ç›´åˆ°å…¶å¹³æ–¹æ ¹ã€‚", time: 75 }
                ]
            }
        };

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 12 + 's';
                particle.style.animationDuration = (Math.random() * 6 + 6) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        function updateLanguage() {
            const lang = document.getElementById('languageSelect').value;
            currentLanguage = lang;
            const t = translations[lang];
            
            // Update UI elements
            document.getElementById('gameTitle').textContent = t.title;
            document.getElementById('gameSubtitle').textContent = t.subtitle;
            document.getElementById('startBtn').innerHTML = t.start;
            document.getElementById('pauseBtn').innerHTML = gameState.isPaused ? t.resume : t.pause;
            document.getElementById('rulesBtn').innerHTML = `ğŸ“– ${t.rules.replace('ğŸ“– ', '')}`;
            document.getElementById('newGameBtn').innerHTML = t.newGame;
            document.getElementById('aiName').textContent = t.aiName;
            document.getElementById('aiMessage').textContent = t.aiWelcome;
            document.getElementById('statsTitle').textContent = t.statsTitle;
            document.getElementById('solvedLabel').textContent = t.solved;
            document.getElementById('failedLabel').textContent = t.failed;
            document.getElementById('streakLabel').textContent = t.streak;
            document.getElementById('levelLabel').textContent = t.level;
            document.getElementById('scoreLabel').textContent = t.score;
            document.getElementById('difficultyTitle').textContent = t.difficultyTitle;
            document.getElementById('currentDiffLabel').textContent = t.currentDiff;
            document.getElementById('timeLeftLabel').textContent = t.timeLeft;
            document.getElementById('hintsLeftLabel').textContent = t.hintsLeft;
            document.getElementById('rulesName').textContent = t.objectiveName;
            document.getElementById('rulesTitle').textContent = t.rulesTitle;
            document.getElementById('rulesMessage').textContent = t.rulesMessage;
            document.getElementById('levelIndicator').textContent = t.levelIndicator + ' ' + gameState.level;
            document.getElementById('submitBtn').textContent = t.submitBtn;
            document.getElementById('hintBtnRight').textContent = t.hintBtn;
            document.getElementById('solutionBtnRight').textContent = t.solutionBtn;
            document.getElementById('hintTitleRight').textContent = t.hintTitle;

            document.getElementById('progressTitle').textContent = t.progressTitle;
            document.getElementById('enigmaInput').placeholder = t.inputPlaceholder;
            document.getElementById('closeRulesBtn').textContent = t.closeBtn;
            
            // Update rules content
            if (t.rules) {
                document.getElementById('objectiveTitle').textContent = t.rules.objectiveTitle;
                document.getElementById('objectiveText').textContent = t.rules.objectiveText;
                document.getElementById('gameplayTitle').textContent = t.rules.gameplayTitle;
                document.getElementById('variedEnigmas').textContent = t.rules.variedEnigmas;
                document.getElementById('variedEnigmasDesc').textContent = t.rules.variedEnigmasDesc;
                document.getElementById('timedChallenges').textContent = t.rules.timedChallenges;
                document.getElementById('timedChallengesDesc').textContent = t.rules.timedChallengesDesc;
                document.getElementById('progressiveLevels').textContent = t.rules.progressiveLevels;
                document.getElementById('progressiveLevelsDesc').textContent = t.rules.progressiveLevelsDesc;
                document.getElementById('hintSystem').textContent = t.rules.hintSystem;
                document.getElementById('hintSystemDesc').textContent = t.rules.hintSystemDesc;
                document.getElementById('solutionSystem').textContent = t.rules.solutionSystem;
                document.getElementById('solutionSystemDesc').textContent = t.rules.solutionSystemDesc;
                document.getElementById('scoringTitle').textContent = t.rules.scoringTitle;
                document.getElementById('fastSolving').textContent = t.rules.fastSolving;
                document.getElementById('fastSolvingDesc').textContent = t.rules.fastSolvingDesc;
                document.getElementById('noHints').textContent = t.rules.noHints;
                document.getElementById('noHintsDesc').textContent = t.rules.noHintsDesc;
                document.getElementById('streaks').textContent = t.rules.streaks;
                document.getElementById('streaksDesc').textContent = t.rules.streaksDesc;
                document.getElementById('levelUnlock').textContent = t.rules.levelUnlock;
                document.getElementById('levelUnlockDesc').textContent = t.rules.levelUnlockDesc;
            }
            
            // Update difficulty display
            document.getElementById('currentDiffValue').textContent = t.difficulties[gameState.difficulty];
            
            if (!gameState.isPlaying) {
                document.getElementById('enigmaText').textContent = t.startMessage;
                document.getElementById('gameMessage').textContent = t.welcomeMessage;
            }
            
            // Set text direction for Arabic
            if (lang === 'ar') {
                document.body.style.direction = 'rtl';
                document.body.style.textAlign = 'right';
            } else {
                document.body.style.direction = 'ltr';
                document.body.style.textAlign = 'left';
            }
        }

        function startGame() {
            gameState.isPlaying = true;
            gameState.isPaused = false;
            gameState.level = 1;
            gameState.score = 0;
            gameState.solved = 0;
            gameState.failed = 0;
            gameState.streak = 0;
            gameState.hintsLeft = 3;
            gameState.difficulty = 'easy';
            gameState.enigmasInLevel = 0;
            gameState.usedEnigmas = {
                easy: [],
                medium: [],
                hard: []
            };
            
            document.getElementById('startBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = false;
            document.getElementById('enigmaInput').style.display = 'block';
            document.getElementById('submitBtn').style.display = 'block';

            document.getElementById('hintSystemRight').style.display = 'block';
            
            updateStats();
            nextEnigma();
            updateAIMessage(translations[currentLanguage].aiMessages.encouragement[0]);
        }

        function nextEnigma() {
            const enigmaList = enigmas[currentLanguage][gameState.difficulty];
            if (!enigmaList || enigmaList.length === 0) return;
            
            // Get unused enigmas for current difficulty
            const usedList = gameState.usedEnigmas[gameState.difficulty];
            const availableEnigmas = enigmaList.filter((_, index) => !usedList.includes(index));
            
            // If all enigmas used, reset the used list
            if (availableEnigmas.length === 0) {
                gameState.usedEnigmas[gameState.difficulty] = [];
                availableEnigmas.push(...enigmaList);
            }
            
            // Select random enigma from available ones
            const randomIndex = Math.floor(Math.random() * availableEnigmas.length);
            gameState.currentEnigma = availableEnigmas[randomIndex];
            
            // Mark this enigma as used
            const originalIndex = enigmaList.indexOf(gameState.currentEnigma);
            gameState.usedEnigmas[gameState.difficulty].push(originalIndex);
            
            gameState.timeLeft = gameState.currentEnigma.time;
            
            document.getElementById('enigmaText').textContent = gameState.currentEnigma.question;
            document.getElementById('enigmaInput').value = '';
            document.getElementById('enigmaInput').focus();
            
            startTimer();
            updateGameMessage(translations[currentLanguage].targetMessage);
        }

        function startTimer() {
            if (gameState.timer) clearInterval(gameState.timer);
            
            gameState.timer = setInterval(() => {
                if (!gameState.isPaused && gameState.timeLeft > 0) {
                    gameState.timeLeft--;
                    updateTimerDisplay();
                    
                    if (gameState.timeLeft === 0) {
                        timeOut();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.timeLeft / 60);
            const seconds = gameState.timeLeft % 60;
            document.getElementById('timerText').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timeLeftValue').textContent = `${gameState.timeLeft}s`;
        }

        function submitAnswer() {
            const userAnswer = document.getElementById('enigmaInput').value.trim().toLowerCase();
            const correctAnswer = gameState.currentEnigma.answer.toLowerCase();
            
            if (userAnswer === correctAnswer) {
                correctAnswerHandler();
            } else {
                wrongAnswer();
            }
        }

        function correctAnswerHandler() {
            gameState.solved++;
            gameState.streak++;
            gameState.enigmasInLevel++;
            
            const timeBonus = Math.floor(gameState.timeLeft * 10);
            const streakBonus = gameState.streak * 50;
            const scoreGain = 100 + timeBonus + streakBonus;
            gameState.score += scoreGain;
            
            clearInterval(gameState.timer);
            updateStats();
            updateGameMessage(translations[currentLanguage].messages.correct);
            updateAIMessage(translations[currentLanguage].aiMessages.encouragement[Math.floor(Math.random() * translations[currentLanguage].aiMessages.encouragement.length)]);
            
            if (gameState.enigmasInLevel >= gameState.enigmasNeededForLevel) {
                levelUp();
            } else {
                setTimeout(nextEnigma, 2000);
            }
        }

        function wrongAnswer() {
            gameState.failed++;
            gameState.streak = 0;
            updateStats();
            updateGameMessage(translations[currentLanguage].messages.wrong);
            updateAIMessage(translations[currentLanguage].aiMessages.hints[Math.floor(Math.random() * translations[currentLanguage].aiMessages.hints.length)]);
        }

        function timeOut() {
            gameState.failed++;
            gameState.streak = 0;
            clearInterval(gameState.timer);
            updateStats();
            updateGameMessage(translations[currentLanguage].messages.timeout);
            setTimeout(nextEnigma, 2000);
        }

        function levelUp() {
            gameState.level++;
            gameState.enigmasInLevel = 0;
            gameState.hintsLeft = 3;
            
            if (gameState.level <= 3) gameState.difficulty = 'easy';
            else if (gameState.level <= 6) gameState.difficulty = 'medium';
            else gameState.difficulty = 'hard';
            
            updateStats();
            updateGameMessage(translations[currentLanguage].messages.levelUp);
            updateAIMessage(`ğŸŠ ${translations[currentLanguage].levelIndicator} ${gameState.level} !`);
            
            setTimeout(nextEnigma, 3000);
        }

        function useHint() {
            if (gameState.hintsLeft > 0) {
                gameState.hintsLeft--;
                document.getElementById('hintText').textContent = gameState.currentEnigma.hint;
                document.getElementById('hintTextRight').textContent = gameState.currentEnigma.hint;
                updateStats();
                updateGameMessage(translations[currentLanguage].messages.hint);
            } else {
                updateGameMessage(translations[currentLanguage].messages.noHints);
            }
        }

        function showSolution() {
            if (gameState.currentEnigma) {
                // Show the solution
                document.getElementById('enigmaInput').value = gameState.currentEnigma.answer;
                document.getElementById('hintText').textContent = `ğŸ’¡ Solution: ${gameState.currentEnigma.answer}`;
                document.getElementById('hintTextRight').textContent = `ğŸ’¡ Solution: ${gameState.currentEnigma.answer}`;
                
                // Mark as failed but allow progression
                gameState.failed++;
                gameState.streak = 0;
                gameState.enigmasInLevel++;
                
                clearInterval(gameState.timer);
                updateStats();
                updateGameMessage("ğŸ”“ " + translations[currentLanguage].messages.solutionRevealed || "Solution rÃ©vÃ©lÃ©e ! Passage au niveau suivant...");
                updateAIMessage(translations[currentLanguage].messages.encourageAfterSolution || "Ne vous dÃ©couragez pas ! Chaque Ã©nigme est une leÃ§on.");
                
                if (gameState.enigmasInLevel >= gameState.enigmasNeededForLevel) {
                    setTimeout(levelUp, 2000);
                } else {
                    setTimeout(nextEnigma, 2000);
                }
            }
        }

        function togglePause() {
            gameState.isPaused = !gameState.isPaused;
            
            if (gameState.isPaused) {
                document.getElementById('pausePanel').style.display = 'block';
                document.getElementById('pauseBtn').innerHTML = translations[currentLanguage].resume;
            } else {
                document.getElementById('pausePanel').style.display = 'none';
                document.getElementById('pauseBtn').innerHTML = translations[currentLanguage].pause;
            }
        }

        function newGame() {
            if (gameState.timer) clearInterval(gameState.timer);
            
            gameState.isPlaying = false;
            gameState.isPaused = false;
            gameState.currentEnigma = null;
            gameState.level = 1;
            gameState.score = 0;
            gameState.solved = 0;
            gameState.failed = 0;
            gameState.streak = 0;
            gameState.hintsLeft = 3;
            gameState.difficulty = 'easy';
            gameState.enigmasInLevel = 0;
            gameState.usedEnigmas = {
                easy: [],
                medium: [],
                hard: []
            };
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('enigmaInput').style.display = 'none';
            document.getElementById('submitBtn').style.display = 'none';

            document.getElementById('hintSystemRight').style.display = 'none';
            document.getElementById('pausePanel').style.display = 'none';
            
            document.getElementById('enigmaText').textContent = translations[currentLanguage].startMessage;
            document.getElementById('gameMessage').textContent = translations[currentLanguage].welcomeMessage;
            document.getElementById('aiMessage').textContent = translations[currentLanguage].aiWelcome;
            document.getElementById('timerText').textContent = '--:--';
            document.getElementById('progressFill').style.width = '0%';
            
            updateStats();
        }

        function updateStats() {
            document.getElementById('solvedValue').textContent = gameState.solved;
            document.getElementById('failedValue').textContent = gameState.failed;
            document.getElementById('streakValue').textContent = gameState.streak;
            document.getElementById('levelValue').textContent = gameState.level;
            document.getElementById('scoreValue').textContent = gameState.score;
            document.getElementById('hintsLeftValue').textContent = gameState.hintsLeft;
            document.getElementById('currentDiffValue').textContent = translations[currentLanguage].difficulties[gameState.difficulty];
            document.getElementById('levelIndicator').textContent = translations[currentLanguage].levelIndicator + ' ' + gameState.level;
            
            const progress = (gameState.enigmasInLevel / gameState.enigmasNeededForLevel) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function updateGameMessage(message) {
            document.getElementById('gameMessage').textContent = message;
        }

        function updateAIMessage(message) {
            document.getElementById('aiMessage').textContent = message;
        }

        function showRules() {
            document.getElementById('rulesPanel').style.display = 'block';
        }

        function hideRules() {
            document.getElementById('rulesPanel').style.display = 'none';
        }

        // Event listeners
        document.getElementById('languageSelect').addEventListener('change', updateLanguage);
        document.getElementById('enigmaInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                submitAnswer();
            }
        });

        // Initialize
        createParticles();
        updateLanguage();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98720769317ae23b',t:'MTc1OTIxNzU3My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
